<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
  <meta name="description" content="Flaskhexo发布文章符号报错 处理方法

虚拟环境创建: virtualenv–no-site-packages -p xxxx freshenv8
安装flask: pip install flask
安装文件: pip install -r requirement.txt
Flask最小应">
  

  
  
  
  
  
  
  <title>Flask框架脑图day_02 | Ren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Flaskhexo发布文章符号报错 处理方法  虚拟环境创建: virtualenv–no-site-packages -p xxxx freshenv8 安装flask: pip install flask 安装文件: pip install -r requirement.txt Flask最小应用最小7行代码 生成flask对象，传入name参数，表示模块名或包名 app = Flask&amp;#4">
<meta name="keywords" content="flask框架">
<meta property="og:type" content="article">
<meta property="og:title" content="Flask框架脑图day_02">
<meta property="og:url" content="http://yoursite.com/2019/01/22/Flask框架脑图day-02/index.html">
<meta property="og:site_name" content="Ren">
<meta property="og:description" content="Flaskhexo发布文章符号报错 处理方法  虚拟环境创建: virtualenv–no-site-packages -p xxxx freshenv8 安装flask: pip install flask 安装文件: pip install -r requirement.txt Flask最小应用最小7行代码 生成flask对象，传入name参数，表示模块名或包名 app = Flask&amp;#4">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/images/QQ图片20190122175458.png">
<meta property="og:updated_time" content="2019-01-23T11:27:13.004Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flask框架脑图day_02">
<meta name="twitter:description" content="Flaskhexo发布文章符号报错 处理方法  虚拟环境创建: virtualenv–no-site-packages -p xxxx freshenv8 安装flask: pip install flask 安装文件: pip install -r requirement.txt Flask最小应用最小7行代码 生成flask对象，传入name参数，表示模块名或包名 app = Flask&amp;#4">
<meta name="twitter:image" content="http://yoursite.com/images/QQ图片20190122175458.png">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Ren" rel="home">Ren</a>
      </h1>
      
        <h2 class="site-description hitokoto"></h2>
        <script type="text/javascript" src="https://v1.hitokoto.cn/?encode=js"></script>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main"><article id="post-Flask框架脑图day-02" class="post-Flask框架脑图day-02 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title article-title">
      Flask框架脑图day_02
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/22/Flask框架脑图day-02/" data-id="cjsczle910009b0veaeh3frg1" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a>Flask</h1><p>hexo发布文章符号报错 处理方法</p>
<p><img src="/images/QQ图片20190122175458.png" alt=""></p>
<h2 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h2><p>创建: virtualenv–no-site-packages -p xxxx freshenv8</p>
<p>安装flask: pip install flask</p>
<p>安装文件: pip install -r requirement.txt</p>
<h2 id="Flask最小应用"><a href="#Flask最小应用" class="headerlink" title="Flask最小应用"></a>Flask最小应用</h2><p>最小7行代码</p>
<p>生成flask对象，传入<strong>name</strong>参数，表示模块名或包名</p>
<p>app = Flask&#40;<strong>name</strong>&#41;</p>
<p>告诉服务器，访问127.0.0.1:5000/hello/地址可触发hello&#40;&#41;方法</p>
<p>类似与Django中的urls.py文件的功能</p>
<p>@app.route&#40;’/hello/‘&#41;<br>def hello&#40;&#41;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return &apos;hello world&apos;</span><br></pre></td></tr></table></figure>
<p>sys.argv接收启动命令时的参数，如: python hello.py 0.0.0.0 80</p>
<p>ip = sys.argv[1]<br>port = sys.argv[2]</p>
<p>host代表启动的ip地址</p>
<p>port代表启动的端口</p>
<p>debug代表启动的模式，调试模型</p>
<p>app.run&#40;host=ip, port=port, debug=True&#41;</p>
<h2 id="flask-script"><a href="#flask-script" class="headerlink" title="flask_script"></a>flask_script</h2><p>使用: 用于管理flask启动的命令</p>
<h5 id="安装-pip-install-flask-script"><a href="#安装-pip-install-flask-script" class="headerlink" title="安装: pip install flask_script"></a>安装: pip install flask_script</h5><h3 id="使用"><a href="#使用" class="headerlink" title="使用:"></a>使用:</h3><p>from flask_script import Manager<br>manage = Manager&#40;flask应用&#41;<br>启动: manage.run&#40;&#41;</p>
<p>启动命令: python xxx.py runserver -p 端口 -h IP地址 -d 调试模式</p>
<h2 id="flask-blueprint"><a href="#flask-blueprint" class="headerlink" title="flask-blueprint"></a>flask-blueprint</h2><p>背景: 模块化管理路由地址</p>
<p>安装: pip install flask-blueprint</p>
<h4 id="使用-分两步"><a href="#使用-分两步" class="headerlink" title="使用: 分两步"></a>使用: 分两步</h4><ul>
<li>第一步: 管理路由</li>
<li>初始化: blue = Blueprint&#40;’first’, <strong>name</strong>&#41;</li>
<li>管理路由: @blue.route&#40;’路由’&#41;</li>
<li>第二步: 注册蓝图</li>
<li>flask对象.register_blueprint&#40;blueprint=blue, url_prefix=’/xxx’&#41;</li>
</ul>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><ul>
<li>直接重定向</li>
<li>redirect&#40;’/app/hello/‘&#41;: 直接重定向到某个地址</li>
<li>反向解析重定向</li>
<li>有参情况<ul>
<li>redirect&#40;url_for&#40;’生成蓝图的第一个参数.重定向的函数名, 参数=值’&#41;&#41;</li>
</ul>
</li>
<li>无参情况<ul>
<li>redirect&#40;url_for&#40;’生成蓝图的第一个参数.重定向的函数名’&#41;&#41;</li>
</ul>
</li>
</ul>
<h5 id="路由规则"><a href="#路由规则" class="headerlink" title="路由规则"></a>路由规则</h5><h5 id="格式-lt-转换器：参数-gt"><a href="#格式-lt-转换器：参数-gt" class="headerlink" title="格式: &lt;转换器：参数&gt;"></a>格式: &lt;转换器：参数&gt;</h5><p><a href="int:id" target="_blank" rel="noopener">int:id</a> 表示接受的id值为int类型</p>
<p><a href="string:name" target="_blank" rel="noopener">string:name</a>表示接收的name值为字符串类型，默认可简写为<name></name></p>
<p>&lt;float: price&gt;表示接收的price值为浮点数类型</p>
<p><a href="uuid:uid" target="_blank" rel="noopener">uuid:uid</a> 表示接收的uid值为uuid类型的参数</p>
<h5 id="path-p-表示接收的p参数为path路径"><a href="#path-p-表示接收的p参数为path路径" class="headerlink" title="path:p 表示接收的p参数为path路径"></a><a href="path:p" target="_blank" rel="noopener">path:p</a> 表示接收的p参数为path路径</h5><h2 id="错误抛出与捕获"><a href="#错误抛出与捕获" class="headerlink" title="错误抛出与捕获"></a>错误抛出与捕获</h2><p>导包: from flask import abort</p>
<p>使用: abort&#40;500&#41;</p>
<p>捕获: @blue.errorhandler&#40;500&#41;</p>
<p>抛出错误码时，错误码必须符合HTTP定义的状态码,且抛出的错误码要符合运用场景</p>
<h2 id="请求与响应"><a href="#请求与响应" class="headerlink" title="请求与响应"></a>请求与响应</h2><h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><ul>
<li>接收参数</li>
<li>GET请求: request.args.get&#40;key&#41;或request.args.getlist&#40;key&#41;</li>
<li>POST/PUT/PATCH/DELETE请求: request.form.get&#40;key&#41;或request.form.getlist&#40;key&#41;</li>
<li>获取请求方式</li>
<li>request.method</li>
<li>获取路由</li>
<li>request.path</li>
<li>获取cookie</li>
<li>request.cookies</li>
<li>获取文件</li>
<li>request.files</li>
</ul>
<h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4><ul>
<li>创建: make_response&#40;响应内容, 响应状态码&#41;， 状态码默认为200，可不写。</li>
<li>响应对象.set_cookie&#40;key, value, max_age&#41;</li>
<li>响应对象.delete_cookie&#40;key&#41;</li>
</ul>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ul>
<li>第一次访问任何一个路由地址时,在客户端，将在cookie中存储一个键值对，键为session，值为唯一的uuid类型的参数</li>
<li>第一次方式的同时，在服务端指定的redis中，也将存储cookie中的uuid值</li>
<li>如果用户登录成功，则可以像redis中存储的uuid参数中保存信息</li>
</ul>
<h4 id="flask自带形式"><a href="#flask自带形式" class="headerlink" title="flask自带形式"></a>flask自带形式</h4><ul>
<li>存储数据: 将session中存储的键值对内容存放在cookie中</li>
<li>存储方式: 设置secret_key参数，越复杂越好</li>
<li>使用方式:<br>from flask import session<br>session[‘key’] = value</li>
</ul>
<h3 id="使用flask-session第三方库"><a href="#使用flask-session第三方库" class="headerlink" title="使用flask-session第三方库"></a>使用flask-session第三方库</h3><ul>
<li>安装: pip install flask-session</li>
<li>配置存储的数据库:<br>flask对象.config[‘SESSION_TYPE’] = ‘redis’<br>flask对象.config[‘SESSION_REDIS’] = redis.Redis&#40;host, port, password&#41;</li>
<li>初始化:<br>from flask_session import Session<ul>
<li>第一种: Session&#40;flask对象&#41;</li>
<li>第二种:<br>se = Session&#40;&#41;<br>se.init_app&#40;flask对象&#41;</li>
</ul>
</li>
</ul>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h5 id="安装-pip-install-flask-sqlalchemy"><a href="#安装-pip-install-flask-sqlalchemy" class="headerlink" title="安装: pip install flask-sqlalchemy"></a>安装: pip install flask-sqlalchemy</h5><p>创建对象:</p>
<p>from flask_sqlalchemy import SQLALChemy<br>db = SQLALChemy&#40;&#41;</p>
<h3 id="模型定义"><a href="#模型定义" class="headerlink" title="模型定义:"></a>模型定义:</h3><p>class User&#40;db.Model&#41;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 定义自增的主键id</span><br><span class="line">id = db.Column(db.Integer, primary_key=True, autoincrement=True)</span><br><span class="line"># 定义长度为10的name字段，类型为字符串，唯一且不能为空</span><br><span class="line">name = db.Column(db.String(10), unique=True, nullable=False)</span><br><span class="line"># 定义密码password字段</span><br><span class="line">password = db.Column(db.String(249), nullable=False)</span><br><span class="line"></span><br><span class="line">__tablename__ = &apos;flask_user&apos;</span><br></pre></td></tr></table></figure>
<h3 id="配置链接"><a href="#配置链接" class="headerlink" title="配置链接:"></a>配置链接:</h3><p>flask对象.config[‘SQLALCHEMY_DATABASE_URI’]=’mysql+pymysql://root:<a href="mailto:123456@127.0.0.1" target="_blank" rel="noopener">123456@127.0.0.1</a>:2206/flask8’</p>
<p>初始化: db.init_app&#40;flask对象&#41;</p>
<h3 id="模型的映射"><a href="#模型的映射" class="headerlink" title="模型的映射"></a>模型的映射</h3><ul>
<li>创建: db.create_all&#40;&#41;</li>
<li>删除: db.drop_all&#40;&#41;</li>
</ul>
<h2 id="flask-login"><a href="#flask-login" class="headerlink" title="flask-login"></a>flask-login</h2><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><ul>
<li>加密: generate_password_hash&#40;&#41;</li>
<li>解密: check_password_hash&#40;&#41;</li>
</ul>
<h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><ul>
<li>安装: pip install flask-login</li>
<li>初始化:<br>from flask_login import LoginManager<br>lm = LoginManager&#40;&#41;<br>lm.init_app&#40;flask对象&#41;</li>
<li>登录用户: login_user&#40;登录系统用户对象&#41;</li>
<li>退出用户: logout_user&#40;&#41;</li>
<li>登录校验: login_required</li>
<li>在模板中可使用&#123;&#123; current_user.name &#125;&#125;渲染登录系统的用户名信息</li>
<li>重点: 用户的模型中需继承UserMixin，或者自定义相关的属性与方法</li>
<li>必须定义回调user_loader，用于返回登录系统的用户对象</li>
</ul>
<p><em>XMind: ZEN - Trial Version</em></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/22/Flask框架脑图day-02/">
    <time datetime="2019-01-22T09:56:38.000Z" class="entry-date">
        2019-01-22
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flask框架/">flask框架</a></li></ul>

    </footer>
</article>


    
<nav class="nav-single">
    <h3 class="assistive-text">文章导航</h3>
    
        <span class="nav-previous"><a href="/2019/01/23/day03flask框架（增、删、改、查）/" rel="prev"><span class="meta-nav">←</span> day03flask框架（增、删、改、查）</a></span>
    
    
        <span class="nav-next"><a href="/2019/01/22/Django框架脑图/" rel="next">Djangoæ框架脑图 <span class="meta-nav">→</span></a></span>
    
</nav><!-- .nav-single -->







</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s">
        <input type="submit" id="searchsubmit" value="搜索">
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/02/19/linux中msql操作/">linux中msql操作</a>
          </li>
        
          <li>
            <a href="/2019/02/19/操作命令/">操作命令</a>
          </li>
        
          <li>
            <a href="/2019/02/16/flask项目部署/">flask项目部署</a>
          </li>
        
          <li>
            <a href="/2019/02/15/django项目部署/">django项目部署</a>
          </li>
        
          <li>
            <a href="/2019/01/24/day-04flask数据库、分页、文件上传/">day_04flask数据库、分页、文件上传</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux学习/">Linux学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask框架/">flask框架</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/Linux学习/" style="font-size: 13.33px;">Linux学习</a> <a href="/tags/flask框架/" style="font-size: 13.33px;">flask框架</a> <a href="/tags/数据库/" style="font-size: 16.67px;">数据库</a> <a href="/tags/框架/" style="font-size: 20px;">框架</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 John Doe
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>