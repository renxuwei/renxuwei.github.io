<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  

  
  
  
  
  
  
  <title>Ren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Ren">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Ren">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ren">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Ren" rel="home">Ren</a>
      </h1>
      
        <h2 class="site-description hitokoto"></h2>
        <script type="text/javascript" src="https://v1.hitokoto.cn/?encode=js"></script>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-Flask框架脑图day-02" class="post-Flask框架脑图day-02 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/22/Flask框架脑图day-02/">Flask框架脑图day_02</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/22/Flask框架脑图day-02/" data-id="cjslphnod0003qsvefw7tww8m" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a>Flask</h1><p>hexo发布文章符号报错 处理方法</p>
<p><img src="/images/QQ图片20190122175458.png" alt=""></p>
<h2 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h2><p>创建: virtualenv–no-site-packages -p xxxx freshenv8</p>
<p>安装flask: pip install flask</p>
<p>安装文件: pip install -r requirement.txt</p>
<h2 id="Flask最小应用"><a href="#Flask最小应用" class="headerlink" title="Flask最小应用"></a>Flask最小应用</h2><p>最小7行代码</p>
<p>生成flask对象，传入<strong>name</strong>参数，表示模块名或包名</p>
<p>app = Flask&#40;<strong>name</strong>&#41;</p>
<p>告诉服务器，访问127.0.0.1:5000/hello/地址可触发hello&#40;&#41;方法</p>
<p>类似与Django中的urls.py文件的功能</p>
<p>@app.route&#40;’/hello/‘&#41;<br>def hello&#40;&#41;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return &apos;hello world&apos;</span><br></pre></td></tr></table></figure>
<p>sys.argv接收启动命令时的参数，如: python hello.py 0.0.0.0 80</p>
<p>ip = sys.argv[1]<br>port = sys.argv[2]</p>
<p>host代表启动的ip地址</p>
<p>port代表启动的端口</p>
<p>debug代表启动的模式，调试模型</p>
<p>app.run&#40;host=ip, port=port, debug=True&#41;</p>
<h2 id="flask-script"><a href="#flask-script" class="headerlink" title="flask_script"></a>flask_script</h2><p>使用: 用于管理flask启动的命令</p>
<h5 id="安装-pip-install-flask-script"><a href="#安装-pip-install-flask-script" class="headerlink" title="安装: pip install flask_script"></a>安装: pip install flask_script</h5><h3 id="使用"><a href="#使用" class="headerlink" title="使用:"></a>使用:</h3><p>from flask_script import Manager<br>manage = Manager&#40;flask应用&#41;<br>启动: manage.run&#40;&#41;</p>
<p>启动命令: python xxx.py runserver -p 端口 -h IP地址 -d 调试模式</p>
<h2 id="flask-blueprint"><a href="#flask-blueprint" class="headerlink" title="flask-blueprint"></a>flask-blueprint</h2><p>背景: 模块化管理路由地址</p>
<p>安装: pip install flask-blueprint</p>
<h4 id="使用-分两步"><a href="#使用-分两步" class="headerlink" title="使用: 分两步"></a>使用: 分两步</h4><ul>
<li>第一步: 管理路由</li>
<li>初始化: blue = Blueprint&#40;’first’, <strong>name</strong>&#41;</li>
<li>管理路由: @blue.route&#40;’路由’&#41;</li>
<li>第二步: 注册蓝图</li>
<li>flask对象.register_blueprint&#40;blueprint=blue, url_prefix=’/xxx’&#41;</li>
</ul>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><ul>
<li>直接重定向</li>
<li>redirect&#40;’/app/hello/‘&#41;: 直接重定向到某个地址</li>
<li>反向解析重定向</li>
<li>有参情况<ul>
<li>redirect&#40;url_for&#40;’生成蓝图的第一个参数.重定向的函数名, 参数=值’&#41;&#41;</li>
</ul>
</li>
<li>无参情况<ul>
<li>redirect&#40;url_for&#40;’生成蓝图的第一个参数.重定向的函数名’&#41;&#41;</li>
</ul>
</li>
</ul>
<h5 id="路由规则"><a href="#路由规则" class="headerlink" title="路由规则"></a>路由规则</h5><h5 id="格式-lt-转换器：参数-gt"><a href="#格式-lt-转换器：参数-gt" class="headerlink" title="格式: &lt;转换器：参数&gt;"></a>格式: &lt;转换器：参数&gt;</h5><p><a href="int:id" target="_blank" rel="noopener">int:id</a> 表示接受的id值为int类型</p>
<p><a href="string:name" target="_blank" rel="noopener">string:name</a>表示接收的name值为字符串类型，默认可简写为<name></name></p>
<p>&lt;float: price&gt;表示接收的price值为浮点数类型</p>
<p><a href="uuid:uid" target="_blank" rel="noopener">uuid:uid</a> 表示接收的uid值为uuid类型的参数</p>
<h5 id="path-p-表示接收的p参数为path路径"><a href="#path-p-表示接收的p参数为path路径" class="headerlink" title="path:p 表示接收的p参数为path路径"></a><a href="path:p" target="_blank" rel="noopener">path:p</a> 表示接收的p参数为path路径</h5><h2 id="错误抛出与捕获"><a href="#错误抛出与捕获" class="headerlink" title="错误抛出与捕获"></a>错误抛出与捕获</h2><p>导包: from flask import abort</p>
<p>使用: abort&#40;500&#41;</p>
<p>捕获: @blue.errorhandler&#40;500&#41;</p>
<p>抛出错误码时，错误码必须符合HTTP定义的状态码,且抛出的错误码要符合运用场景</p>
<h2 id="请求与响应"><a href="#请求与响应" class="headerlink" title="请求与响应"></a>请求与响应</h2><h4 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h4><ul>
<li>接收参数</li>
<li>GET请求: request.args.get&#40;key&#41;或request.args.getlist&#40;key&#41;</li>
<li>POST/PUT/PATCH/DELETE请求: request.form.get&#40;key&#41;或request.form.getlist&#40;key&#41;</li>
<li>获取请求方式</li>
<li>request.method</li>
<li>获取路由</li>
<li>request.path</li>
<li>获取cookie</li>
<li>request.cookies</li>
<li>获取文件</li>
<li>request.files</li>
</ul>
<h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4><ul>
<li>创建: make_response&#40;响应内容, 响应状态码&#41;， 状态码默认为200，可不写。</li>
<li>响应对象.set_cookie&#40;key, value, max_age&#41;</li>
<li>响应对象.delete_cookie&#40;key&#41;</li>
</ul>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ul>
<li>第一次访问任何一个路由地址时,在客户端，将在cookie中存储一个键值对，键为session，值为唯一的uuid类型的参数</li>
<li>第一次方式的同时，在服务端指定的redis中，也将存储cookie中的uuid值</li>
<li>如果用户登录成功，则可以像redis中存储的uuid参数中保存信息</li>
</ul>
<h4 id="flask自带形式"><a href="#flask自带形式" class="headerlink" title="flask自带形式"></a>flask自带形式</h4><ul>
<li>存储数据: 将session中存储的键值对内容存放在cookie中</li>
<li>存储方式: 设置secret_key参数，越复杂越好</li>
<li>使用方式:<br>from flask import session<br>session[‘key’] = value</li>
</ul>
<h3 id="使用flask-session第三方库"><a href="#使用flask-session第三方库" class="headerlink" title="使用flask-session第三方库"></a>使用flask-session第三方库</h3><ul>
<li>安装: pip install flask-session</li>
<li>配置存储的数据库:<br>flask对象.config[‘SESSION_TYPE’] = ‘redis’<br>flask对象.config[‘SESSION_REDIS’] = redis.Redis&#40;host, port, password&#41;</li>
<li>初始化:<br>from flask_session import Session<ul>
<li>第一种: Session&#40;flask对象&#41;</li>
<li>第二种:<br>se = Session&#40;&#41;<br>se.init_app&#40;flask对象&#41;</li>
</ul>
</li>
</ul>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h5 id="安装-pip-install-flask-sqlalchemy"><a href="#安装-pip-install-flask-sqlalchemy" class="headerlink" title="安装: pip install flask-sqlalchemy"></a>安装: pip install flask-sqlalchemy</h5><p>创建对象:</p>
<p>from flask_sqlalchemy import SQLALChemy<br>db = SQLALChemy&#40;&#41;</p>
<h3 id="模型定义"><a href="#模型定义" class="headerlink" title="模型定义:"></a>模型定义:</h3><p>class User&#40;db.Model&#41;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 定义自增的主键id</span><br><span class="line">id = db.Column(db.Integer, primary_key=True, autoincrement=True)</span><br><span class="line"># 定义长度为10的name字段，类型为字符串，唯一且不能为空</span><br><span class="line">name = db.Column(db.String(10), unique=True, nullable=False)</span><br><span class="line"># 定义密码password字段</span><br><span class="line">password = db.Column(db.String(249), nullable=False)</span><br><span class="line"></span><br><span class="line">__tablename__ = &apos;flask_user&apos;</span><br></pre></td></tr></table></figure>
<h3 id="配置链接"><a href="#配置链接" class="headerlink" title="配置链接:"></a>配置链接:</h3><p>flask对象.config[‘SQLALCHEMY_DATABASE_URI’]=’mysql+pymysql://root:<a href="mailto:123456@127.0.0.1" target="_blank" rel="noopener">123456@127.0.0.1</a>:2206/flask8’</p>
<p>初始化: db.init_app&#40;flask对象&#41;</p>
<h3 id="模型的映射"><a href="#模型的映射" class="headerlink" title="模型的映射"></a>模型的映射</h3><ul>
<li>创建: db.create_all&#40;&#41;</li>
<li>删除: db.drop_all&#40;&#41;</li>
</ul>
<h2 id="flask-login"><a href="#flask-login" class="headerlink" title="flask-login"></a>flask-login</h2><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><ul>
<li>加密: generate_password_hash&#40;&#41;</li>
<li>解密: check_password_hash&#40;&#41;</li>
</ul>
<h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><ul>
<li>安装: pip install flask-login</li>
<li>初始化:<br>from flask_login import LoginManager<br>lm = LoginManager&#40;&#41;<br>lm.init_app&#40;flask对象&#41;</li>
<li>登录用户: login_user&#40;登录系统用户对象&#41;</li>
<li>退出用户: logout_user&#40;&#41;</li>
<li>登录校验: login_required</li>
<li>在模板中可使用&#123;&#123; current_user.name &#125;&#125;渲染登录系统的用户名信息</li>
<li>重点: 用户的模型中需继承UserMixin，或者自定义相关的属性与方法</li>
<li>必须定义回调user_loader，用于返回登录系统的用户对象</li>
</ul>
<p><em>XMind: ZEN - Trial Version</em></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/22/Flask框架脑图day-02/">
    <time datetime="2019-01-22T09:56:38.000Z" class="entry-date">
        2019-01-22
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flask框架/">flask框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-Django框架脑图" class="post-Django框架脑图 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/22/Django框架脑图/">Djangoæ框架脑图</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/22/Django框架脑图/" data-id="cjslphnsf0022qsve4sgl8d06" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><h2 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h2><p>安装: pip install virtualenv</p>
<p>使用: virtualenv –no-site-packages -p D:\python3\python.exe name</p>
<ul>
<li>–no-site-packages: 表示创建的虚拟环境为纯净的环境，不安装有其他的库</li>
<li>-p: 表示虚拟环境中的python版本</li>
</ul>
<h3 id="pip使用"><a href="#pip使用" class="headerlink" title="pip使用"></a>pip使用</h3><ul>
<li>pip list: 插看安装的库</li>
<li>pip install xxx: 安装</li>
</ul>
<h3 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h3><ul>
<li>Windows: 直接执行activate命令</li>
<li>Mac/Linux/Ubuntu: 直接执行source activate命令</li>
</ul>
<h3 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h3><ul>
<li>Windows/Mac/Linux/Ubuntu: 直接执行deactivate</li>
</ul>
<h2 id="Django项目"><a href="#Django项目" class="headerlink" title="Django项目"></a>Django项目</h2><p>创建项目: django-amdin startproject 项目名称</p>
<p>创建应用: python manage.py startapp 应用名称</p>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul>
<li>启动命令: python manage.py runserver。默认IP为127.0.0.1  默认端口为8000</li>
<li>修改启动端口: python manage.py runserver 端口</li>
<li>修改IP和端口: python manage.py runserver IP:端口</li>
<li>IP参数: 如果为0.0.0.0表示任何人都可以通过公网IP访问django项目</li>
<li>端口PORT参数: 如果端口设置为80，表示该端口可以不用写</li>
</ul>
<h2 id="Django模式"><a href="#Django模式" class="headerlink" title="Django模式"></a>Django模式</h2><h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><ul>
<li>模型层: 定义模型和数据库中的表之间的关联关系</li>
</ul>
<h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><ul>
<li>视图层: 定义业务逻辑</li>
</ul>
<h3 id="T"><a href="#T" class="headerlink" title="T"></a>T</h3><ul>
<li>模板: HTML页面</li>
</ul>
<h2 id="数据库准备工作"><a href="#数据库准备工作" class="headerlink" title="数据库准备工作"></a>数据库准备工作</h2><h3 id="settings-py中配置"><a href="#settings-py中配置" class="headerlink" title="settings.py中配置"></a>settings.py中配置</h3><ul>
<li>USER参数: 访问用户</li>
<li>PASSWORD参数: 密码</li>
<li>HOST参数: 访问数据库的地址</li>
<li>PORT参数: 访问数据库的端口</li>
<li>NAME参数: 数据库名</li>
<li>‘OPTIONS’:&#123;’isolation_level’:None&#125;</li>
</ul>
<h3 id="安装pymysql"><a href="#安装pymysql" class="headerlink" title="安装pymysql"></a>安装pymysql</h3><ul>
<li>使用pymysql连接数据库: 因为python3没有MySQLdb驱动，无法直接连接MySQL</li>
<li>在工程目录的<strong>init</strong>.py文件中定义  pymysql.install_as_MySQLdb&#40;&#41;</li>
</ul>
<h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><ul>
<li>第一次迁移: python manege.py migrate</li>
<li>除开第一次迁移</li>
<li>生成迁移文件: python manage.py makemigrations</li>
<li>执行迁移文件: python manage.py migrate</li>
</ul>
<h3 id="插入管理员账号"><a href="#插入管理员账号" class="headerlink" title="插入管理员账号"></a>插入管理员账号</h3><ul>
<li>python manage.py createsuperuser</li>
</ul>
<h2 id="模型层"><a href="#模型层" class="headerlink" title="模型层"></a>模型层</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><ul>
<li>objects: 管理器，默认模型的属性</li>
<li>ORM&#40;objects relationship mapping&#41;: 对象关系映射</li>
</ul>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><ul>
<li>create&#40;&#41;方法: 模型名.objects.create&#40;字段1=值,字段2=值&#41;</li>
<li>save&#40;&#41;方法: 模型对象.save&#40;&#41;</li>
</ul>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><ul>
<li>delete&#40;&#41;方法: 模型名.objects.filter&#40;条件&#41;.delete&#40;&#41;</li>
</ul>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><ul>
<li>update&#40;&#41;方法: 模型名.objects.filter&#40;条件&#41;.update&#40;字段1=值,字段2=值&#41;</li>
<li>save&#40;&#41;方法: 模型对象.save&#40;&#41;</li>
<li>update&#40;&#41;和save&#40;&#41;的区别: 是否更新使用auto_now约束条件的字段</li>
</ul>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><ul>
<li>filter&#40;&#41;方法,查询满足条件的信息: 模型名.objects.filter&#40;条件&#41;</li>
<li>all&#40;&#41;方法: 查询所有</li>
<li>get&#40;&#41;方法: 查询指定的条件</li>
<li>只能返回唯一的一个对象结果</li>
<li>条件必须成立</li>
<li>first&#40;&#41;方法: 取出结果中的第一个对象</li>
<li>exclude&#40;&#41;方法: 查询出不满足条件的信息: 模型名.objects.exclude&#40;条件&#41;</li>
<li>order_by&#40;&#41;方法: 升序order_by&#40;’id’&#41;  降序order_by&#40;’-id’&#41;</li>
<li>values&#40;&#41;方法: 取查询对象中的字段</li>
<li>exists&#40;&#41;: 判断结果是否存在,存在返回True,否则返回False</li>
<li>count&#40;&#41;方法: 计算结果的条数</li>
<li>pk: 主键（就是id）</li>
<li>运算符</li>
<li>语法:  字段__contains</li>
<li>contains: 包含</li>
<li>startswith: 以什么开头</li>
<li>endswith: 以什么结束</li>
<li>in: 在某个范围之内</li>
<li>gt,gte: 大于,大于等于</li>
<li>lt,lte: 小于,小于等于</li>
<li>聚合</li>
<li>from django.db.models import Max, Avg, Min, Sum, Count</li>
<li>语法: 模型名.objects.all&#40;&#41;.aggregate&#40;Sum&#40;字段&#41;&#41;</li>
<li>Q</li>
<li>与1: Q&#40;条件1&#41;, Q&#40;条件2&#41;</li>
<li>与2: Q&#40;条件1&#41; &amp; Q&#40;条件2&#41;</li>
<li>或: Q&#40;条件1&#41; | Q&#40;条件2&#41;</li>
<li>非: ~Q&#40;条件1&#41;</li>
<li>F</li>
<li>用于比较两个字段,可使用+,-符号</li>
<li>模型名.objects.filter&#40;wuli__gt=F&#40;’math’&#41;-10&#41;</li>
</ul>
<h2 id="模型设计"><a href="#模型设计" class="headerlink" title="模型设计"></a>模型设计</h2><h3 id="迁移表名的定义"><a href="#迁移表名的定义" class="headerlink" title="迁移表名的定义"></a>迁移表名的定义</h3><ul>
<li>指定db_table参数，表示模型迁移时，映射到数据库中的表名称</li>
<li>如果没指定db_table参数,则数据库中模型映射的表名为: 应用名app_模型名称的小写</li>
</ul>
<h3 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a>字段类型</h3><ul>
<li>CharField: 字符串类型</li>
<li>IntegerField: 整型</li>
<li>ImageField: 字符串类型,用于存图片</li>
<li>BooleanField: 布尔， True 或者 False</li>
<li>DateTimeField: 日期, 年月日时分秒</li>
<li>DateField: 年月日</li>
<li>TextField: 存储长文本内容, areatext标签</li>
<li>FloatField: 浮点类型</li>
<li>DecimalField: 浮点类型，限制最大长度和小数点后的长度</li>
</ul>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><ul>
<li>unique: 是否唯一</li>
<li>default: 默认值</li>
<li>null: 是否可以为空</li>
<li>primary_key: 主键</li>
<li>auto_now_add: 创建时，默认赋值为当前时间</li>
<li>auto_now: 创建或修改时，默认赋值为当前时间</li>
<li>max_length: 最大长度</li>
<li>related_name: 反向查询名称</li>
<li>on_delete: 删除的约束条件</li>
<li>models.CASCADE 删除主表，从表也会被删</li>
<li>models.PROTECT 不让删除主表</li>
<li>models.SET_NULL 删除主表，从表的关联字段设置为空</li>
</ul>
<h3 id="一对一，1-1"><a href="#一对一，1-1" class="headerlink" title="一对一，1:1"></a>一对一，1:1</h3><ul>
<li>存储</li>
<li>关联字段存储1： stu_info.关联字段 = 关联对象</li>
<li>关联字段存储2: stu_info.关联字段_id = 主键id值</li>
<li>查询</li>
<li>学生模型和学生拓展模型的定义，一对一</li>
<li>查询1,没设置related_name参数时<ul>
<li>学生对象查询拓展表对象:  学生对象.拓展模型名称的小写</li>
<li>拓展表对象查询学生对象: 拓展表对象.OneToOneField定义的字段</li>
</ul>
</li>
<li>查询2, 设置related_name参数时<ul>
<li>学生对象查询拓展表对象: 对象对象.related_name参数</li>
<li>拓展表对象查询学生对象: 拓展表对象.OneToOneField定义的字段</li>
</ul>
</li>
<li>定义模型</li>
<li>OneToOneField: 定义在关联模型的任何一方都可以</li>
</ul>
<h3 id="一对多，1-N"><a href="#一对多，1-N" class="headerlink" title="一对多，1:N"></a>一对多，1:N</h3><ul>
<li>存储</li>
<li>关联字段的存储1: stu.关系字段 = 关联模型对象</li>
<li>关联字段的存储2: stu.关系字段_id = 关联表的主键id值</li>
<li>查询</li>
<li>查询1: 没有定义related_name参数<ul>
<li>学生查询班级: 多的一方&#40;学生&#41;对象.关联字段</li>
<li>班级查询学生: 一的一方（班级）.关联模型名的小写_set.filter&#40;&#41;.all&#40;&#41;</li>
</ul>
</li>
<li>查询2: 设置了related_name参数<ul>
<li>学生查询班级: 多的一方（学生）对象.关联字段</li>
<li>班级查询学生: 一的一方&#40;班级&#41;.related_name参数.filter&#40;&#41;.all&#40;&#41;</li>
</ul>
</li>
<li>定义模型</li>
<li>ForeignKey: 定义在多&#40;N&#41;的一方</li>
</ul>
<h3 id="多对多-N-M"><a href="#多对多-N-M" class="headerlink" title="多对多, N:M"></a>多对多, N:M</h3><ul>
<li>存储: 同一对多</li>
<li>查询</li>
<li>查询1: 没有设置related_name参数<ul>
<li>课程查询学生: 课程对象.关联字段.filter&#40;&#41;</li>
<li>学生查询课程: 学生对象.关联模型名的小写_set</li>
</ul>
</li>
<li>查询2: 设置了related_name参数<ul>
<li>课程查询学生: 课程对象.关联字段.filter&#40;&#41;.all&#40;&#41;</li>
<li>学生查询课程: 学生对象.related_name参数.filter&#40;&#41;.all&#40;&#41;</li>
</ul>
</li>
<li>定义模型</li>
<li>ManyToManyField: 定义在模型的任何一方都可以</li>
</ul>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><h3 id="解析模板文件的位置"><a href="#解析模板文件的位置" class="headerlink" title="解析模板文件的位置"></a>解析模板文件的位置</h3><ul>
<li>配置: 在settings.py文件中定义TEMPALTES的目录地址</li>
<li>os.path.join&#40;BASE_DIR, ‘templates’&#41;</li>
</ul>
<h3 id="后端渲染模板"><a href="#后端渲染模板" class="headerlink" title="后端渲染模板"></a>后端渲染模板</h3><ul>
<li>使用render&#40;&#41;渲染模板</li>
<li>传递参数给模板, render&#40;request, 模板名, &#123;key1:value1, key2: value2&#125;&#41;</li>
</ul>
<h3 id="前端渲染数据"><a href="#前端渲染数据" class="headerlink" title="前端渲染数据"></a>前端渲染数据</h3><ul>
<li>解析变量: &#123;&#123; 变量 &#125;&#125;</li>
<li>标签for中自带的变量forloop<ul>
<li>从1开始: &#123;&#123; forloop.counter &#125;&#125;</li>
<li>从0开始: &#123;&#123; forloop.counter0 &#125;&#125;</li>
<li>倒序1结束: &#123;&#123; forloop.revcounter &#125;&#125;</li>
<li>倒序0结束: &#123;&#123; forloop.revcounter0 &#125;&#125;</li>
<li>判断循环第一次: &#123;&#123; forloop.first &#125;&#125;, 返回布尔值</li>
<li>判断循环最后一次: &#123;&#123; forloop.last &#125;&#125;, 返回布尔值</li>
</ul>
</li>
<li>解析标签: &#123;% 标签 %&#125; &#123;% end标签 %&#125;</li>
<li>标签: for<ul>
<li>&#123;% for i in xxx %&#125; &#123;% empty %&#125;  &#123;% endfor %&#125;</li>
</ul>
</li>
<li>标签: if<ul>
<li>&#123;% if name %&#125; &#123;% else %&#125; &#123;% endif %&#125;</li>
</ul>
</li>
<li>标签: ifequal<ul>
<li>&#123;% ifeuqal forloop.counter 值 %&#125;  &#123;% endifequal %&#125;</li>
</ul>
</li>
<li>注解</li>
<li>web形式注解: <!--  注解内容-->, 需注意不能定义错误的标签语法</li>
<li>django框架中的单行注解: &#123;# 注解内容 #&#125;</li>
<li>django框架中的多行注解: &#123;% comment %&#125;  &#123;% endcomment %&#125;</li>
</ul>
<h3 id="引入静态文件"><a href="#引入静态文件" class="headerlink" title="引入静态文件"></a>引入静态文件</h3><ul>
<li>第一种: <link rel="stylesheet" href="/static/css/style.css"></li>
<li>第二种: &#123;% load static %&#125;    <link rel="stylesheet" href="&#123;% static 'css/style.css' %&#125;"></li>
</ul>
<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><ul>
<li>语法: &#123;&#123; a | 过滤器 &#125;&#125;</li>
<li>safe: 解析变量中的样式</li>
<li>upper/lower: 变量的大小写转换</li>
<li>default: 默认值</li>
<li>first/last: 取出变量中的首/尾元素</li>
<li>length: 计算变量的长度</li>
</ul>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul>
<li>父模板&#40;挖坑&#41;</li>
<li>概念: 定义好可以被子模板动态填充内容的block块</li>
<li>定义block块的名字不能重复</li>
<li>子模板&#40;填坑&#41;</li>
<li>概念: 继承于父模板，并实现填充block块的内容</li>
<li>定义的block块的名字一定要存在于父模板中</li>
<li>继承: &#123;% extends ‘父模板’ %&#125;</li>
<li>动态填充block块的内容: &#123;% block 名称 %&#125; &#123;% endblock %&#125;</li>
<li>获取父模板中坑之前定义好的内容: &#123;&#123; block.super &#125;&#125;</li>
</ul>
<h2 id="路由URLS"><a href="#路由URLS" class="headerlink" title="路由URLS"></a>路由URLS</h2><h3 id="配置路由分发"><a href="#配置路由分发" class="headerlink" title="配置路由分发"></a>配置路由分发</h3><ul>
<li>path&#40;’app/‘, include&#40;’app.urls’&#41;&#41;,</li>
<li>path&#40;’app/‘, include&#40;&#40;’app.urls’, ‘app’&#41;&#41;&#41;</li>
</ul>
<h3 id="接收参数"><a href="#接收参数" class="headerlink" title="接收参数"></a>接收参数</h3><ul>
<li>path</li>
<li>接收整型:<a href="int:id" target="_blank" rel="noopener">int:id</a> 其中id参数为int类型</li>
<li>接收字符串: &lt;str: name&gt; 其中name参数为str类型</li>
<li>接收uuid类型: &lt;uuid: uid&gt; 其中uid参数为uuid类型的值</li>
<li>接收path路径: &lt;path: path&gt; 其中path参数为路径</li>
<li>注意: 接收参数的方法中，需要指定接收参数的变量名</li>
<li>re_path</li>
<li>re_path: /index/&#40;\d+&#41;/其中路由匹配的值为int类型</li>
<li>re_path&#40;’params/&#40;\d+&#41;/&#40;\d+&#41;/&#40;\d+&#41;/‘, views.params&#41;: 注意方法中接收参数的定义顺序和路由中定义的正则表达式的顺序一致</li>
<li>re_path&#40;’params/&#40;?P<year>\d+&#41;/&#40;?P<month>\d+&#41;/&#40;?P<day>\d+&#41;/‘, views.params&#41;: 定义路由中接收参数的名字，分别为year，month，day</day></month></year></li>
</ul>
<h2 id="请求request"><a href="#请求request" class="headerlink" title="请求request"></a>请求request</h2><h3 id="请求方式method-GET-POST"><a href="#请求方式method-GET-POST" class="headerlink" title="请求方式method: GET,POST"></a>请求方式method: GET,POST</h3><ul>
<li>GET方式: 用于查询数据</li>
<li>POST方式: 用于增、删、改数据</li>
</ul>
<h3 id="传参GET"><a href="#传参GET" class="headerlink" title="传参GET"></a>传参GET</h3><ul>
<li>获取get请求传递的参数</li>
<li>request.GET[‘key’]</li>
<li>request.GET.get&#40;’key’&#41;</li>
</ul>
<h3 id="传参POST"><a href="#传参POST" class="headerlink" title="传参POST"></a>传参POST</h3><ul>
<li>获取post请求传递的参数</li>
<li>request.POST[‘key’]</li>
<li>request.POST.get[‘key’]</li>
</ul>
<h3 id="传参FILES"><a href="#传参FILES" class="headerlink" title="传参FILES"></a>传参FILES</h3><ul>
<li>获取上传的文件、图片等内容</li>
<li>request.FILES[‘key]</li>
<li>request.FILES.get&#40;’key’&#41;</li>
</ul>
<h3 id="路径path"><a href="#路径path" class="headerlink" title="路径path"></a>路径path</h3><ul>
<li>获取当前请求的路径</li>
<li>request.path</li>
</ul>
<h3 id="COOKIES"><a href="#COOKIES" class="headerlink" title="COOKIES"></a>COOKIES</h3><ul>
<li>存储网站的一些基本信息: 如登录的信息</li>
<li>COOKIES存储的内容是存储在客户端&#40;浏览器&#41;</li>
<li>request.COOKIES[‘key’]或request.COOKIES.get&#40;’key’&#41;</li>
</ul>
<h2 id="响应response"><a href="#响应response" class="headerlink" title="响应response"></a>响应response</h2><p>HttpResponse: 响应字符串</p>
<p>JsonResponse: 响应json，用于ajax异步请求</p>
<p>render: 渲染页面</p>
<h5 id="HttpResponseRedirect-跳转"><a href="#HttpResponseRedirect-跳转" class="headerlink" title="HttpResponseRedirect: 跳转"></a>HttpResponseRedirect: 跳转</h5><ul>
<li>第一种: 硬编码跳转地址， HttpResponseRedirect&#40;’/app/index/1/‘&#41;</li>
<li>第二种: 反向解析跳转地址: HttpResponseRedirect&#40;reverse&#40;’namespace:name’, kwargs=&#123;key:value&#125;&#41;&#41;</li>
</ul>
<h2 id="cookie与session"><a href="#cookie与session" class="headerlink" title="cookie与session"></a>cookie与session</h2><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><ul>
<li>产生背景: 由于http无状态协议，导致后端无法知道当前发送请求的人是‘谁’</li>
<li>用于存储一些不是很重要的内容</li>
<li>存储: set_cookie&#40;key, value, max_age,expris&#41;</li>
<li>删除: delete_cookie&#40;key&#41;</li>
</ul>
<h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><ul>
<li>产生背景: 由于cookie中存储空间有限，很容易被截取，因此cookie存重要内容不安全，需要使用session进行数据存储</li>
<li>向session中存数据: request.session[key]=value</li>
<li>取session中存的数据: request.session[‘key’]或request.session.get&#40;’key’&#41;</li>
<li>删除cookie和session中所有信息: request.session.flush&#40;&#41;</li>
<li>删除user_id键值对: del request.session[‘user_id’]</li>
</ul>
<h2 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h2><p>概念: 面向切面编程AOP, 在整个的请求与响应之间插入一些额外的功能代码</p>
<h3 id="五个中间件函数"><a href="#五个中间件函数" class="headerlink" title="五个中间件函数"></a>五个中间件函数</h3><ul>
<li>process_request&#40;self, request&#41;: 在匹配路由之前被调用</li>
<li>process_view&#40;self, request, view_func, view_args, view_kwargs&#41;: 在执行视图函数之前被调用</li>
<li>process_response&#40;self,request, response&#41;: 在视图函数响应之后被调用&#41;</li>
<li>process_template_response&#40;&#41;: 默认不会被主动调用</li>
<li>process_exception&#40;&#41;: 默认不会被主动调用，当出现异常时，才会被触发</li>
</ul>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>process_request中不要写return http响应对象。可以return None表示不再执行以下的代码，直接跳出process_request方法</li>
<li>process_response: 必须响应内容return response</li>
</ul>
<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><h3 id="使用切片实现"><a href="#使用切片实现" class="headerlink" title="使用切片实现"></a>使用切片实现</h3><h3 id="使用Paginator实现"><a href="#使用Paginator实现" class="headerlink" title="使用Paginator实现"></a>使用Paginator实现</h3><ul>
<li>pg = Paginator&#40;总数据, 分页条数&#41;</li>
<li>取某一页信息: pg.page&#40;某页&#41;</li>
<li>page_range: 页码</li>
<li>has_previous: 是否有上一页</li>
<li>previous_page_number: 上一页的脚码</li>
<li>has_next: 是否有下一页</li>
<li>next_page_numebr: 下一页的脚码</li>
<li>number: 当前页</li>
<li>num_pages: 共多少页</li>
</ul>
<h2 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h2><p>前端模板: form表单中需要添加enctype=”multipart/form-data”</p>
<p>后端: 获取图片request.FILES.get&#40;key&#41;或request.FILES[‘key’]</p>
<p>模型定义: ImageField&#40;upload_to=’upload’&#41;, 需安装pip install Pillow</p>
<p>模板中解析:&lt;img src=’/media/&#123;&#123; stu.icon &#125;&#125;&gt;</p>
<p>配置访问media文件的路由地址</p>
<ul>
<li>导包: from django.contrib.staticfiles.urls import static</li>
<li>urlpatterns += static&#40;MEDIA_URL, document_root=MEDIA_ROOT&#41;</li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/22/Django框架脑图/">
    <time datetime="2019-01-22T09:44:04.000Z" class="entry-date">
        2019-01-22
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-文章编辑器模板" class="post-文章编辑器模板 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/14/文章编辑器模板/">文章编辑器模板</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/14/文章编辑器模板/" data-id="cjslphnr8001jqsvexkfg2qqm" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>登录注册注销首页文章编辑展示的路由:</p>
<p><img src="images/QQ图片20190114090018.jpg" alt=""></p>
<p>登录状态校验中间件:</p>
<p><img src="images/QQ图片20190114090034.png" alt=""></p>
<p>日志中间件：</p>
<p><img src="images/QQ图片20190114090042.png" alt=""></p>
<p>模板文件:</p>
<p><img src="images/QQ图片20190114090048.png" alt=""></p>
<h1 id="django项目对接富文本编辑器kindeditor的使用"><a href="#django项目对接富文本编辑器kindeditor的使用" class="headerlink" title="django项目对接富文本编辑器kindeditor的使用"></a>django项目对接富文本编辑器kindeditor的使用</h1><blockquote>
<p>Auth: 王海飞</p>
<p>Data：2018-09-07</p>
<p>Email：<a href="mailto:779598160@qq.com" target="_blank" rel="noopener">779598160@qq.com</a></p>
<p>github：<a href="https://github.com/coco369/knowledge" target="_blank" rel="noopener">https://github.com/coco369/knowledge</a></p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Django中经常使用富文本编辑来编辑文本内容。富文本编辑器有很多可以选择，比如baiduEditor，tinymce，kindeditor等等。在此我选择使用kindeditor富文本编辑器，KindEditor 使用 JavaScript 编写，可以无缝地与 Java、.NET、PHP、ASP 等程序集成，很适合做网站的文本编辑器来使用。</p>
<h3 id="1-kindeditor下载与配置"><a href="#1-kindeditor下载与配置" class="headerlink" title="1. kindeditor下载与配置"></a>1. kindeditor下载与配置</h3><p>下载 KindEditor 最新版本，下载之后打开 examples/index.html 就可以看到演示。</p>
<p>步骤1： 下载<a href="http://www.kindsoft.net/down.php" target="_blank" rel="noopener">传送门地址</a></p>
<p>步骤2： 将下载的kindeditor解压，并删除无用的asp、jsp、php等配置文件夹。</p>
<p>步骤3： 将kindeditor文件夹拷贝放在static中</p>
<p>如：</p>
<p><img src="images/django_kindeditor.png" alt="图"></p>
<h3 id="2-Django中配置"><a href="#2-Django中配置" class="headerlink" title="2. Django中配置"></a>2. Django中配置</h3><p>要使用kindeditor富文本编辑器需要在settings.py文件中配置静态static解析路径，以及media文件解析路径。并且在页面中进行相关js的加载，和上传路径的指定等。</p>
<h4 id="2-1-在settings-py中配置如下参数："><a href="#2-1-在settings-py中配置如下参数：" class="headerlink" title="2.1 在settings.py中配置如下参数："></a>2.1 在settings.py中配置如下参数：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line"># 配置static的路径</span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, &apos;static&apos;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line"># 配置media的路径</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框"><a href="#2-2-页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框" class="headerlink" title="2.2 页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框"></a>2.2 页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框</h4><p>步骤1：引入js, 定义上传图片等文件的地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">    文章编辑页面</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block Js %&#125;</span><br><span class="line">    &#123;% load static %&#125;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;&#123;% static &apos;kindeditor/kindeditor-all.js&apos; %&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;&#123;% static &apos;kindeditor/lang/zh-CN.js&apos; %&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        KindEditor.ready(function(K) &#123;</span><br><span class="line">                window.editor = K.create(&apos;#editor_id&apos;,&#123;</span><br><span class="line">                    uploadJson:&apos;/util/upload/kindeditor&apos;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        &#123;&#123; msg &#125;&#125;</span><br><span class="line">        标题：&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;</span><br><span class="line">        内容：&lt;textarea id=&quot;editor_id&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>uploadJson参数为:’/util/upload/kindeditor’，该URL实现了上传文件的方法。该URL对应的视图函数，在步骤3中定义。</p>
</li>
<li><p>初始化定义富文本编辑器的对象</p>
<textarea id="editor_id" name="content"> </textarea>

</li>
</ol>
<p>步骤3：定义uploadJson实现的方法</p>
<p>a）在urls.py中定义处理上传文件的URL规则</p>
<p>在工程目录的urls.py文件中定义上传图片的配置和访问media路径的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path, include, re_path</span><br><span class="line">from django.contrib.staticfiles.urls import static</span><br><span class="line"></span><br><span class="line">from utils.upload_image import upload_image</span><br><span class="line"></span><br><span class="line"> # kindeditor编辑器上传图片地址</span><br><span class="line">re_path(r&apos;^util/upload/(?P&lt;dir_name&gt;[^/]+)$&apos;, upload_image, name=&apos;upload_image&apos;),</span><br><span class="line"></span><br><span class="line"># 配置media访问路径</span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>应用app的urls.py中定义编辑和列表的方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 编辑文章</span><br><span class="line">path(r&apos;edit_article/&apos;, views.edit_article, name=&apos;edit_article&apos;),</span><br><span class="line"># 文章列表</span><br><span class="line">path(r&apos;article/&apos;, views.article, name=&apos;article&apos;),</span><br></pre></td></tr></table></figure>
<p>b）在utils中定义upload_images文件，并定义upload_image函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">from django.conf import settings</span><br><span class="line">from django.views.decorators.csrf import csrf_exempt</span><br><span class="line">import os</span><br><span class="line">import uuid</span><br><span class="line">import json</span><br><span class="line">import datetime as dt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@csrf_exempt</span><br><span class="line">def upload_image(request, dir_name):</span><br><span class="line">    ##################</span><br><span class="line">    #  kindeditor图片上传返回数据格式说明：</span><br><span class="line">    # &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;出错信息&quot;&#125;</span><br><span class="line">    # &#123;&quot;error&quot;: 0, &quot;url&quot;: &quot;图片地址&quot;&#125;</span><br><span class="line">    ##################</span><br><span class="line">    result = &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;上传出错&quot;&#125;</span><br><span class="line">    files = request.FILES.get(&quot;imgFile&quot;, None)</span><br><span class="line">    if files:</span><br><span class="line">        result =image_upload(files, dir_name)</span><br><span class="line">    return HttpResponse(json.dumps(result), content_type=&quot;application/json&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#目录创建</span><br><span class="line">def upload_generation_dir(dir_name):</span><br><span class="line">    today = dt.datetime.today()</span><br><span class="line">    dir_name = dir_name + &apos;/%d/%d/&apos; %(today.year,today.month)</span><br><span class="line">    if not os.path.exists(settings.MEDIA_ROOT + dir_name):</span><br><span class="line">        os.makedirs(settings.MEDIA_ROOT + dir_name)</span><br><span class="line">    return dir_name</span><br><span class="line"></span><br><span class="line"># 图片上传</span><br><span class="line">def image_upload(files, dir_name):</span><br><span class="line">    #允许上传文件类型</span><br><span class="line">    allow_suffix =[&apos;jpg&apos;, &apos;png&apos;, &apos;jpeg&apos;, &apos;gif&apos;, &apos;bmp&apos;]</span><br><span class="line">    file_suffix = files.name.split(&quot;.&quot;)[-1]</span><br><span class="line">    if file_suffix not in allow_suffix:</span><br><span class="line">        return &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;图片格式不正确&quot;&#125;</span><br><span class="line">    relative_path_file = upload_generation_dir(dir_name)</span><br><span class="line">    path=os.path.join(settings.MEDIA_ROOT, relative_path_file)</span><br><span class="line">    if not os.path.exists(path): #如果目录不存在创建目录</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">    file_name=str(uuid.uuid1())+&quot;.&quot;+file_suffix</span><br><span class="line">    path_file=os.path.join(path, file_name)</span><br><span class="line">    file_url = settings.MEDIA_URL + relative_path_file + file_name</span><br><span class="line">    open(path_file, &apos;wb&apos;).write(files.file.read()) # 保存图片</span><br><span class="line">    return &#123;&quot;error&quot;: 0, &quot;url&quot;: file_url&#125;</span><br></pre></td></tr></table></figure>
<p>步骤4：实现编辑上传功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">def edit_article(request):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    文章编辑方法</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;edit.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 获取文章的标题和内容</span><br><span class="line">        title = request.POST.get(&apos;title&apos;)</span><br><span class="line">        content = request.POST.get(&apos;content&apos;)</span><br><span class="line">        # 使用all()方法进行判断，如果文章标题和内容任何一个参数没有填写，则返回错误信息</span><br><span class="line">        if not all([title, content]):</span><br><span class="line">            msg = &apos;请填写完整的参数&apos;</span><br><span class="line">            return render(request, &apos;edit.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        # 创建文章</span><br><span class="line">        Article.objects.create(title=title,</span><br><span class="line">                               content=content)</span><br><span class="line">        # 创建文章成功后，跳转到文章列表页面</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;users:article&apos;))</span><br><span class="line"></span><br><span class="line">def article(request):</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">文章展示方法</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">if request.method == &apos;GET&apos;:</span><br><span class="line">    # 获取所有的文章</span><br><span class="line">    articles = Article.objects.all()</span><br><span class="line">    return render(request, &apos;article.html&apos;, &#123;&apos;articles&apos;: articles&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-文件上传media文件中的展示"><a href="#3-文件上传media文件中的展示" class="headerlink" title="3. 文件上传media文件中的展示"></a>3. 文件上传media文件中的展示</h3><p><img src="images/django_kindeditor_mediapng.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/14/文章编辑器模板/">
    <time datetime="2019-01-14T01:10:00.000Z" class="entry-date">
        2019-01-14
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-07上传图片和分页" class="post-day-07上传图片和分页 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/09/day-07上传图片和分页/">day_07上传图片和分页</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/09/day-07上传图片和分页/" data-id="cjslphnpm000lqsvecyh3ih4u" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>settings.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, &apos;static&apos;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># 配置访问media目录</span><br><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/09/day-07上传图片和分页/">
    <time datetime="2019-01-09T09:29:53.000Z" class="entry-date">
        2019-01-09
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-05注册登录" class="post-day-05注册登录 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/08/day-05注册登录/">day_06注册登录</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/08/day-05注册登录/" data-id="cjslphns3001wqsverjmxdf3z" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>urls.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">from user import views</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;login/&apos;, views.login, name=&apos;login&apos;),</span><br><span class="line">    path(&apos;index/&apos;, views.index, name=&apos;index&apos;),</span><br><span class="line">    path(&apos;logout/&apos;, views.logout, name=&apos;logout&apos;),</span><br><span class="line">    path(&apos;register/&apos;, views.register, name=&apos;register&apos;),</span><br><span class="line">    path(&apos;my_login/&apos;,views.my_login, name=&apos;my_login&apos;),</span><br><span class="line">    path(&apos;hindex/&apos;, views.hindex, name=&apos;hindex&apos;),</span><br><span class="line">    path(&apos;my_logout/&apos;, views.my_logout, name=&apos;my_logout&apos;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>setting.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;app&apos;,</span><br><span class="line">    &apos;user&apos;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>index.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--继承base.html文件的代码--&gt;</span><br><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line">    &lt;!--引入的第一种形式--&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;../static/css/style.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--引入的第二种形式--&gt;</span><br><span class="line">    &#123;% load static %&#125;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;% static &apos;css/style.css&apos; %&#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    &#123;&#123; block.super &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;p&gt;模块内容学习&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &#123;% if name %&#125;</span><br><span class="line">        &#123;&#123; name &#125;&#125;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        name为空</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;% if a %&#125;</span><br><span class="line">        &#123;&#123; a &#125;&#125;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        a变量不存在</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;% for i in a %&#125;</span><br><span class="line">        &lt;!--&lt;p &#123;% if forloop.counter == 1 %&#125; style=&quot;font-weight:bold;&quot; &#123;% endif %&#125;&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;p &#123;% if forloop.first %&#125;style=&quot;font-weight:bold;&quot; &#123;% endif %&#125;&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;p &#123;% ifequal forloop.counter 1 %&#125; style=&quot;font-size:30px; font-weight:bolder; color:darkblue&quot; &#123;% endifequal %&#125;&gt;</span><br><span class="line">        编号：&#123;&#123; forloop.counter&#125;&#125;  成绩：&#123;&#123; i &#125;&#125;</span><br><span class="line"></span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;!--&#123;&#123; forloop.counter0 &#125;&#125; 统计当前计数 从0开始计数--&gt;</span><br><span class="line">        &lt;!--&#123;&#123; forloop.revcounter &#125;&#125; 统计当前计数 倒叙 到1结束--&gt;</span><br><span class="line">    &#123;% empty %&#125;</span><br><span class="line">        a变量为空</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    &lt;a herf=&quot;/user/logout&quot;&gt;退出&lt;/a&gt;&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!--过滤器,管道符&apos;|&apos;,safe将字符转换成标签--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; b | safe &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 大写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | upper &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 小写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;PYthon&apos; | lower &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 自动加1--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; 4 | add:&apos;1&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 自动减1--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; 4 | add:&apos;-1&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 首单词大写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;PYthon&apos; | capfirst &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 驼峰命名--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;helloworld&apos; | title &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 默认值替换--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;&apos; | default:&apos;无&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 解析第一个字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | first &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 解析最后一个字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | last &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 随机取字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | random &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>login.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;姓名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码：&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>register.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;姓名:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;确认密码:&lt;input type=&quot;text&quot; name=&quot;password2&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>models.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line"></span><br><span class="line">class User(models.Model):</span><br><span class="line">    username = models.CharField(max_length=10,unique=True)</span><br><span class="line">    password = models.CharField(max_length=150,unique=False)</span><br><span class="line">    crate_time = models.DateTimeField(auto_now_add=True)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;user&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class UserToken(models.Model):</span><br><span class="line">    user = models.ForeignKey(User, on_delete=models.CASCADE)</span><br><span class="line">    token = models.CharField(max_length=20)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;user_token&apos;</span><br></pre></td></tr></table></figure>
<p>views.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">from django.contrib.auth.hashers import make_password, check_password</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponseRedirect</span><br><span class="line">from django.urls import reverse</span><br><span class="line"></span><br><span class="line">from user.models import User, UserToken</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;login.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 获取登录提交的参数</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        user = User.objects.filter(username=username).first()</span><br><span class="line">        # 校验密码</span><br><span class="line">        if check_password(password, user.password):</span><br><span class="line">        # if username == &apos;coco&apos; and password == &apos;123123&apos;:</span><br><span class="line">            # 模拟登陆成功, 跳转到首页</span><br><span class="line">            # 设置cookie</span><br><span class="line">            res = HttpResponseRedirect(reverse(&apos;user:index&apos;))</span><br><span class="line">            s = &apos;1234567890qwertyuiopasdfghjklzxcvbnm&apos;</span><br><span class="line">            token = &apos;&apos;</span><br><span class="line">            for i in range(20):</span><br><span class="line">                token += random.choice(s)</span><br><span class="line">            res.set_cookie(&apos;token&apos;, token, max_age=30)</span><br><span class="line">            # 保存token到user_token表中</span><br><span class="line">            UserToken.objects.create(user_id=user.id, token=token)</span><br><span class="line">            return res</span><br><span class="line">        else:</span><br><span class="line">            # 模拟登陆失败</span><br><span class="line">            # return render(request, &apos;login.html&apos;)</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        # 从cookies中获取登录校验的token值</span><br><span class="line">        token = request.COOKIES.get(&apos;token&apos;)</span><br><span class="line">        # 判断token是否存在，如果不存在说明没有登录或登录失效</span><br><span class="line">        if not token:</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        user_token = UserToken.objects.filter(token=token).first()</span><br><span class="line">        # 判断user_token表中是否存在token值，如果不存在，表示用户没有登录</span><br><span class="line">        if not user_token:</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        return render(request, &apos;index.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def logout(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        res = HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        # 删除cookie中的键值对</span><br><span class="line">        res.delete_cookie(&apos;token&apos;)</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def register(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;register.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 1. 接收页面中传递的参数</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        password2 = request.POST.get(&apos;password2&apos;)</span><br><span class="line">        # 2. 实现保存用户信息到user表中</span><br><span class="line">        if User.objects.filter(username=username).exists():</span><br><span class="line">            msg = &apos;账号已存在&apos;</span><br><span class="line">            return render(request, &apos;register.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        if password != password2:</span><br><span class="line">            msg = &apos;密码不一致&apos;</span><br><span class="line">            return render(request, &apos;register.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        password = make_password(password)</span><br><span class="line">        User.objects.create(username=username, password=password)</span><br><span class="line">        # 3. 跳转到登录</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        # return render(request, &apos;login.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def my_login(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;login.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        user = User.objects.filter(username=username).first()</span><br><span class="line">        if check_password(password, user.password):</span><br><span class="line">            # 1. 向cookie中保存键值对，键为sessionid</span><br><span class="line">            # 2. 向django_session表中存sessionid值</span><br><span class="line">            # 3. 向django_session表中存储键值对&#123;‘username’: coco&#125;</span><br><span class="line">            # request.session[&apos;username&apos;] = username</span><br><span class="line">            request.session[&apos;user_id&apos;] = user.id</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:hindex&apos;))</span><br><span class="line">        else:</span><br><span class="line">            msg = &apos;账号或密码错误&apos;</span><br><span class="line">            return render(request, &apos;login.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def hindex(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        if request.session.get(&apos;user_id&apos;):</span><br><span class="line">            user_id = request.session[&apos;user_id&apos;]</span><br><span class="line">            user = User.objects.get(pk=user_id)</span><br><span class="line">            print(&apos;当前登录系统的人为:%s&apos; % user.username)</span><br><span class="line">            return render(request, &apos;index.html&apos;)</span><br><span class="line">        else:</span><br><span class="line">            return render(request, &apos;login.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def my_logout(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        # 1. 删除cookie中的sessionid值</span><br><span class="line">        # 2. 删除django_session表中的数据</span><br><span class="line">        # 3. 删除django_session中session_data中的user_id</span><br><span class="line">        # request.session.flush()</span><br><span class="line">        del request.session[&apos;user_id&apos;]</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;user:my_login&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 装饰器（闭包）</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">Django过滤器：</span><br><span class="line"></span><br><span class="line">1、add ：将value的值增加2。使用形式为：&#123;&#123; value | add: &quot;2&quot;&#125;&#125;。</span><br><span class="line"></span><br><span class="line">2、addslashes：在value中的引号前增加反斜线。使用形式为：&#123;&#123; value | addslashes &#125;&#125;。</span><br><span class="line"></span><br><span class="line">3、capfirst：value的第一个字符转化成大写形式。使用形式为：&#123;&#123; value | capfirst &#125;&#125;。</span><br><span class="line"></span><br><span class="line">4、cut：从给定value中删除所有arg的值。使用形式为：&#123;&#123; value | cut:arg&#125;&#125;。</span><br><span class="line"></span><br><span class="line">5、date: 格式化时间格式。使用形式为：&#123;&#123; value | date:&quot;Y-m-d H:i:s&quot; &#125;&#125;</span><br><span class="line"></span><br><span class="line">6、default：如果value是False，那么输出使用缺省值。使用形式：&#123;&#123; value | default: &quot;nothing&quot; &#125;&#125;。例如，如果value是“”，那么输出将是nothing</span><br><span class="line"></span><br><span class="line">7、default_if_none：如果value是None，那么输出将使用缺省值。使用形式：&#123;&#123; value | default_if_none:&quot;nothing&quot; &#125;&#125;，例如，如果value是None，那么输出将是nothing</span><br><span class="line"></span><br><span class="line">8、dictsort：如果value的值是一个字典，那么返回值是按照关键字排序的结果</span><br><span class="line"></span><br><span class="line">使用形式：&#123;&#123; value | dictsort:&quot;name&quot;&#125;&#125;，例如，</span><br><span class="line"></span><br><span class="line">如果value是：</span><br><span class="line"></span><br><span class="line">[&#123;&apos;name&apos;: &apos;python&apos;&#125;,&#123;&apos;name&apos;: &apos;java&apos;&#125;,&#123;&apos;name&apos;: &apos;c++&apos;&#125;,]</span><br><span class="line"></span><br><span class="line">那么，输出是：</span><br><span class="line"></span><br><span class="line">[&#123;&apos;name&apos;: &apos;c++&apos;&#125;,&#123;&apos;name&apos;: &apos;java&apos;&#125;,&#123;&apos;name&apos;: &apos;python&apos;&#125;, ]</span><br><span class="line"></span><br><span class="line">9、dictsortreversed：如果value的值是一个字典，那么返回值是按照关键字排序的结果的反序。使用形式：与dictsort过滤器相同。</span><br><span class="line"></span><br><span class="line">10、divisibleby：如果value能够被arg整除，那么返回值将是True。使用形式：&#123;&#123; value | divisibleby:arg&#125;&#125;，如果value是9，arg是3，那么输出将是True</span><br><span class="line"></span><br><span class="line">11、escape：替换value中的某些字符，以适应HTML格式。使用形式：&#123;&#123; value | escape&#125;&#125;。例如，&lt; 转化为 &lt;&gt; 转化为 &gt;&apos; 转化为  &apos;&quot; 转化为  &quot;</span><br><span class="line"></span><br><span class="line">13、filesizeformat：格式化value，使其成为易读的文件大小。使用形式：&#123;&#123; value | filesizeformat &#125;&#125;。例如：13KB，4.1MB等。</span><br><span class="line"></span><br><span class="line">14、first：返回列表/字符串中的第一个元素。使用形式：&#123;&#123; value | first &#125;&#125;</span><br><span class="line"></span><br><span class="line">16、iriencode：如果value中有非ASCII字符，那么将其进行转化成URL中适合的编码，如果value已经进行过URLENCODE，改操作就不会再起作用。使用形式：&#123;&#123;value | iriencode&#125;&#125;</span><br><span class="line"></span><br><span class="line">17、join：使用指定的字符串连接一个list，作用如同python的str.join(list)。使用形式：&#123;&#123; value | join:&quot;arg&quot;&#125;&#125;，如果value是[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]，arg是&apos;//&apos;那么输出是a//b//c</span><br><span class="line"></span><br><span class="line">18、last：返回列表/字符串中的最后一个元素。使用形式：&#123;&#123; value | last &#125;&#125;</span><br><span class="line"></span><br><span class="line">19、length：返回value的长度。使用形式：&#123;&#123; value | length &#125;&#125;</span><br><span class="line"></span><br><span class="line">20、length_is：如果value的长度等于arg的时候返回True。使用形式：&#123;&#123; value | length_is:&quot;arg&quot;&#125;&#125;。例如：如果value是[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]，arg是3，那么返回True</span><br><span class="line"></span><br><span class="line">21、linebreaks：value中的&quot;\n&quot;将被&lt;br/&gt;替代，并且整个value使用&lt;/p&gt;包围起来。使用形式：&#123;&#123;value|linebreaks&#125;&#125;</span><br><span class="line"></span><br><span class="line">22、linebreaksbr：value中的&quot;\n&quot;将被&lt;br/&gt;替代。使用形式：&#123;&#123;value |linebreaksbr&#125;&#125;</span><br><span class="line"></span><br><span class="line">23、linenumbers：显示的文本，带有行数。使用形式：&#123;&#123;value | linenumbers&#125;&#125;</span><br><span class="line"></span><br><span class="line">24、ljust：在一个给定宽度的字段中，左对齐显示value。使用形式：&#123;&#123;value | ljust&#125;&#125;</span><br><span class="line"></span><br><span class="line">25、center：在一个给定宽度的字段中，中心对齐显示value。使用形式：&#123;&#123;value | center&#125;&#125;</span><br><span class="line"></span><br><span class="line">26、rjust：：在一个给定宽度的字段中，右对齐显示value。使用形式：&#123;&#123;value | rjust&#125;&#125;</span><br><span class="line"></span><br><span class="line">27、lower：将一个字符串转换成小写形式。使用形式：&#123;&#123;value | lower&#125;&#125;</span><br><span class="line"></span><br><span class="line">30、random：从给定的list中返回一个任意的Item。使用形式：&#123;&#123;value | random&#125;&#125;</span><br><span class="line"></span><br><span class="line">31、removetags：删除value中tag1,tag2....的标签。使用形式：&#123;&#123;value | removetags:&quot;tag1 tag2 tag3...&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">32、safe：当系统设置autoescaping打开的时候，该过滤器使得输出不进行escape转换。使用形式：&#123;&#123;value | safe&#125;&#125;</span><br><span class="line"></span><br><span class="line">33、safeseq：与safe基本相同，但有一点不同的就是：safe是针对字符串，而safeseq是针对多个字符串组成的sequence</span><br><span class="line"></span><br><span class="line">34、slice：与python语法中的slice相同。使用形式：&#123;&#123;some_list | slice:&quot;2&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">37、striptags：删除value中的所有HTML标签.使用形式：&#123;&#123;value | striptags&#125;&#125;</span><br><span class="line"></span><br><span class="line">38、time：格式化时间输出。使用形式：&#123;&#123;value | time:&quot;H:i&quot;&#125;&#125;或者&#123;&#123;value | time&#125;&#125;</span><br><span class="line"></span><br><span class="line">39、title：转换一个字符串成为title格式。</span><br><span class="line"></span><br><span class="line">40、truncatewords：将value切成truncatewords指定的单词数目。使用形式：&#123;&#123;value | truncatewords:2&#125;&#125;。例如，如果value是Joel is a slug 那么输出将是：Joel is ...</span><br><span class="line"></span><br><span class="line">42、upper：转换一个字符串为大写形式</span><br><span class="line"></span><br><span class="line">43、urlencode：将一个字符串进行URLEncode</span><br><span class="line"></span><br><span class="line">44、wordcount：返回字符串中单词的数目</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/08/day-05注册登录/">
    <time datetime="2019-01-08T09:47:02.000Z" class="entry-date">
        2019-01-08
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-04页面渲染" class="post-day-04页面渲染 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/07/day-04页面渲染/">day-04页面渲染</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/07/day-04页面渲染/" data-id="cjslphnpa000gqsvebdzty0ls" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>1、控制台创建工程目录并且新建相应的文件</p>
<p><img src="/images/QQ截图20190107195449.png" alt=""></p>
<p><img src="/images/13.png" alt=""></p>
<p>2、修改Setting.py文件</p>
<p><img src="/images/QQ截图20190107202002.png" alt=""></p>
<p><img src="/images/QQ截图20190107202024.png" alt=""></p>
<p><img src="/images/QQ截图20190107202042.png" alt=""></p>
<p><img src="/images/QQ截图20190107202058.png" alt=""></p>
<p>3、</p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/07/day-04页面渲染/">
    <time datetime="2019-01-07T12:13:39.000Z" class="entry-date">
        2019-01-07
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-03-django数据库模型设计-1" class="day-03-django数据库模型设计-1 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/04/django数据库模型设计-1/">day-03 django数据库模型设计</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/04/django数据库模型设计-1/" data-id="cjslphnq3000xqsvey3b7pson" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line">models.py文件*******************************************</span><br><span class="line"></span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Grade(models.Model):</span><br><span class="line">    g_name = models.CharField(max_length=10, unique=True)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;grade&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student(models.Model):</span><br><span class="line">    s_name = models.CharField(max_length=10, unique=True)</span><br><span class="line">    s_age = models.IntegerField(default=20)</span><br><span class="line">    s_gender = models.BooleanField(default=0)</span><br><span class="line">    # auto_now_add=True 创建时，默认字段赋值为最新时间</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=True)</span><br><span class="line">    # auto_now=True 修改数据时，自动赋值为更新字段时 的时间</span><br><span class="line">    undate_time = models.DateTimeField(auto_now=True)</span><br><span class="line">    math = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line">    wuli = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line">    # 一对多的外键定义（定义在多的哪一方）</span><br><span class="line">    g = models.ForeignKey(Grade, null=True, related_name=&apos;stu&apos;, on_delete=models.CASCADE)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;student&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class StudentInfo(models.Model):</span><br><span class="line">    s_no = models.CharField(max_length=10, null=False)</span><br><span class="line">    phone = models.CharField(max_length=11, null=True)</span><br><span class="line">    name = models.CharField(max_length=10, null=True)</span><br><span class="line">    # 定义一对一的关联关系</span><br><span class="line">    # on_delete=models.CASCADE 默认删除主表，从表也会删除</span><br><span class="line">    # on_delete=models.PROTECT 不让删除主表，能删除从表</span><br><span class="line">    # on_delete=models.SET_NULL 删除主表，从表的关联字段设置为空（null）</span><br><span class="line"></span><br><span class="line">    stu = models.OneToOneField(Student,</span><br><span class="line">                               on_delete=models.CASCADE,</span><br><span class="line">                               null=True,</span><br><span class="line">                               related_name=&apos;info&apos;)  # related_name=&apos;info&apos;给拓展表(studentinfo)取个别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Course(models.Model):</span><br><span class="line">    c_name = models.CharField(max_length=10, unique=True)</span><br><span class="line">    # ManyToManyField字段定义在任何一个模型都可以</span><br><span class="line">    stu = models.ManyToManyField(Student, related_name=&apos;cou&apos;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;course&apos;</span><br><span class="line"></span><br><span class="line">urls.py文件***********************************************</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;admin/&apos;, admin.site.urls),</span><br><span class="line">    path(&apos;hello/&apos;, views.hello),</span><br><span class="line">    # 插入学生信息</span><br><span class="line">    # http://127.0.0.1:8000/saa_stu/</span><br><span class="line">    path(&apos;add_stu/&apos;,views.add_stu),</span><br><span class="line"></span><br><span class="line">    # 删除学生信息</span><br><span class="line">    path(&apos;del_stu/&apos;,views.del_stu),</span><br><span class="line"></span><br><span class="line">    # 更新学生信息</span><br><span class="line">    path(&apos;up_stu/&apos;,views.up_stu),</span><br><span class="line"></span><br><span class="line">    # 查询学生信息</span><br><span class="line">    path(&apos;sel_stu/&apos;,views.sel_stu),</span><br><span class="line">    # 添加学生的拓展信息</span><br><span class="line">    path(&apos;add_stu_info/&apos;,views.add_stu_info),</span><br><span class="line">    # 通过学生姓名查找紧急联系电话</span><br><span class="line">    path(&apos;sel_phone_by_stu/&apos;,views.sel_phone_by_stu),</span><br><span class="line">    path(&apos;sel_phone_by_stu2/&apos;,views.sel_phone_by_stu2),</span><br><span class="line">    # 通过=拓展表查找学生信息</span><br><span class="line">    path(&apos;sel_stu_by_info/&apos;,views.sel_stu_by_info),</span><br><span class="line">    # on_delete演示</span><br><span class="line">    path(&apos;on_delete_stu/&apos;,views.on_delete_stu),</span><br><span class="line">    # 添加班级信息</span><br><span class="line">    path(&apos;add_grade/&apos;,views.add_grade),</span><br><span class="line">    # 分配班级</span><br><span class="line">    path(&apos;stu_grade/&apos;,views.stu_grade),</span><br><span class="line">    # 通过学生查询班级</span><br><span class="line">    path(&apos;sel_grade_by_stu/&apos;,views.sel_grade_by_stu),</span><br><span class="line">    # 通过班级查询学生</span><br><span class="line">    path(&apos;sel_stu_by_grade/&apos;,views.sel_stu_by_grade),</span><br><span class="line">    # 添加课程信息</span><br><span class="line">    path(&apos;add_course/&apos;,views.add_course),</span><br><span class="line">    # 添加中间表的信息</span><br><span class="line">    path(&apos;add_s_c/&apos;,views.add_s_c),</span><br><span class="line">    # 访问首页</span><br><span class="line">    path(&apos;index/&apos;,views.index)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">views.py文件***********************************************</span><br><span class="line"># 一对一  (OneToOneField 任何一方)</span><br><span class="line">def add_stu_info(request):</span><br><span class="line">    # 添加小明的紧急联系人的信息，学号</span><br><span class="line">    stu_info = StudentInfo()</span><br><span class="line">    stu_info.s_no = &apos;123456&apos;</span><br><span class="line">    stu_info.phone = &apos;13551366543&apos;</span><br><span class="line">    stu_info.name = &apos;大明&apos;</span><br><span class="line">    # stu_info.stu = Student.objects.get(id=1)</span><br><span class="line">    stu_info.stu_id = 1</span><br><span class="line">    stu_info.save()</span><br><span class="line">    return HttpResponse(&apos;创建拓展信息成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_phone_by_stu(request):</span><br><span class="line">    # 1. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明&apos;).first()</span><br><span class="line">    # 2. 通过学生对象查询拓展表信息</span><br><span class="line">    # stu_info = StudentInfo.objects.filter(stu=stu).first()</span><br><span class="line">    stu_info = StudentInfo.objects.filter(stu_id=stu.id).first()</span><br><span class="line">    phone = stu_info.phone</span><br><span class="line">    print(phone)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_phone_by_stu2(request):</span><br><span class="line">    # 1. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明&apos;).first()</span><br><span class="line">    # 2. 反向查询。关联模型对象.关联另外一个模型的名称的小写</span><br><span class="line">    # stu_info = stu.studentinfo</span><br><span class="line">    stu_info = stu.info</span><br><span class="line">    phone = stu_info.phone</span><br><span class="line">    print(phone)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_stu_by_info(request):</span><br><span class="line">    # 1. 查询拓展表信息</span><br><span class="line">    stu_info = StudentInfo.objects.filter(s_no=&apos;123456&apos;).first()</span><br><span class="line">    # 2. 查询学生对象</span><br><span class="line">    stu = stu_info.stu</span><br><span class="line">    print(stu.s_name)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def on_delete_stu(request):</span><br><span class="line">    # 删除小明的学生信息</span><br><span class="line">    # 效果: 删除主表时，从表是否被删除</span><br><span class="line">    Student.objects.filter(s_name=&apos;小花&apos;).delete()</span><br><span class="line">    # StudentInfo.objects.filter(stu_id=4).delete()</span><br><span class="line">    return HttpResponse(&apos;删除成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 一对多 （ForeignKey 多的一方）</span><br><span class="line">def add_grade(request):</span><br><span class="line">    # 添加班级信息</span><br><span class="line">    g_names = [&apos;Python1801&apos;, &apos;Python1802&apos;, &apos;Python1803&apos;,&apos;Python1804&apos;]</span><br><span class="line">    for name in g_names:</span><br><span class="line">        Grade.objects.create(g_name=name)</span><br><span class="line">    return HttpResponse(&apos;创建班级成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def stu_grade(request):</span><br><span class="line">    # 1. 查询id=4的学生对象</span><br><span class="line">    stu = Student.objects.get(pk=4)</span><br><span class="line">    # 2. 设置学生的班级字段</span><br><span class="line">    # stu.g = Grade.objects.get(pk=1)</span><br><span class="line">    stu.g_id = 1</span><br><span class="line">    stu.save()</span><br><span class="line">    return HttpResponse(&apos;分配学生班级成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_grade_by_stu(request):</span><br><span class="line">    # 1. 查询姓名叫小明22的对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明22&apos;).first()</span><br><span class="line">    grade = stu.g</span><br><span class="line">    print(grade.g_name)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_stu_by_grade(request):</span><br><span class="line">    # 1. 查询班级python1801对象</span><br><span class="line">    grade = Grade.objects.filter(g_name=&apos;python1801&apos;).first()</span><br><span class="line">    # stus = grade.student_set.all()</span><br><span class="line">    stus = grade.stu.all()</span><br><span class="line">    print(stus)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 多对多 （ManyToManyField 任何一方）</span><br><span class="line">def add_course(request):</span><br><span class="line">    c_names = [&apos;大学英语&apos;, &apos;商务英语&apos;, &apos;线代&apos;, &apos;高数&apos;]</span><br><span class="line">    for name in c_names:</span><br><span class="line">        c = Course()</span><br><span class="line">        c.c_name = name</span><br><span class="line">        c.save()</span><br><span class="line">    return HttpResponse(&apos;创建课程成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def add_s_c(request):</span><br><span class="line">    # 将大学英语分配给小明22这个学生</span><br><span class="line">    # 1. 查询课程对象</span><br><span class="line">    cou = Course.objects.filter(c_name=&apos;大学英语&apos;).first()</span><br><span class="line">    # 2. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明22&apos;).first()</span><br><span class="line">    # 3. 加入关联关系</span><br><span class="line">    # stu.course_set.add(cou)</span><br><span class="line">    # stu.cou.add(cou)</span><br><span class="line">    # cou.stu.add(stu)</span><br><span class="line">    stu.cou.remove(cou)</span><br><span class="line"></span><br><span class="line">    return HttpResponse(&apos;添加中间表信息成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 渲染页面</span><br><span class="line">def index(request):</span><br><span class="line">    stus = Student.objects.all()</span><br><span class="line">    return render(request, &apos;index.html&apos;, &#123;&apos;a&apos;: stus&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/images/QQ截图20190104203038.png" alt=""></p>
<p><img src="/images/Djang1o.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/04/django数据库模型设计-1/">
    <time datetime="2019-01-04T12:32:19.000Z" class="entry-date">
        2019-01-04
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-数据库表的增删改查" class="post-数据库表的增删改查 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/03/数据库表的增删改查/">day-02 数据库表的增删改查</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/03/数据库表的增删改查/" data-id="cjslphnr4001hqsvejoch0cdr" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h4 id="M-模型层（models-py）"><a href="#M-模型层（models-py）" class="headerlink" title="M : 模型层（models.py）"></a>M : 模型层（models.py）</h4><p>​    : 定义模型和数据库中的表之间的关联关系</p>
<p><img src="/images/QQ截图20190103120010.png" alt=""></p>
<h4 id="urls-py-修改路由"><a href="#urls-py-修改路由" class="headerlink" title="urls.py 修改路由"></a>urls.py 修改路由</h4><p><img src="/images/QQ截图20190103115954.png" alt=""></p>
<h4 id="V-视图层-views-py-表的插入、删除、更新、查询"><a href="#V-视图层-views-py-表的插入、删除、更新、查询" class="headerlink" title="V : 视图层(views.py 表的插入、删除、更新、查询)"></a>V : 视图层(views.py 表的插入、删除、更新、查询)</h4><p>​    : 定义业务逻辑</p>
<p><img src="/images/QQ截图20190103120026.png" alt=""></p>
<h4 id="一、插入（create）"><a href="#一、插入（create）" class="headerlink" title="一、插入（create）"></a>一、插入（create）</h4><h5 id="实现插入数据"><a href="#实现插入数据" class="headerlink" title="实现插入数据"></a>实现插入数据</h5><p>def add_stu(request):</p>
<p>​        第一种方式：</p>
<p>​    Student.objects.create(s_name=’小花’)</p>
<p>​        第二种方式：    </p>
<p>​    stu = Student()</p>
<p>​    stu.s_name = ‘小花’</p>
<p>​    stu.save()</p>
<p>​    return HttpResponse(‘创建学生成功’)</p>
<h4 id="二、删除"><a href="#二、删除" class="headerlink" title="二、删除"></a>二、删除</h4><h5 id="实现删除数据"><a href="#实现删除数据" class="headerlink" title="实现删除数据"></a>实现删除数据</h5><p>a.获取删除的对象，filter(条件)</p>
<p>b.实现删除方法，delete()</p>
<p>def del_stu(request):</p>
<p>​    Student.objects.filter(id=3).delete()</p>
<p>​    return HttpResponse(‘删除学生成功’)</p>
<h4 id="三、更新"><a href="#三、更新" class="headerlink" title="三、更新"></a>三、更新</h4><h5 id="实现更新"><a href="#实现更新" class="headerlink" title="实现更新"></a>实现更新</h5><p>def up_stu(request):</p>
<p>​    a.获取更新数据，filoter(条件)</p>
<p>​    b.实现更新方法，update（s_name = ‘妲己’）</p>
<p>​        #第一种方法：</p>
<p>​    Student.objects.filter(id=2).update(s_name=’妲己’)</p>
<p>​        #第二种方法：</p>
<p>​    stu = Student.objects.filter(id=2).first()</p>
<p>​    stu.s_name = ‘妲己2’</p>
<p>​    stu.save()</p>
<p>​    return HttpResponse(‘更新学生成功’)</p>
<h4 id="四、查询"><a href="#四、查询" class="headerlink" title="四、查询"></a>四、查询</h4><pre><code># 查询学生信息

# a.查询所有的学生信息
stus = Student.objects.all()
for stu in stus:
    print(stu.s_name)

# 查询id=2的学生信息，filter()
stu = Student.objects.filter(id=2).first()
print(stu)
# get（）取唯一的一个对象
# get（条件）条件必须成立（会报错）
stu = Student.objects.get(id=2)  # 建议少用，一般使用filter（条件）
print(stu)

# b.过滤出不满足条件的信息
stus = Student.objects.filter(s_gender=1)  # 所有的男生
print(stus)
stus = Student.objects.exclude(s_gender=0)  # exclude(s_gender=0)不包含女生
print(stus)

# c.排序order_by
stus = Student.objects.order_by(&apos;id&apos;)  # 升序；降序（&apos;-id&apos;）
print(stus)

# 取出对象中的某个字段
stus = Student.objects.all().values()  # 全部的字段
print(stus)
stus = Student.objects.all().values(&apos;s_name&apos;, &apos;s_age&apos;)  # 只取名字和年龄字段
print(stus)

# =========================================================================
# 判断查询结果是否存在
a = Student.objects.filter(s_name=&apos;小张&apos;).exists()
print(a)
# 计算有多少条数据
b = Student.objects.filter(s_gender=1).count()
print(b)

# contains   - 包含、模糊查询
# 语法：字段__运算符 ： 查询包含‘小明’的所有字符的字段
stus = Student.objects.filter(s_name__contains=&apos;小明&apos;)
print(stus)

# like &apos;小%&apos; &apos;%明&apos;
# startswith  endswith ： 以“ ”字符开始；以“ ”字符结束
stus = Student.objects.filter(s_name__startswith=&apos;小&apos;)
print(stus)
stus = Student.objects.filter(s_name__endswith=&apos;明&apos;)
print(stus)

# sql where id in (1,2,3,4,5,6,7,8)
stus = Student.objects.filter(id__in=[1, 2, 3, 4])  # id字段
print(stus)
stus = Student.objects.filter(pk__in=[1, 2, 3, 4])  # pk代表主键
print(stus)

# gte gt lt lte- 大于等于;大于;小于；小于等于
stus = Student.objects.filter(s_age__gte=18, s_age__lt=20)
# 或者 stus = Student.objects.filter(s_age__gte=18).filter(s_age__lt=20)
print(stus)

# 聚合 Avg Max Sum Min Count
age_avg = Student.objects.all().aggregate(Avg(&apos;s_age&apos;))
age_sum = Student.objects.all().aggregate(Sum(&apos;s_age&apos;))
print(age_avg,age_sum)

# 查询年龄大约等于18 且 小于20
stus1 = Student.objects.filter(s_age__gte=18, s_age__lt=20)
# 查询年龄大=大于等于18 或 小于20: Q()
stus = Student.objects.filter(Q(s_age__gte=18) | Q(s_age__lt=20)) # | ：或
stus = Student.objects.filter(Q(s_age__gte=18) &amp; Q(s_age__lt=20)) # &amp; ：且  - 与stus1一样
stus = Student.objects.filter(~Q(s_age__gte=18)) # ~ ：取反
print(stus)

# 查询物理成绩大于数学成绩的学生
stus = Student.objects.all()
for stu in stus:
    if stu.wuli &gt; stu.math:
        print(stu.s_name)

stus = Student.objects.filter(wuli__gt=F(&apos;math&apos;))
print(stus)


return HttpResponse(&apos;查询所有的学生信息&apos;)
</code></pre><p><img src="/images/QQ截图20190103165706.png" alt=""></p>
<p><img src="/images/QQ截图20190103165840.png" alt=""></p>
<p><img src="/images/QQ截图20190103165909.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/03/数据库表的增删改查/">
    <time datetime="2019-01-03T03:58:30.000Z" class="entry-date">
        2019-01-03
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-01-Django" class="day-01-Django post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/02/Django/">day-01 Django</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/02/Django/" data-id="cjslphnl80000qsvevwfhk9d3" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><h2 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h2><h3 id="安装-pip-install-virtualenv"><a href="#安装-pip-install-virtualenv" class="headerlink" title="安装: pip install virtualenv"></a>安装: pip install virtualenv</h3><h3 id="使用-virtualenv-–no-site-packages-p-D-python3-python-exe-name"><a href="#使用-virtualenv-–no-site-packages-p-D-python3-python-exe-name" class="headerlink" title="使用: virtualenv –no-site-packages -p D:\python3\python.exe name"></a>使用: virtualenv –no-site-packages -p D:\python3\python.exe name</h3><ul>
<li>–no-site-packages: 表示创建的虚拟环境为纯净的环境，不安装有其他的库</li>
<li>-p: 表示虚拟环境中的python版本</li>
</ul>
<h3 id="pip使用"><a href="#pip使用" class="headerlink" title="pip使用"></a>pip使用</h3><ul>
<li>pip list: 插看安装的库</li>
<li>pip install xxx: 安装</li>
</ul>
<h3 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h3><ul>
<li>Windows: 直接执行activate命令</li>
<li>Mac/Linux/Ubuntu: 直接执行source activate命令</li>
</ul>
<h3 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h3><ul>
<li>Windows/Mac/Linux/Ubuntu: 直接执行deactivate</li>
</ul>
<h2 id="Django项目"><a href="#Django项目" class="headerlink" title="Django项目"></a>Django项目</h2><h3 id="创建-django-amdin-startproject-项目名称"><a href="#创建-django-amdin-startproject-项目名称" class="headerlink" title="创建: django-amdin startproject 项目名称"></a>创建: django-amdin startproject 项目名称</h3><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul>
<li><p>启动命令: python manage.py runserver。默认IP为127.0.0.1  默认端口为8000</p>
</li>
<li><p>修改启动端口: python manage.py runserver 端口</p>
</li>
<li><p>修改IP和端口: python manage.py runserver IP:端口</p>
</li>
<li><p>IP参数: 如果为0.0.0.0表示任何人都可以通过公网IP访问django项目</p>
</li>
<li><p>端口PORT参数: 如果端口设置为80，表示该端口可以不用写</p>
<p><img src="/images/QQ截图20190102192808.png" alt=""></p>
</li>
</ul>
<h2 id="Django模式"><a href="#Django模式" class="headerlink" title="Django模式"></a>Django模式</h2><h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><ul>
<li>模型层: 定义模型和数据库中的表之间的关联关系</li>
</ul>
<h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><ul>
<li>视图层: 定义业务逻辑</li>
</ul>
<h3 id="T"><a href="#T" class="headerlink" title="T"></a>T</h3><ul>
<li>模板: HTML页面</li>
</ul>
<h2 id="数据库准备工作"><a href="#数据库准备工作" class="headerlink" title="数据库准备工作"></a>数据库准备工作</h2><h3 id="settings-py中配置"><a href="#settings-py中配置" class="headerlink" title="settings.py中配置"></a>settings.py中配置</h3><ul>
<li><p>USER参数: 访问用户</p>
</li>
<li><p>PASSWORD参数: 密码</p>
</li>
<li><p>HOST参数: 访问数据库的地址</p>
</li>
<li><p>PORT参数: 访问数据库的端口</p>
</li>
<li><p>NAME参数: 数据库名</p>
</li>
<li><p>‘OPTIONS’:{‘isolation_level’:None}</p>
<p>​</p>
<p><img src="/images/QQ截图20190102192637.png" alt=""></p>
<p><img src="/images/QQ截图20190102192718.png" alt=""></p>
</li>
</ul>
<p><img src="/images/QQ截图20190102192747.png" alt=""></p>
<p><img src="/images/QQ截图20190102192848.png" alt=""></p>
<h3 id="安装pymysql"><a href="#安装pymysql" class="headerlink" title="安装pymysql"></a>安装pymysql</h3><ul>
<li>使用pymysql连接数据库: 因为python3没有MySQLdb驱动，无法直接连接MySQL</li>
<li>在工程目录的<strong>init</strong>.py文件中定义  pymysql.install_as_MySQLdb()</li>
</ul>
<h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><ul>
<li><p>第一次迁移: python manege.py migrate</p>
</li>
<li><p>除开第一次迁移</p>
<p><img src="/images/QQ截图20190102192907.png" alt=""></p>
<ul>
<li>生成迁移文件: python manage.py makemigrations</li>
<li>执行迁移文件: python manage.py migrate</li>
</ul>
</li>
</ul>
<h3 id="插入管理员账号"><a href="#插入管理员账号" class="headerlink" title="插入管理员账号"></a>插入管理员账号</h3><ul>
<li>python manage.py createsuperuser</li>
</ul>
<p><em>XMind: ZEN - Trial Version</em></p>
<p><img src="/images/Django.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/02/Django/">
    <time datetime="2019-01-02T08:45:00.000Z" class="entry-date">
        2019-01-02
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-06-Django安装" class="day-06-Django安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/02/Django安装/">day-o6 Django安装</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/02/Django安装/" data-id="cjslphnow000dqsvefuv9ixx8" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="day-06-Django安装"><a href="#day-06-Django安装" class="headerlink" title="day-06 Django安装"></a>day-06 Django安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"># 更新pip（报错再更新一下）</span><br><span class="line">python -m pip install -U pip</span><br><span class="line"></span><br><span class="line"># django/pymysql/缓存/djangorestframework/图形处理- 安装</span><br><span class="line">pip install django pymysql django-redis djangorestframework pillow</span><br><span class="line"># 检查依赖库冲突/查看兼容性</span><br><span class="line">pip check</span><br><span class="line"># 装的什么库及版本</span><br><span class="line">pip freeze</span><br><span class="line"># 换库的版本</span><br><span class="line">pip install django==1.11</span><br><span class="line"></span><br><span class="line"># 生成一个txt文件，显示安装依赖库的版本号</span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"># 直接生成一样的虚拟环境（与requirements.txt中的依赖库一样）</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 创建新的django项目</span><br><span class="line">django-admin startproject hellodjango .</span><br><span class="line"># 检查django是否运行</span><br><span class="line">python manage.py runserver</span><br><span class="line"></span><br><span class="line"># 直接生成一样的虚拟环境（与requirements.txt中的依赖库一样）</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 创建新的django项目</span><br><span class="line">django-admin startproject hellodjango .</span><br><span class="line"># 启动django服务(django项目的管理程序-manage.py)</span><br><span class="line">python manage.py runserver  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 界面改成中文（http://127.0.0.1:8000/）</span><br><span class="line"># 进入hellodjango/settings.py</span><br><span class="line">LANGUAGE_CODE = &apos;zh-hans&apos;</span><br><span class="line">TIME_ZONE = &apos;Asia/Chongqing&apos;</span><br><span class="line"># 数据库设置</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;NAME&apos;: &apos;hrs&apos;,</span><br><span class="line">        &apos;HOST&apos;: &apos;localhost&apos;,</span><br><span class="line">        &apos;PORT&apos;: 3306,</span><br><span class="line">        &apos;USER&apos;: &apos;root&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;: &apos;123456&apos;,</span><br><span class="line">        &apos;TIME_ZONE&apos;: &apos;Asia/Chongqing&apos;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 把pymysql当成mysqldb使用</span><br><span class="line"># 进入_init_.py文件</span><br><span class="line">import pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"># 打开mysql57服务，进入cmd/(或者右击计算机/管理/服务/手动打开mysql57服务)</span><br><span class="line">net start mysql57</span><br><span class="line"># 打开本地数据库（数据库客户端）</span><br><span class="line"># pycharm/terminal输入</span><br><span class="line">python manage.py migrate</span><br><span class="line">================================================================================================</span><br><span class="line">老师：</span><br><span class="line">1. 通过PyCharm创建Python项目 ---&gt; hellodjango</span><br><span class="line">2. 在Terminal的虚拟环境中安装依赖项 ---&gt; </span><br><span class="line">   pip install django pymysql django-redis djangorestframework pillow</span><br><span class="line">   pip check</span><br><span class="line">   pip freeze &gt; requirements.txt</span><br><span class="line">3. 创建Django项目 ---&gt; </span><br><span class="line">   django-admin startproject hellodjango .</span><br><span class="line">4. 运行项目 ---&gt;</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py runserver</span><br><span class="line">   http://localhost:8000</span><br><span class="line">   http://127.0.0.1:8000</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py runserver 0.0.0.0:80</span><br><span class="line">   http://localhost</span><br><span class="line">   http://127.0.0.1</span><br><span class="line">   ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)http://10.7.187.140</span><br><span class="line">5. 修改配置文件 ---&gt; hellodjango/![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)settings.py</span><br><span class="line">   LANGUAGE_CODE = &apos;zh-hans&apos;</span><br><span class="line">   TIME_ZONE = &apos;Asia/Chongqing&apos;</span><br><span class="line">   DATABASES = &#123;</span><br><span class="line">   &apos;default&apos;: &#123;</span><br><span class="line">   	&apos;BACKEND&apos;: &apos;....mysql&apos;,</span><br><span class="line">   	&apos;NAME&apos;: &apos;&apos;</span><br><span class="line">   	&apos;HOST&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;PORT&apos;: 3306,</span><br><span class="line">   	&apos;USER&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;PASSWORD&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;TIME_ZONE&apos;: &apos;Asia/Chongqing&apos;,</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line">6. 修改init.py文件</span><br><span class="line">   import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"></span><br><span class="line">1. 生成Django自带的数据表</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py migrate</span><br><span class="line">2. 创建后台管理员账号</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py createsuperuser</span><br><span class="line"></span><br><span class="line">Unix - BSD - FreeBSD - Macintosh - macOS - iOS</span><br><span class="line"></span><br><span class="line">Unix - MINIX - Linux - Android</span><br><span class="line"></span><br><span class="line">Unix - AIX / HP-UX / Solaris</span><br><span class="line"></span><br><span class="line">Django / Flask / Tornado</span><br></pre></td></tr></table></figure>
<h4 id="复习："><a href="#复习：" class="headerlink" title="复习："></a>复习：</h4><p>Web前端：<br>HTML标签 - 承载内容 - content<br>CSS - 渲染页面 - display </p>
<ul>
<li><p>选择器</p>
</li>
<li><p>通配符选择器</p>
</li>
<li><p>标签选择器</p>
</li>
<li><p>类选择器</p>
</li>
<li><p>ID选择器</p>
</li>
<li><p>属性选择器</p>
</li>
<li><p>后代选择器 / 父子选择器</p>
</li>
<li><p>兄弟选择器 / 相邻兄弟选择器</p>
</li>
<li><p>伪类 / 伪元素</p>
</li>
<li><p>就近原则/具体性原则/重要性原则</p>
</li>
<li><p>盒子模型（内容-padding-border-背景图-背景色-margin）</p>
</li>
<li><p>常用样式属性和常用属性值<br>JavaScript - 交互行为 - behavior</p>
</li>
<li><p>语法规范 - ECMAScript</p>
</li>
<li><p>BOM - 浏览器对象模型 - window</p>
</li>
<li><p>DOM - 文档对象模型 - document</p>
</li>
<li><p>getElementById() / getElementsByTagName() / getElementsByClassName() / querySelector() / querySelectorAll()</p>
</li>
<li><p>createElement() / appendChild() / insertBefore()</p>
</li>
<li><p>removeChild()</p>
</li>
<li><p>innerHTML / textContent / className / style</p>
</li>
<li><p>parentNode / children / prevSibling / nextSibling</p>
</li>
<li><p>addEventListener / removeEventListener</p>
</li>
<li><p>jQuery —&gt; window.$ / window.jQuery </p>
</li>
<li><p>$(‘样式表选择器’)：获取页面元素返回jQuery对象</p>
</li>
<li><p>$(‘&lt;标签&gt;’)：创建新元素得到jQuery对象</p>
</li>
<li><p>$(原生JavaScript对象)：将原生JS对象转成jQuery对象</p>
</li>
<li><p>$(function() {})：绑定页面加载完成之后要执行的回调函数</p>
<p>​</p>
<h5 id="Linux文件操作命令："><a href="#Linux文件操作命令：" class="headerlink" title="Linux文件操作命令："></a>Linux文件操作命令：</h5><ul>
<li>pwd - print working directory</li>
<li>cd - change directory</li>
<li>ls - list directory contents<br>-a - all<br> -l - long<br> -R - recursive</li>
<li>mkdir - make directory</li>
<li>rmdir - remove empty directory</li>
<li>touch</li>
<li>cp - copy</li>
<li>rm - remove</li>
<li>mv - move</li>
<li>less / more / head / tail</li>
<li>cat - concatenate</li>
<li>uniq / sort / cut / wc / diff</li>
<li>find / grep</li>
<li>ps -ef / ps -aux</li>
<li>netstat -nap</li>
<li>ifconfig / ip</li>
<li>top / sar</li>
<li>scp / sftp / ssh</li>
</ul>
<p>Linux安装软件和配置服务：</p>
<ol>
<li>包管理工具 - yum / rpm / apt / deb</li>
<li>源代码构建安装</li>
</ol>
<ul>
<li>wget</li>
<li>gunzip / xz -d</li>
<li>tar -xvf</li>
<li>make &amp;&amp; make install</li>
<li>ln -s 源 目标</li>
</ul>
<p>systemctl </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- start / stop / restart / status / enable / disable</span><br></pre></td></tr></table></figure>
<p>service</p>
<p>firewalld / iptables - 防火墙</p>
<p>使用vim</p>
<p>命令模式 –i/a–&gt; 插入模式（编辑模式） –Esc–&gt; 命令模式<br>命令模式 –:?/–&gt; 末行模式 –Enter–&gt; 命令模式</p>
<p>Ctrl+e / Ctrl+y - 滚动一行<br>Ctrl+f / Ctrl+b - 滚动一页<br>gg - 到首行<br>G - 到末行<br>100G - 到100行<br>hjkl - 左下上右移动光标<br>$ - 光标到行尾<br>0 - 光标到行首<br>dd / dw / d0 / d$ - 删除<br>yy / p - 复制 / 黏贴<br>u / Ctrl+r - 撤销 / 恢复<br>ZZ / :wq - 保存退出 - ! - 强制操作</p>
<p>/搜索内容（正则） - 查找 - n / N - 向下/上搜索<br>?搜索内容（正则） - 查找<br>:1,$s/搜索的内容（正则）/替换后的内容/ice - 查找替换</p>
<p>版本比较 - vim -d 文件1 文件2<br>多文件查看 - vim 文件1 文件2 文件3<br>:ls - 查看文件<br>:b - 切换文件<br>:sp / :vs - 拆分窗口<br>Ctrl+w Ctrl+w - 切换窗口</p>
<p>配置vim —&gt; ~/.vimrc<br>set nu<br>set ts=4<br>set expandtab<br>set autoindent<br>set nohls<br>syntax on<br>set ruler </p>
</li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/02/Django安装/">
    <time datetime="2019-01-02T00:47:05.000Z" class="entry-date">
        2019-01-02
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
  
    <nav id="pagination">
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
      </nav>
    </nav>
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s">
        <input type="submit" id="searchsubmit" value="搜索">
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/02/26/pymango/">pymango</a>
          </li>
        
          <li>
            <a href="/2019/02/26/mangoDB/">mangoDB</a>
          </li>
        
          <li>
            <a href="/2019/02/25/注意重点/">注意重点</a>
          </li>
        
          <li>
            <a href="/2019/02/21/linux系统MySql操作/">linux系统MySql操作</a>
          </li>
        
          <li>
            <a href="/2019/02/19/linux中msql操作/">linux中msql操作</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux学习/">Linux学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask框架/">flask框架</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/Linux学习/" style="font-size: 12.5px;">Linux学习</a> <a href="/tags/flask框架/" style="font-size: 12.5px;">flask框架</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/数据库/" style="font-size: 17.5px;">数据库</a> <a href="/tags/框架/" style="font-size: 20px;">框架</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 John Doe
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>