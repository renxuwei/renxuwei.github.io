<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  

  
  
  
  
  
  
  <title>Ren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Ren">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Ren">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ren">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Ren" rel="home">Ren</a>
      </h1>
      
        <h2 class="site-description hitokoto"></h2>
        <script type="text/javascript" src="https://v1.hitokoto.cn/?encode=js"></script>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-文章编辑器模板" class="post-文章编辑器模板 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/14/文章编辑器模板/">文章编辑器模板</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/14/文章编辑器模板/" data-id="cjsk5t4oo001bx4vej984cnhg" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>登录注册注销首页文章编辑展示的路由:</p>
<p><img src="images/QQ图片20190114090018.jpg" alt=""></p>
<p>登录状态校验中间件:</p>
<p><img src="images/QQ图片20190114090034.png" alt=""></p>
<p>日志中间件：</p>
<p><img src="images/QQ图片20190114090042.png" alt=""></p>
<p>模板文件:</p>
<p><img src="images/QQ图片20190114090048.png" alt=""></p>
<h1 id="django项目对接富文本编辑器kindeditor的使用"><a href="#django项目对接富文本编辑器kindeditor的使用" class="headerlink" title="django项目对接富文本编辑器kindeditor的使用"></a>django项目对接富文本编辑器kindeditor的使用</h1><blockquote>
<p>Auth: 王海飞</p>
<p>Data：2018-09-07</p>
<p>Email：<a href="mailto:779598160@qq.com" target="_blank" rel="noopener">779598160@qq.com</a></p>
<p>github：<a href="https://github.com/coco369/knowledge" target="_blank" rel="noopener">https://github.com/coco369/knowledge</a></p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Django中经常使用富文本编辑来编辑文本内容。富文本编辑器有很多可以选择，比如baiduEditor，tinymce，kindeditor等等。在此我选择使用kindeditor富文本编辑器，KindEditor 使用 JavaScript 编写，可以无缝地与 Java、.NET、PHP、ASP 等程序集成，很适合做网站的文本编辑器来使用。</p>
<h3 id="1-kindeditor下载与配置"><a href="#1-kindeditor下载与配置" class="headerlink" title="1. kindeditor下载与配置"></a>1. kindeditor下载与配置</h3><p>下载 KindEditor 最新版本，下载之后打开 examples/index.html 就可以看到演示。</p>
<p>步骤1： 下载<a href="http://www.kindsoft.net/down.php" target="_blank" rel="noopener">传送门地址</a></p>
<p>步骤2： 将下载的kindeditor解压，并删除无用的asp、jsp、php等配置文件夹。</p>
<p>步骤3： 将kindeditor文件夹拷贝放在static中</p>
<p>如：</p>
<p><img src="images/django_kindeditor.png" alt="图"></p>
<h3 id="2-Django中配置"><a href="#2-Django中配置" class="headerlink" title="2. Django中配置"></a>2. Django中配置</h3><p>要使用kindeditor富文本编辑器需要在settings.py文件中配置静态static解析路径，以及media文件解析路径。并且在页面中进行相关js的加载，和上传路径的指定等。</p>
<h4 id="2-1-在settings-py中配置如下参数："><a href="#2-1-在settings-py中配置如下参数：" class="headerlink" title="2.1 在settings.py中配置如下参数："></a>2.1 在settings.py中配置如下参数：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line"># 配置static的路径</span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, &apos;static&apos;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line"># 配置media的路径</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框"><a href="#2-2-页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框" class="headerlink" title="2.2 页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框"></a>2.2 页面中加载富文本编辑器，引入js，定义uploadJson上传地址，实例化富文本输入框</h4><p>步骤1：引入js, 定义上传图片等文件的地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;</span><br><span class="line">    文章编辑页面</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block Js %&#125;</span><br><span class="line">    &#123;% load static %&#125;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;&#123;% static &apos;kindeditor/kindeditor-all.js&apos; %&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;&#123;% static &apos;kindeditor/lang/zh-CN.js&apos; %&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        KindEditor.ready(function(K) &#123;</span><br><span class="line">                window.editor = K.create(&apos;#editor_id&apos;,&#123;</span><br><span class="line">                    uploadJson:&apos;/util/upload/kindeditor&apos;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        &#123;&#123; msg &#125;&#125;</span><br><span class="line">        标题：&lt;input type=&quot;text&quot; name=&quot;title&quot;&gt;</span><br><span class="line">        内容：&lt;textarea id=&quot;editor_id&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>uploadJson参数为:’/util/upload/kindeditor’，该URL实现了上传文件的方法。该URL对应的视图函数，在步骤3中定义。</p>
</li>
<li><p>初始化定义富文本编辑器的对象</p>
<textarea id="editor_id" name="content"> </textarea>

</li>
</ol>
<p>步骤3：定义uploadJson实现的方法</p>
<p>a）在urls.py中定义处理上传文件的URL规则</p>
<p>在工程目录的urls.py文件中定义上传图片的配置和访问media路径的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path, include, re_path</span><br><span class="line">from django.contrib.staticfiles.urls import static</span><br><span class="line"></span><br><span class="line">from utils.upload_image import upload_image</span><br><span class="line"></span><br><span class="line"> # kindeditor编辑器上传图片地址</span><br><span class="line">re_path(r&apos;^util/upload/(?P&lt;dir_name&gt;[^/]+)$&apos;, upload_image, name=&apos;upload_image&apos;),</span><br><span class="line"></span><br><span class="line"># 配置media访问路径</span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>应用app的urls.py中定义编辑和列表的方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 编辑文章</span><br><span class="line">path(r&apos;edit_article/&apos;, views.edit_article, name=&apos;edit_article&apos;),</span><br><span class="line"># 文章列表</span><br><span class="line">path(r&apos;article/&apos;, views.article, name=&apos;article&apos;),</span><br></pre></td></tr></table></figure>
<p>b）在utils中定义upload_images文件，并定义upload_image函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">from django.conf import settings</span><br><span class="line">from django.views.decorators.csrf import csrf_exempt</span><br><span class="line">import os</span><br><span class="line">import uuid</span><br><span class="line">import json</span><br><span class="line">import datetime as dt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@csrf_exempt</span><br><span class="line">def upload_image(request, dir_name):</span><br><span class="line">    ##################</span><br><span class="line">    #  kindeditor图片上传返回数据格式说明：</span><br><span class="line">    # &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;出错信息&quot;&#125;</span><br><span class="line">    # &#123;&quot;error&quot;: 0, &quot;url&quot;: &quot;图片地址&quot;&#125;</span><br><span class="line">    ##################</span><br><span class="line">    result = &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;上传出错&quot;&#125;</span><br><span class="line">    files = request.FILES.get(&quot;imgFile&quot;, None)</span><br><span class="line">    if files:</span><br><span class="line">        result =image_upload(files, dir_name)</span><br><span class="line">    return HttpResponse(json.dumps(result), content_type=&quot;application/json&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#目录创建</span><br><span class="line">def upload_generation_dir(dir_name):</span><br><span class="line">    today = dt.datetime.today()</span><br><span class="line">    dir_name = dir_name + &apos;/%d/%d/&apos; %(today.year,today.month)</span><br><span class="line">    if not os.path.exists(settings.MEDIA_ROOT + dir_name):</span><br><span class="line">        os.makedirs(settings.MEDIA_ROOT + dir_name)</span><br><span class="line">    return dir_name</span><br><span class="line"></span><br><span class="line"># 图片上传</span><br><span class="line">def image_upload(files, dir_name):</span><br><span class="line">    #允许上传文件类型</span><br><span class="line">    allow_suffix =[&apos;jpg&apos;, &apos;png&apos;, &apos;jpeg&apos;, &apos;gif&apos;, &apos;bmp&apos;]</span><br><span class="line">    file_suffix = files.name.split(&quot;.&quot;)[-1]</span><br><span class="line">    if file_suffix not in allow_suffix:</span><br><span class="line">        return &#123;&quot;error&quot;: 1, &quot;message&quot;: &quot;图片格式不正确&quot;&#125;</span><br><span class="line">    relative_path_file = upload_generation_dir(dir_name)</span><br><span class="line">    path=os.path.join(settings.MEDIA_ROOT, relative_path_file)</span><br><span class="line">    if not os.path.exists(path): #如果目录不存在创建目录</span><br><span class="line">        os.makedirs(path)</span><br><span class="line">    file_name=str(uuid.uuid1())+&quot;.&quot;+file_suffix</span><br><span class="line">    path_file=os.path.join(path, file_name)</span><br><span class="line">    file_url = settings.MEDIA_URL + relative_path_file + file_name</span><br><span class="line">    open(path_file, &apos;wb&apos;).write(files.file.read()) # 保存图片</span><br><span class="line">    return &#123;&quot;error&quot;: 0, &quot;url&quot;: file_url&#125;</span><br></pre></td></tr></table></figure>
<p>步骤4：实现编辑上传功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">def edit_article(request):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    文章编辑方法</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;edit.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 获取文章的标题和内容</span><br><span class="line">        title = request.POST.get(&apos;title&apos;)</span><br><span class="line">        content = request.POST.get(&apos;content&apos;)</span><br><span class="line">        # 使用all()方法进行判断，如果文章标题和内容任何一个参数没有填写，则返回错误信息</span><br><span class="line">        if not all([title, content]):</span><br><span class="line">            msg = &apos;请填写完整的参数&apos;</span><br><span class="line">            return render(request, &apos;edit.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        # 创建文章</span><br><span class="line">        Article.objects.create(title=title,</span><br><span class="line">                               content=content)</span><br><span class="line">        # 创建文章成功后，跳转到文章列表页面</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;users:article&apos;))</span><br><span class="line"></span><br><span class="line">def article(request):</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">文章展示方法</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">if request.method == &apos;GET&apos;:</span><br><span class="line">    # 获取所有的文章</span><br><span class="line">    articles = Article.objects.all()</span><br><span class="line">    return render(request, &apos;article.html&apos;, &#123;&apos;articles&apos;: articles&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-文件上传media文件中的展示"><a href="#3-文件上传media文件中的展示" class="headerlink" title="3. 文件上传media文件中的展示"></a>3. 文件上传media文件中的展示</h3><p><img src="images/django_kindeditor_mediapng.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/14/文章编辑器模板/">
    <time datetime="2019-01-14T01:10:00.000Z" class="entry-date">
        2019-01-14
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-07上传图片和分页" class="post-day-07上传图片和分页 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/09/day-07上传图片和分页/">day_07上传图片和分页</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/09/day-07上传图片和分页/" data-id="cjsk5t4nm000ox4ve9fwxmzeh" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>settings.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &apos;/static/&apos;</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">STATICFILES_DIRS = [</span><br><span class="line">    os.path.join(BASE_DIR, &apos;static&apos;)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># 配置访问media目录</span><br><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/09/day-07上传图片和分页/">
    <time datetime="2019-01-09T09:29:53.000Z" class="entry-date">
        2019-01-09
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-05注册登录" class="post-day-05注册登录 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/08/day-05注册登录/">day_06注册登录</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/08/day-05注册登录/" data-id="cjsk5t4pb001ox4ve81gnmfc6" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>urls.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">from user import views</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;login/&apos;, views.login, name=&apos;login&apos;),</span><br><span class="line">    path(&apos;index/&apos;, views.index, name=&apos;index&apos;),</span><br><span class="line">    path(&apos;logout/&apos;, views.logout, name=&apos;logout&apos;),</span><br><span class="line">    path(&apos;register/&apos;, views.register, name=&apos;register&apos;),</span><br><span class="line">    path(&apos;my_login/&apos;,views.my_login, name=&apos;my_login&apos;),</span><br><span class="line">    path(&apos;hindex/&apos;, views.hindex, name=&apos;hindex&apos;),</span><br><span class="line">    path(&apos;my_logout/&apos;, views.my_logout, name=&apos;my_logout&apos;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>setting.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;app&apos;,</span><br><span class="line">    &apos;user&apos;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>index.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--继承base.html文件的代码--&gt;</span><br><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;</span><br><span class="line">    &lt;!--引入的第一种形式--&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;../static/css/style.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--引入的第二种形式--&gt;</span><br><span class="line">    &#123;% load static %&#125;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;% static &apos;css/style.css&apos; %&#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block js %&#125;</span><br><span class="line">    &#123;&#123; block.super &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;p&gt;模块内容学习&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; name &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &#123;% if name %&#125;</span><br><span class="line">        &#123;&#123; name &#125;&#125;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        name为空</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;% if a %&#125;</span><br><span class="line">        &#123;&#123; a &#125;&#125;</span><br><span class="line">    &#123;% else %&#125;</span><br><span class="line">        a变量不存在</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &#123;% for i in a %&#125;</span><br><span class="line">        &lt;!--&lt;p &#123;% if forloop.counter == 1 %&#125; style=&quot;font-weight:bold;&quot; &#123;% endif %&#125;&gt;--&gt;</span><br><span class="line">        &lt;!--&lt;p &#123;% if forloop.first %&#125;style=&quot;font-weight:bold;&quot; &#123;% endif %&#125;&gt;--&gt;</span><br><span class="line"></span><br><span class="line">        &lt;p &#123;% ifequal forloop.counter 1 %&#125; style=&quot;font-size:30px; font-weight:bolder; color:darkblue&quot; &#123;% endifequal %&#125;&gt;</span><br><span class="line">        编号：&#123;&#123; forloop.counter&#125;&#125;  成绩：&#123;&#123; i &#125;&#125;</span><br><span class="line"></span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;!--&#123;&#123; forloop.counter0 &#125;&#125; 统计当前计数 从0开始计数--&gt;</span><br><span class="line">        &lt;!--&#123;&#123; forloop.revcounter &#125;&#125; 统计当前计数 倒叙 到1结束--&gt;</span><br><span class="line">    &#123;% empty %&#125;</span><br><span class="line">        a变量为空</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    &lt;a herf=&quot;/user/logout&quot;&gt;退出&lt;/a&gt;&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;!--过滤器,管道符&apos;|&apos;,safe将字符转换成标签--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; b | safe &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 大写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | upper &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 小写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;PYthon&apos; | lower &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 自动加1--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; 4 | add:&apos;1&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 自动减1--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; 4 | add:&apos;-1&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 首单词大写--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;PYthon&apos; | capfirst &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 驼峰命名--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;helloworld&apos; | title &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 默认值替换--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;&apos; | default:&apos;无&apos; &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 解析第一个字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | first &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 解析最后一个字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | last &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!--解析 随机取字符--&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; &apos;python&apos; | random &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;br&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>login.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;姓名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码：&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>register.html文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &apos;base_main.html&apos; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    &lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;姓名:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;确认密码:&lt;input type=&quot;text&quot; name=&quot;password2&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<p>models.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line"></span><br><span class="line">class User(models.Model):</span><br><span class="line">    username = models.CharField(max_length=10,unique=True)</span><br><span class="line">    password = models.CharField(max_length=150,unique=False)</span><br><span class="line">    crate_time = models.DateTimeField(auto_now_add=True)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;user&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class UserToken(models.Model):</span><br><span class="line">    user = models.ForeignKey(User, on_delete=models.CASCADE)</span><br><span class="line">    token = models.CharField(max_length=20)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;user_token&apos;</span><br></pre></td></tr></table></figure>
<p>views.py文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line">from django.contrib.auth.hashers import make_password, check_password</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponseRedirect</span><br><span class="line">from django.urls import reverse</span><br><span class="line"></span><br><span class="line">from user.models import User, UserToken</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;login.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 获取登录提交的参数</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        user = User.objects.filter(username=username).first()</span><br><span class="line">        # 校验密码</span><br><span class="line">        if check_password(password, user.password):</span><br><span class="line">        # if username == &apos;coco&apos; and password == &apos;123123&apos;:</span><br><span class="line">            # 模拟登陆成功, 跳转到首页</span><br><span class="line">            # 设置cookie</span><br><span class="line">            res = HttpResponseRedirect(reverse(&apos;user:index&apos;))</span><br><span class="line">            s = &apos;1234567890qwertyuiopasdfghjklzxcvbnm&apos;</span><br><span class="line">            token = &apos;&apos;</span><br><span class="line">            for i in range(20):</span><br><span class="line">                token += random.choice(s)</span><br><span class="line">            res.set_cookie(&apos;token&apos;, token, max_age=30)</span><br><span class="line">            # 保存token到user_token表中</span><br><span class="line">            UserToken.objects.create(user_id=user.id, token=token)</span><br><span class="line">            return res</span><br><span class="line">        else:</span><br><span class="line">            # 模拟登陆失败</span><br><span class="line">            # return render(request, &apos;login.html&apos;)</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        # 从cookies中获取登录校验的token值</span><br><span class="line">        token = request.COOKIES.get(&apos;token&apos;)</span><br><span class="line">        # 判断token是否存在，如果不存在说明没有登录或登录失效</span><br><span class="line">        if not token:</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        user_token = UserToken.objects.filter(token=token).first()</span><br><span class="line">        # 判断user_token表中是否存在token值，如果不存在，表示用户没有登录</span><br><span class="line">        if not user_token:</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        return render(request, &apos;index.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def logout(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        res = HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        # 删除cookie中的键值对</span><br><span class="line">        res.delete_cookie(&apos;token&apos;)</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def register(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;register.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        # 1. 接收页面中传递的参数</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        password2 = request.POST.get(&apos;password2&apos;)</span><br><span class="line">        # 2. 实现保存用户信息到user表中</span><br><span class="line">        if User.objects.filter(username=username).exists():</span><br><span class="line">            msg = &apos;账号已存在&apos;</span><br><span class="line">            return render(request, &apos;register.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        if password != password2:</span><br><span class="line">            msg = &apos;密码不一致&apos;</span><br><span class="line">            return render(request, &apos;register.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line">        password = make_password(password)</span><br><span class="line">        User.objects.create(username=username, password=password)</span><br><span class="line">        # 3. 跳转到登录</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;user:login&apos;))</span><br><span class="line">        # return render(request, &apos;login.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def my_login(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return render(request, &apos;login.html&apos;)</span><br><span class="line">    if request.method == &apos;POST&apos;:</span><br><span class="line">        username = request.POST.get(&apos;username&apos;)</span><br><span class="line">        password = request.POST.get(&apos;password&apos;)</span><br><span class="line">        user = User.objects.filter(username=username).first()</span><br><span class="line">        if check_password(password, user.password):</span><br><span class="line">            # 1. 向cookie中保存键值对，键为sessionid</span><br><span class="line">            # 2. 向django_session表中存sessionid值</span><br><span class="line">            # 3. 向django_session表中存储键值对&#123;‘username’: coco&#125;</span><br><span class="line">            # request.session[&apos;username&apos;] = username</span><br><span class="line">            request.session[&apos;user_id&apos;] = user.id</span><br><span class="line">            return HttpResponseRedirect(reverse(&apos;user:hindex&apos;))</span><br><span class="line">        else:</span><br><span class="line">            msg = &apos;账号或密码错误&apos;</span><br><span class="line">            return render(request, &apos;login.html&apos;, &#123;&apos;msg&apos;: msg&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def hindex(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        if request.session.get(&apos;user_id&apos;):</span><br><span class="line">            user_id = request.session[&apos;user_id&apos;]</span><br><span class="line">            user = User.objects.get(pk=user_id)</span><br><span class="line">            print(&apos;当前登录系统的人为:%s&apos; % user.username)</span><br><span class="line">            return render(request, &apos;index.html&apos;)</span><br><span class="line">        else:</span><br><span class="line">            return render(request, &apos;login.html&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def my_logout(request):</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        # 1. 删除cookie中的sessionid值</span><br><span class="line">        # 2. 删除django_session表中的数据</span><br><span class="line">        # 3. 删除django_session中session_data中的user_id</span><br><span class="line">        # request.session.flush()</span><br><span class="line">        del request.session[&apos;user_id&apos;]</span><br><span class="line">        return HttpResponseRedirect(reverse(&apos;user:my_login&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 装饰器（闭包）</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">Django过滤器：</span><br><span class="line"></span><br><span class="line">1、add ：将value的值增加2。使用形式为：&#123;&#123; value | add: &quot;2&quot;&#125;&#125;。</span><br><span class="line"></span><br><span class="line">2、addslashes：在value中的引号前增加反斜线。使用形式为：&#123;&#123; value | addslashes &#125;&#125;。</span><br><span class="line"></span><br><span class="line">3、capfirst：value的第一个字符转化成大写形式。使用形式为：&#123;&#123; value | capfirst &#125;&#125;。</span><br><span class="line"></span><br><span class="line">4、cut：从给定value中删除所有arg的值。使用形式为：&#123;&#123; value | cut:arg&#125;&#125;。</span><br><span class="line"></span><br><span class="line">5、date: 格式化时间格式。使用形式为：&#123;&#123; value | date:&quot;Y-m-d H:i:s&quot; &#125;&#125;</span><br><span class="line"></span><br><span class="line">6、default：如果value是False，那么输出使用缺省值。使用形式：&#123;&#123; value | default: &quot;nothing&quot; &#125;&#125;。例如，如果value是“”，那么输出将是nothing</span><br><span class="line"></span><br><span class="line">7、default_if_none：如果value是None，那么输出将使用缺省值。使用形式：&#123;&#123; value | default_if_none:&quot;nothing&quot; &#125;&#125;，例如，如果value是None，那么输出将是nothing</span><br><span class="line"></span><br><span class="line">8、dictsort：如果value的值是一个字典，那么返回值是按照关键字排序的结果</span><br><span class="line"></span><br><span class="line">使用形式：&#123;&#123; value | dictsort:&quot;name&quot;&#125;&#125;，例如，</span><br><span class="line"></span><br><span class="line">如果value是：</span><br><span class="line"></span><br><span class="line">[&#123;&apos;name&apos;: &apos;python&apos;&#125;,&#123;&apos;name&apos;: &apos;java&apos;&#125;,&#123;&apos;name&apos;: &apos;c++&apos;&#125;,]</span><br><span class="line"></span><br><span class="line">那么，输出是：</span><br><span class="line"></span><br><span class="line">[&#123;&apos;name&apos;: &apos;c++&apos;&#125;,&#123;&apos;name&apos;: &apos;java&apos;&#125;,&#123;&apos;name&apos;: &apos;python&apos;&#125;, ]</span><br><span class="line"></span><br><span class="line">9、dictsortreversed：如果value的值是一个字典，那么返回值是按照关键字排序的结果的反序。使用形式：与dictsort过滤器相同。</span><br><span class="line"></span><br><span class="line">10、divisibleby：如果value能够被arg整除，那么返回值将是True。使用形式：&#123;&#123; value | divisibleby:arg&#125;&#125;，如果value是9，arg是3，那么输出将是True</span><br><span class="line"></span><br><span class="line">11、escape：替换value中的某些字符，以适应HTML格式。使用形式：&#123;&#123; value | escape&#125;&#125;。例如，&lt; 转化为 &lt;&gt; 转化为 &gt;&apos; 转化为  &apos;&quot; 转化为  &quot;</span><br><span class="line"></span><br><span class="line">13、filesizeformat：格式化value，使其成为易读的文件大小。使用形式：&#123;&#123; value | filesizeformat &#125;&#125;。例如：13KB，4.1MB等。</span><br><span class="line"></span><br><span class="line">14、first：返回列表/字符串中的第一个元素。使用形式：&#123;&#123; value | first &#125;&#125;</span><br><span class="line"></span><br><span class="line">16、iriencode：如果value中有非ASCII字符，那么将其进行转化成URL中适合的编码，如果value已经进行过URLENCODE，改操作就不会再起作用。使用形式：&#123;&#123;value | iriencode&#125;&#125;</span><br><span class="line"></span><br><span class="line">17、join：使用指定的字符串连接一个list，作用如同python的str.join(list)。使用形式：&#123;&#123; value | join:&quot;arg&quot;&#125;&#125;，如果value是[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]，arg是&apos;//&apos;那么输出是a//b//c</span><br><span class="line"></span><br><span class="line">18、last：返回列表/字符串中的最后一个元素。使用形式：&#123;&#123; value | last &#125;&#125;</span><br><span class="line"></span><br><span class="line">19、length：返回value的长度。使用形式：&#123;&#123; value | length &#125;&#125;</span><br><span class="line"></span><br><span class="line">20、length_is：如果value的长度等于arg的时候返回True。使用形式：&#123;&#123; value | length_is:&quot;arg&quot;&#125;&#125;。例如：如果value是[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]，arg是3，那么返回True</span><br><span class="line"></span><br><span class="line">21、linebreaks：value中的&quot;\n&quot;将被&lt;br/&gt;替代，并且整个value使用&lt;/p&gt;包围起来。使用形式：&#123;&#123;value|linebreaks&#125;&#125;</span><br><span class="line"></span><br><span class="line">22、linebreaksbr：value中的&quot;\n&quot;将被&lt;br/&gt;替代。使用形式：&#123;&#123;value |linebreaksbr&#125;&#125;</span><br><span class="line"></span><br><span class="line">23、linenumbers：显示的文本，带有行数。使用形式：&#123;&#123;value | linenumbers&#125;&#125;</span><br><span class="line"></span><br><span class="line">24、ljust：在一个给定宽度的字段中，左对齐显示value。使用形式：&#123;&#123;value | ljust&#125;&#125;</span><br><span class="line"></span><br><span class="line">25、center：在一个给定宽度的字段中，中心对齐显示value。使用形式：&#123;&#123;value | center&#125;&#125;</span><br><span class="line"></span><br><span class="line">26、rjust：：在一个给定宽度的字段中，右对齐显示value。使用形式：&#123;&#123;value | rjust&#125;&#125;</span><br><span class="line"></span><br><span class="line">27、lower：将一个字符串转换成小写形式。使用形式：&#123;&#123;value | lower&#125;&#125;</span><br><span class="line"></span><br><span class="line">30、random：从给定的list中返回一个任意的Item。使用形式：&#123;&#123;value | random&#125;&#125;</span><br><span class="line"></span><br><span class="line">31、removetags：删除value中tag1,tag2....的标签。使用形式：&#123;&#123;value | removetags:&quot;tag1 tag2 tag3...&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">32、safe：当系统设置autoescaping打开的时候，该过滤器使得输出不进行escape转换。使用形式：&#123;&#123;value | safe&#125;&#125;</span><br><span class="line"></span><br><span class="line">33、safeseq：与safe基本相同，但有一点不同的就是：safe是针对字符串，而safeseq是针对多个字符串组成的sequence</span><br><span class="line"></span><br><span class="line">34、slice：与python语法中的slice相同。使用形式：&#123;&#123;some_list | slice:&quot;2&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">37、striptags：删除value中的所有HTML标签.使用形式：&#123;&#123;value | striptags&#125;&#125;</span><br><span class="line"></span><br><span class="line">38、time：格式化时间输出。使用形式：&#123;&#123;value | time:&quot;H:i&quot;&#125;&#125;或者&#123;&#123;value | time&#125;&#125;</span><br><span class="line"></span><br><span class="line">39、title：转换一个字符串成为title格式。</span><br><span class="line"></span><br><span class="line">40、truncatewords：将value切成truncatewords指定的单词数目。使用形式：&#123;&#123;value | truncatewords:2&#125;&#125;。例如，如果value是Joel is a slug 那么输出将是：Joel is ...</span><br><span class="line"></span><br><span class="line">42、upper：转换一个字符串为大写形式</span><br><span class="line"></span><br><span class="line">43、urlencode：将一个字符串进行URLEncode</span><br><span class="line"></span><br><span class="line">44、wordcount：返回字符串中单词的数目</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/08/day-05注册登录/">
    <time datetime="2019-01-08T09:47:02.000Z" class="entry-date">
        2019-01-08
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-04页面渲染" class="post-day-04页面渲染 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/07/day-04页面渲染/">day-04页面渲染</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/07/day-04页面渲染/" data-id="cjsk5t4ng000mx4venbik27x9" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>1、控制台创建工程目录并且新建相应的文件</p>
<p><img src="/images/QQ截图20190107195449.png" alt=""></p>
<p><img src="/images/13.png" alt=""></p>
<p>2、修改Setting.py文件</p>
<p><img src="/images/QQ截图20190107202002.png" alt=""></p>
<p><img src="/images/QQ截图20190107202024.png" alt=""></p>
<p><img src="/images/QQ截图20190107202042.png" alt=""></p>
<p><img src="/images/QQ截图20190107202058.png" alt=""></p>
<p>3、</p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>
<p><img src="/images/" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/07/day-04页面渲染/">
    <time datetime="2019-01-07T12:13:39.000Z" class="entry-date">
        2019-01-07
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-03-django数据库模型设计-1" class="day-03-django数据库模型设计-1 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/04/django数据库模型设计-1/">day-03 django数据库模型设计</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/04/django数据库模型设计-1/" data-id="cjsk5t4nq000rx4vemmfmpl98" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line">models.py文件*******************************************</span><br><span class="line"></span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Grade(models.Model):</span><br><span class="line">    g_name = models.CharField(max_length=10, unique=True)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;grade&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Student(models.Model):</span><br><span class="line">    s_name = models.CharField(max_length=10, unique=True)</span><br><span class="line">    s_age = models.IntegerField(default=20)</span><br><span class="line">    s_gender = models.BooleanField(default=0)</span><br><span class="line">    # auto_now_add=True 创建时，默认字段赋值为最新时间</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=True)</span><br><span class="line">    # auto_now=True 修改数据时，自动赋值为更新字段时 的时间</span><br><span class="line">    undate_time = models.DateTimeField(auto_now=True)</span><br><span class="line">    math = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line">    wuli = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line">    # 一对多的外键定义（定义在多的哪一方）</span><br><span class="line">    g = models.ForeignKey(Grade, null=True, related_name=&apos;stu&apos;, on_delete=models.CASCADE)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;student&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class StudentInfo(models.Model):</span><br><span class="line">    s_no = models.CharField(max_length=10, null=False)</span><br><span class="line">    phone = models.CharField(max_length=11, null=True)</span><br><span class="line">    name = models.CharField(max_length=10, null=True)</span><br><span class="line">    # 定义一对一的关联关系</span><br><span class="line">    # on_delete=models.CASCADE 默认删除主表，从表也会删除</span><br><span class="line">    # on_delete=models.PROTECT 不让删除主表，能删除从表</span><br><span class="line">    # on_delete=models.SET_NULL 删除主表，从表的关联字段设置为空（null）</span><br><span class="line"></span><br><span class="line">    stu = models.OneToOneField(Student,</span><br><span class="line">                               on_delete=models.CASCADE,</span><br><span class="line">                               null=True,</span><br><span class="line">                               related_name=&apos;info&apos;)  # related_name=&apos;info&apos;给拓展表(studentinfo)取个别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Course(models.Model):</span><br><span class="line">    c_name = models.CharField(max_length=10, unique=True)</span><br><span class="line">    # ManyToManyField字段定义在任何一个模型都可以</span><br><span class="line">    stu = models.ManyToManyField(Student, related_name=&apos;cou&apos;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;course&apos;</span><br><span class="line"></span><br><span class="line">urls.py文件***********************************************</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;admin/&apos;, admin.site.urls),</span><br><span class="line">    path(&apos;hello/&apos;, views.hello),</span><br><span class="line">    # 插入学生信息</span><br><span class="line">    # http://127.0.0.1:8000/saa_stu/</span><br><span class="line">    path(&apos;add_stu/&apos;,views.add_stu),</span><br><span class="line"></span><br><span class="line">    # 删除学生信息</span><br><span class="line">    path(&apos;del_stu/&apos;,views.del_stu),</span><br><span class="line"></span><br><span class="line">    # 更新学生信息</span><br><span class="line">    path(&apos;up_stu/&apos;,views.up_stu),</span><br><span class="line"></span><br><span class="line">    # 查询学生信息</span><br><span class="line">    path(&apos;sel_stu/&apos;,views.sel_stu),</span><br><span class="line">    # 添加学生的拓展信息</span><br><span class="line">    path(&apos;add_stu_info/&apos;,views.add_stu_info),</span><br><span class="line">    # 通过学生姓名查找紧急联系电话</span><br><span class="line">    path(&apos;sel_phone_by_stu/&apos;,views.sel_phone_by_stu),</span><br><span class="line">    path(&apos;sel_phone_by_stu2/&apos;,views.sel_phone_by_stu2),</span><br><span class="line">    # 通过=拓展表查找学生信息</span><br><span class="line">    path(&apos;sel_stu_by_info/&apos;,views.sel_stu_by_info),</span><br><span class="line">    # on_delete演示</span><br><span class="line">    path(&apos;on_delete_stu/&apos;,views.on_delete_stu),</span><br><span class="line">    # 添加班级信息</span><br><span class="line">    path(&apos;add_grade/&apos;,views.add_grade),</span><br><span class="line">    # 分配班级</span><br><span class="line">    path(&apos;stu_grade/&apos;,views.stu_grade),</span><br><span class="line">    # 通过学生查询班级</span><br><span class="line">    path(&apos;sel_grade_by_stu/&apos;,views.sel_grade_by_stu),</span><br><span class="line">    # 通过班级查询学生</span><br><span class="line">    path(&apos;sel_stu_by_grade/&apos;,views.sel_stu_by_grade),</span><br><span class="line">    # 添加课程信息</span><br><span class="line">    path(&apos;add_course/&apos;,views.add_course),</span><br><span class="line">    # 添加中间表的信息</span><br><span class="line">    path(&apos;add_s_c/&apos;,views.add_s_c),</span><br><span class="line">    # 访问首页</span><br><span class="line">    path(&apos;index/&apos;,views.index)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">views.py文件***********************************************</span><br><span class="line"># 一对一  (OneToOneField 任何一方)</span><br><span class="line">def add_stu_info(request):</span><br><span class="line">    # 添加小明的紧急联系人的信息，学号</span><br><span class="line">    stu_info = StudentInfo()</span><br><span class="line">    stu_info.s_no = &apos;123456&apos;</span><br><span class="line">    stu_info.phone = &apos;13551366543&apos;</span><br><span class="line">    stu_info.name = &apos;大明&apos;</span><br><span class="line">    # stu_info.stu = Student.objects.get(id=1)</span><br><span class="line">    stu_info.stu_id = 1</span><br><span class="line">    stu_info.save()</span><br><span class="line">    return HttpResponse(&apos;创建拓展信息成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_phone_by_stu(request):</span><br><span class="line">    # 1. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明&apos;).first()</span><br><span class="line">    # 2. 通过学生对象查询拓展表信息</span><br><span class="line">    # stu_info = StudentInfo.objects.filter(stu=stu).first()</span><br><span class="line">    stu_info = StudentInfo.objects.filter(stu_id=stu.id).first()</span><br><span class="line">    phone = stu_info.phone</span><br><span class="line">    print(phone)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_phone_by_stu2(request):</span><br><span class="line">    # 1. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明&apos;).first()</span><br><span class="line">    # 2. 反向查询。关联模型对象.关联另外一个模型的名称的小写</span><br><span class="line">    # stu_info = stu.studentinfo</span><br><span class="line">    stu_info = stu.info</span><br><span class="line">    phone = stu_info.phone</span><br><span class="line">    print(phone)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_stu_by_info(request):</span><br><span class="line">    # 1. 查询拓展表信息</span><br><span class="line">    stu_info = StudentInfo.objects.filter(s_no=&apos;123456&apos;).first()</span><br><span class="line">    # 2. 查询学生对象</span><br><span class="line">    stu = stu_info.stu</span><br><span class="line">    print(stu.s_name)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def on_delete_stu(request):</span><br><span class="line">    # 删除小明的学生信息</span><br><span class="line">    # 效果: 删除主表时，从表是否被删除</span><br><span class="line">    Student.objects.filter(s_name=&apos;小花&apos;).delete()</span><br><span class="line">    # StudentInfo.objects.filter(stu_id=4).delete()</span><br><span class="line">    return HttpResponse(&apos;删除成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 一对多 （ForeignKey 多的一方）</span><br><span class="line">def add_grade(request):</span><br><span class="line">    # 添加班级信息</span><br><span class="line">    g_names = [&apos;Python1801&apos;, &apos;Python1802&apos;, &apos;Python1803&apos;,&apos;Python1804&apos;]</span><br><span class="line">    for name in g_names:</span><br><span class="line">        Grade.objects.create(g_name=name)</span><br><span class="line">    return HttpResponse(&apos;创建班级成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def stu_grade(request):</span><br><span class="line">    # 1. 查询id=4的学生对象</span><br><span class="line">    stu = Student.objects.get(pk=4)</span><br><span class="line">    # 2. 设置学生的班级字段</span><br><span class="line">    # stu.g = Grade.objects.get(pk=1)</span><br><span class="line">    stu.g_id = 1</span><br><span class="line">    stu.save()</span><br><span class="line">    return HttpResponse(&apos;分配学生班级成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_grade_by_stu(request):</span><br><span class="line">    # 1. 查询姓名叫小明22的对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明22&apos;).first()</span><br><span class="line">    grade = stu.g</span><br><span class="line">    print(grade.g_name)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def sel_stu_by_grade(request):</span><br><span class="line">    # 1. 查询班级python1801对象</span><br><span class="line">    grade = Grade.objects.filter(g_name=&apos;python1801&apos;).first()</span><br><span class="line">    # stus = grade.student_set.all()</span><br><span class="line">    stus = grade.stu.all()</span><br><span class="line">    print(stus)</span><br><span class="line">    return HttpResponse(&apos;查询成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 多对多 （ManyToManyField 任何一方）</span><br><span class="line">def add_course(request):</span><br><span class="line">    c_names = [&apos;大学英语&apos;, &apos;商务英语&apos;, &apos;线代&apos;, &apos;高数&apos;]</span><br><span class="line">    for name in c_names:</span><br><span class="line">        c = Course()</span><br><span class="line">        c.c_name = name</span><br><span class="line">        c.save()</span><br><span class="line">    return HttpResponse(&apos;创建课程成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def add_s_c(request):</span><br><span class="line">    # 将大学英语分配给小明22这个学生</span><br><span class="line">    # 1. 查询课程对象</span><br><span class="line">    cou = Course.objects.filter(c_name=&apos;大学英语&apos;).first()</span><br><span class="line">    # 2. 查询学生对象</span><br><span class="line">    stu = Student.objects.filter(s_name=&apos;小明22&apos;).first()</span><br><span class="line">    # 3. 加入关联关系</span><br><span class="line">    # stu.course_set.add(cou)</span><br><span class="line">    # stu.cou.add(cou)</span><br><span class="line">    # cou.stu.add(stu)</span><br><span class="line">    stu.cou.remove(cou)</span><br><span class="line"></span><br><span class="line">    return HttpResponse(&apos;添加中间表信息成功&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 渲染页面</span><br><span class="line">def index(request):</span><br><span class="line">    stus = Student.objects.all()</span><br><span class="line">    return render(request, &apos;index.html&apos;, &#123;&apos;a&apos;: stus&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/images/QQ截图20190104203038.png" alt=""></p>
<p><img src="/images/Djang1o.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/04/django数据库模型设计-1/">
    <time datetime="2019-01-04T12:32:19.000Z" class="entry-date">
        2019-01-04
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="post-数据库表的增删改查" class="post-数据库表的增删改查 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/03/数据库表的增删改查/">day-02 数据库表的增删改查</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/03/数据库表的增删改查/" data-id="cjsk5t4ol0019x4ve2xi2zqxr" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h4 id="M-模型层（models-py）"><a href="#M-模型层（models-py）" class="headerlink" title="M : 模型层（models.py）"></a>M : 模型层（models.py）</h4><p>​    : 定义模型和数据库中的表之间的关联关系</p>
<p><img src="/images/QQ截图20190103120010.png" alt=""></p>
<h4 id="urls-py-修改路由"><a href="#urls-py-修改路由" class="headerlink" title="urls.py 修改路由"></a>urls.py 修改路由</h4><p><img src="/images/QQ截图20190103115954.png" alt=""></p>
<h4 id="V-视图层-views-py-表的插入、删除、更新、查询"><a href="#V-视图层-views-py-表的插入、删除、更新、查询" class="headerlink" title="V : 视图层(views.py 表的插入、删除、更新、查询)"></a>V : 视图层(views.py 表的插入、删除、更新、查询)</h4><p>​    : 定义业务逻辑</p>
<p><img src="/images/QQ截图20190103120026.png" alt=""></p>
<h4 id="一、插入（create）"><a href="#一、插入（create）" class="headerlink" title="一、插入（create）"></a>一、插入（create）</h4><h5 id="实现插入数据"><a href="#实现插入数据" class="headerlink" title="实现插入数据"></a>实现插入数据</h5><p>def add_stu(request):</p>
<p>​        第一种方式：</p>
<p>​    Student.objects.create(s_name=’小花’)</p>
<p>​        第二种方式：    </p>
<p>​    stu = Student()</p>
<p>​    stu.s_name = ‘小花’</p>
<p>​    stu.save()</p>
<p>​    return HttpResponse(‘创建学生成功’)</p>
<h4 id="二、删除"><a href="#二、删除" class="headerlink" title="二、删除"></a>二、删除</h4><h5 id="实现删除数据"><a href="#实现删除数据" class="headerlink" title="实现删除数据"></a>实现删除数据</h5><p>a.获取删除的对象，filter(条件)</p>
<p>b.实现删除方法，delete()</p>
<p>def del_stu(request):</p>
<p>​    Student.objects.filter(id=3).delete()</p>
<p>​    return HttpResponse(‘删除学生成功’)</p>
<h4 id="三、更新"><a href="#三、更新" class="headerlink" title="三、更新"></a>三、更新</h4><h5 id="实现更新"><a href="#实现更新" class="headerlink" title="实现更新"></a>实现更新</h5><p>def up_stu(request):</p>
<p>​    a.获取更新数据，filoter(条件)</p>
<p>​    b.实现更新方法，update（s_name = ‘妲己’）</p>
<p>​        #第一种方法：</p>
<p>​    Student.objects.filter(id=2).update(s_name=’妲己’)</p>
<p>​        #第二种方法：</p>
<p>​    stu = Student.objects.filter(id=2).first()</p>
<p>​    stu.s_name = ‘妲己2’</p>
<p>​    stu.save()</p>
<p>​    return HttpResponse(‘更新学生成功’)</p>
<h4 id="四、查询"><a href="#四、查询" class="headerlink" title="四、查询"></a>四、查询</h4><pre><code># 查询学生信息

# a.查询所有的学生信息
stus = Student.objects.all()
for stu in stus:
    print(stu.s_name)

# 查询id=2的学生信息，filter()
stu = Student.objects.filter(id=2).first()
print(stu)
# get（）取唯一的一个对象
# get（条件）条件必须成立（会报错）
stu = Student.objects.get(id=2)  # 建议少用，一般使用filter（条件）
print(stu)

# b.过滤出不满足条件的信息
stus = Student.objects.filter(s_gender=1)  # 所有的男生
print(stus)
stus = Student.objects.exclude(s_gender=0)  # exclude(s_gender=0)不包含女生
print(stus)

# c.排序order_by
stus = Student.objects.order_by(&apos;id&apos;)  # 升序；降序（&apos;-id&apos;）
print(stus)

# 取出对象中的某个字段
stus = Student.objects.all().values()  # 全部的字段
print(stus)
stus = Student.objects.all().values(&apos;s_name&apos;, &apos;s_age&apos;)  # 只取名字和年龄字段
print(stus)

# =========================================================================
# 判断查询结果是否存在
a = Student.objects.filter(s_name=&apos;小张&apos;).exists()
print(a)
# 计算有多少条数据
b = Student.objects.filter(s_gender=1).count()
print(b)

# contains   - 包含、模糊查询
# 语法：字段__运算符 ： 查询包含‘小明’的所有字符的字段
stus = Student.objects.filter(s_name__contains=&apos;小明&apos;)
print(stus)

# like &apos;小%&apos; &apos;%明&apos;
# startswith  endswith ： 以“ ”字符开始；以“ ”字符结束
stus = Student.objects.filter(s_name__startswith=&apos;小&apos;)
print(stus)
stus = Student.objects.filter(s_name__endswith=&apos;明&apos;)
print(stus)

# sql where id in (1,2,3,4,5,6,7,8)
stus = Student.objects.filter(id__in=[1, 2, 3, 4])  # id字段
print(stus)
stus = Student.objects.filter(pk__in=[1, 2, 3, 4])  # pk代表主键
print(stus)

# gte gt lt lte- 大于等于;大于;小于；小于等于
stus = Student.objects.filter(s_age__gte=18, s_age__lt=20)
# 或者 stus = Student.objects.filter(s_age__gte=18).filter(s_age__lt=20)
print(stus)

# 聚合 Avg Max Sum Min Count
age_avg = Student.objects.all().aggregate(Avg(&apos;s_age&apos;))
age_sum = Student.objects.all().aggregate(Sum(&apos;s_age&apos;))
print(age_avg,age_sum)

# 查询年龄大约等于18 且 小于20
stus1 = Student.objects.filter(s_age__gte=18, s_age__lt=20)
# 查询年龄大=大于等于18 或 小于20: Q()
stus = Student.objects.filter(Q(s_age__gte=18) | Q(s_age__lt=20)) # | ：或
stus = Student.objects.filter(Q(s_age__gte=18) &amp; Q(s_age__lt=20)) # &amp; ：且  - 与stus1一样
stus = Student.objects.filter(~Q(s_age__gte=18)) # ~ ：取反
print(stus)

# 查询物理成绩大于数学成绩的学生
stus = Student.objects.all()
for stu in stus:
    if stu.wuli &gt; stu.math:
        print(stu.s_name)

stus = Student.objects.filter(wuli__gt=F(&apos;math&apos;))
print(stus)


return HttpResponse(&apos;查询所有的学生信息&apos;)
</code></pre><p><img src="/images/QQ截图20190103165706.png" alt=""></p>
<p><img src="/images/QQ截图20190103165840.png" alt=""></p>
<p><img src="/images/QQ截图20190103165909.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/03/数据库表的增删改查/">
    <time datetime="2019-01-03T03:58:30.000Z" class="entry-date">
        2019-01-03
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-01-Django" class="day-01-Django post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/02/Django/">day-01 Django</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/02/Django/" data-id="cjsk5t4ls0000x4veiov91szj" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><h2 id="虚拟环境"><a href="#虚拟环境" class="headerlink" title="虚拟环境"></a>虚拟环境</h2><h3 id="安装-pip-install-virtualenv"><a href="#安装-pip-install-virtualenv" class="headerlink" title="安装: pip install virtualenv"></a>安装: pip install virtualenv</h3><h3 id="使用-virtualenv-–no-site-packages-p-D-python3-python-exe-name"><a href="#使用-virtualenv-–no-site-packages-p-D-python3-python-exe-name" class="headerlink" title="使用: virtualenv –no-site-packages -p D:\python3\python.exe name"></a>使用: virtualenv –no-site-packages -p D:\python3\python.exe name</h3><ul>
<li>–no-site-packages: 表示创建的虚拟环境为纯净的环境，不安装有其他的库</li>
<li>-p: 表示虚拟环境中的python版本</li>
</ul>
<h3 id="pip使用"><a href="#pip使用" class="headerlink" title="pip使用"></a>pip使用</h3><ul>
<li>pip list: 插看安装的库</li>
<li>pip install xxx: 安装</li>
</ul>
<h3 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h3><ul>
<li>Windows: 直接执行activate命令</li>
<li>Mac/Linux/Ubuntu: 直接执行source activate命令</li>
</ul>
<h3 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h3><ul>
<li>Windows/Mac/Linux/Ubuntu: 直接执行deactivate</li>
</ul>
<h2 id="Django项目"><a href="#Django项目" class="headerlink" title="Django项目"></a>Django项目</h2><h3 id="创建-django-amdin-startproject-项目名称"><a href="#创建-django-amdin-startproject-项目名称" class="headerlink" title="创建: django-amdin startproject 项目名称"></a>创建: django-amdin startproject 项目名称</h3><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul>
<li><p>启动命令: python manage.py runserver。默认IP为127.0.0.1  默认端口为8000</p>
</li>
<li><p>修改启动端口: python manage.py runserver 端口</p>
</li>
<li><p>修改IP和端口: python manage.py runserver IP:端口</p>
</li>
<li><p>IP参数: 如果为0.0.0.0表示任何人都可以通过公网IP访问django项目</p>
</li>
<li><p>端口PORT参数: 如果端口设置为80，表示该端口可以不用写</p>
<p><img src="/images/QQ截图20190102192808.png" alt=""></p>
</li>
</ul>
<h2 id="Django模式"><a href="#Django模式" class="headerlink" title="Django模式"></a>Django模式</h2><h3 id="M"><a href="#M" class="headerlink" title="M"></a>M</h3><ul>
<li>模型层: 定义模型和数据库中的表之间的关联关系</li>
</ul>
<h3 id="V"><a href="#V" class="headerlink" title="V"></a>V</h3><ul>
<li>视图层: 定义业务逻辑</li>
</ul>
<h3 id="T"><a href="#T" class="headerlink" title="T"></a>T</h3><ul>
<li>模板: HTML页面</li>
</ul>
<h2 id="数据库准备工作"><a href="#数据库准备工作" class="headerlink" title="数据库准备工作"></a>数据库准备工作</h2><h3 id="settings-py中配置"><a href="#settings-py中配置" class="headerlink" title="settings.py中配置"></a>settings.py中配置</h3><ul>
<li><p>USER参数: 访问用户</p>
</li>
<li><p>PASSWORD参数: 密码</p>
</li>
<li><p>HOST参数: 访问数据库的地址</p>
</li>
<li><p>PORT参数: 访问数据库的端口</p>
</li>
<li><p>NAME参数: 数据库名</p>
</li>
<li><p>‘OPTIONS’:{‘isolation_level’:None}</p>
<p>​</p>
<p><img src="/images/QQ截图20190102192637.png" alt=""></p>
<p><img src="/images/QQ截图20190102192718.png" alt=""></p>
</li>
</ul>
<p><img src="/images/QQ截图20190102192747.png" alt=""></p>
<p><img src="/images/QQ截图20190102192848.png" alt=""></p>
<h3 id="安装pymysql"><a href="#安装pymysql" class="headerlink" title="安装pymysql"></a>安装pymysql</h3><ul>
<li>使用pymysql连接数据库: 因为python3没有MySQLdb驱动，无法直接连接MySQL</li>
<li>在工程目录的<strong>init</strong>.py文件中定义  pymysql.install_as_MySQLdb()</li>
</ul>
<h3 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h3><ul>
<li><p>第一次迁移: python manege.py migrate</p>
</li>
<li><p>除开第一次迁移</p>
<p><img src="/images/QQ截图20190102192907.png" alt=""></p>
<ul>
<li>生成迁移文件: python manage.py makemigrations</li>
<li>执行迁移文件: python manage.py migrate</li>
</ul>
</li>
</ul>
<h3 id="插入管理员账号"><a href="#插入管理员账号" class="headerlink" title="插入管理员账号"></a>插入管理员账号</h3><ul>
<li>python manage.py createsuperuser</li>
</ul>
<p><em>XMind: ZEN - Trial Version</em></p>
<p><img src="/images/Django.png" alt=""></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/02/Django/">
    <time datetime="2019-01-02T08:45:00.000Z" class="entry-date">
        2019-01-02
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/框架/">框架</a></li></ul>

    </footer>
</article>






  
    <article id="day-06-Django安装" class="day-06-Django安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2019/01/02/Django安装/">day-o6 Django安装</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2019/01/02/Django安装/" data-id="cjsk5t4m50002x4veszdttifn" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="day-06-Django安装"><a href="#day-06-Django安装" class="headerlink" title="day-06 Django安装"></a>day-06 Django安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"># 更新pip（报错再更新一下）</span><br><span class="line">python -m pip install -U pip</span><br><span class="line"></span><br><span class="line"># django/pymysql/缓存/djangorestframework/图形处理- 安装</span><br><span class="line">pip install django pymysql django-redis djangorestframework pillow</span><br><span class="line"># 检查依赖库冲突/查看兼容性</span><br><span class="line">pip check</span><br><span class="line"># 装的什么库及版本</span><br><span class="line">pip freeze</span><br><span class="line"># 换库的版本</span><br><span class="line">pip install django==1.11</span><br><span class="line"></span><br><span class="line"># 生成一个txt文件，显示安装依赖库的版本号</span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"># 直接生成一样的虚拟环境（与requirements.txt中的依赖库一样）</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 创建新的django项目</span><br><span class="line">django-admin startproject hellodjango .</span><br><span class="line"># 检查django是否运行</span><br><span class="line">python manage.py runserver</span><br><span class="line"></span><br><span class="line"># 直接生成一样的虚拟环境（与requirements.txt中的依赖库一样）</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"># 创建新的django项目</span><br><span class="line">django-admin startproject hellodjango .</span><br><span class="line"># 启动django服务(django项目的管理程序-manage.py)</span><br><span class="line">python manage.py runserver  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 界面改成中文（http://127.0.0.1:8000/）</span><br><span class="line"># 进入hellodjango/settings.py</span><br><span class="line">LANGUAGE_CODE = &apos;zh-hans&apos;</span><br><span class="line">TIME_ZONE = &apos;Asia/Chongqing&apos;</span><br><span class="line"># 数据库设置</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;NAME&apos;: &apos;hrs&apos;,</span><br><span class="line">        &apos;HOST&apos;: &apos;localhost&apos;,</span><br><span class="line">        &apos;PORT&apos;: 3306,</span><br><span class="line">        &apos;USER&apos;: &apos;root&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;: &apos;123456&apos;,</span><br><span class="line">        &apos;TIME_ZONE&apos;: &apos;Asia/Chongqing&apos;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 把pymysql当成mysqldb使用</span><br><span class="line"># 进入_init_.py文件</span><br><span class="line">import pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"># 打开mysql57服务，进入cmd/(或者右击计算机/管理/服务/手动打开mysql57服务)</span><br><span class="line">net start mysql57</span><br><span class="line"># 打开本地数据库（数据库客户端）</span><br><span class="line"># pycharm/terminal输入</span><br><span class="line">python manage.py migrate</span><br><span class="line">================================================================================================</span><br><span class="line">老师：</span><br><span class="line">1. 通过PyCharm创建Python项目 ---&gt; hellodjango</span><br><span class="line">2. 在Terminal的虚拟环境中安装依赖项 ---&gt; </span><br><span class="line">   pip install django pymysql django-redis djangorestframework pillow</span><br><span class="line">   pip check</span><br><span class="line">   pip freeze &gt; requirements.txt</span><br><span class="line">3. 创建Django项目 ---&gt; </span><br><span class="line">   django-admin startproject hellodjango .</span><br><span class="line">4. 运行项目 ---&gt;</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py runserver</span><br><span class="line">   http://localhost:8000</span><br><span class="line">   http://127.0.0.1:8000</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py runserver 0.0.0.0:80</span><br><span class="line">   http://localhost</span><br><span class="line">   http://127.0.0.1</span><br><span class="line">   ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)http://10.7.187.140</span><br><span class="line">5. 修改配置文件 ---&gt; hellodjango/![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)settings.py</span><br><span class="line">   LANGUAGE_CODE = &apos;zh-hans&apos;</span><br><span class="line">   TIME_ZONE = &apos;Asia/Chongqing&apos;</span><br><span class="line">   DATABASES = &#123;</span><br><span class="line">   &apos;default&apos;: &#123;</span><br><span class="line">   	&apos;BACKEND&apos;: &apos;....mysql&apos;,</span><br><span class="line">   	&apos;NAME&apos;: &apos;&apos;</span><br><span class="line">   	&apos;HOST&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;PORT&apos;: 3306,</span><br><span class="line">   	&apos;USER&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;PASSWORD&apos;: &apos;&apos;,</span><br><span class="line">   	&apos;TIME_ZONE&apos;: &apos;Asia/Chongqing&apos;,</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line">6. 修改init.py文件</span><br><span class="line">   import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"></span><br><span class="line">1. 生成Django自带的数据表</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py migrate</span><br><span class="line">2. 创建后台管理员账号</span><br><span class="line">   python ![img](file:///C:\Users\Administrator\AppData\Roaming\Tencent\QQ\Temp\%W@GJ$ACOF(TYDYECOKVDYB.png)manage.py createsuperuser</span><br><span class="line"></span><br><span class="line">Unix - BSD - FreeBSD - Macintosh - macOS - iOS</span><br><span class="line"></span><br><span class="line">Unix - MINIX - Linux - Android</span><br><span class="line"></span><br><span class="line">Unix - AIX / HP-UX / Solaris</span><br><span class="line"></span><br><span class="line">Django / Flask / Tornado</span><br></pre></td></tr></table></figure>
<h4 id="复习："><a href="#复习：" class="headerlink" title="复习："></a>复习：</h4><p>Web前端：<br>HTML标签 - 承载内容 - content<br>CSS - 渲染页面 - display </p>
<ul>
<li><p>选择器</p>
</li>
<li><p>通配符选择器</p>
</li>
<li><p>标签选择器</p>
</li>
<li><p>类选择器</p>
</li>
<li><p>ID选择器</p>
</li>
<li><p>属性选择器</p>
</li>
<li><p>后代选择器 / 父子选择器</p>
</li>
<li><p>兄弟选择器 / 相邻兄弟选择器</p>
</li>
<li><p>伪类 / 伪元素</p>
</li>
<li><p>就近原则/具体性原则/重要性原则</p>
</li>
<li><p>盒子模型（内容-padding-border-背景图-背景色-margin）</p>
</li>
<li><p>常用样式属性和常用属性值<br>JavaScript - 交互行为 - behavior</p>
</li>
<li><p>语法规范 - ECMAScript</p>
</li>
<li><p>BOM - 浏览器对象模型 - window</p>
</li>
<li><p>DOM - 文档对象模型 - document</p>
</li>
<li><p>getElementById() / getElementsByTagName() / getElementsByClassName() / querySelector() / querySelectorAll()</p>
</li>
<li><p>createElement() / appendChild() / insertBefore()</p>
</li>
<li><p>removeChild()</p>
</li>
<li><p>innerHTML / textContent / className / style</p>
</li>
<li><p>parentNode / children / prevSibling / nextSibling</p>
</li>
<li><p>addEventListener / removeEventListener</p>
</li>
<li><p>jQuery —&gt; window.$ / window.jQuery </p>
</li>
<li><p>$(‘样式表选择器’)：获取页面元素返回jQuery对象</p>
</li>
<li><p>$(‘&lt;标签&gt;’)：创建新元素得到jQuery对象</p>
</li>
<li><p>$(原生JavaScript对象)：将原生JS对象转成jQuery对象</p>
</li>
<li><p>$(function() {})：绑定页面加载完成之后要执行的回调函数</p>
<p>​</p>
<h5 id="Linux文件操作命令："><a href="#Linux文件操作命令：" class="headerlink" title="Linux文件操作命令："></a>Linux文件操作命令：</h5><ul>
<li>pwd - print working directory</li>
<li>cd - change directory</li>
<li>ls - list directory contents<br>-a - all<br> -l - long<br> -R - recursive</li>
<li>mkdir - make directory</li>
<li>rmdir - remove empty directory</li>
<li>touch</li>
<li>cp - copy</li>
<li>rm - remove</li>
<li>mv - move</li>
<li>less / more / head / tail</li>
<li>cat - concatenate</li>
<li>uniq / sort / cut / wc / diff</li>
<li>find / grep</li>
<li>ps -ef / ps -aux</li>
<li>netstat -nap</li>
<li>ifconfig / ip</li>
<li>top / sar</li>
<li>scp / sftp / ssh</li>
</ul>
<p>Linux安装软件和配置服务：</p>
<ol>
<li>包管理工具 - yum / rpm / apt / deb</li>
<li>源代码构建安装</li>
</ol>
<ul>
<li>wget</li>
<li>gunzip / xz -d</li>
<li>tar -xvf</li>
<li>make &amp;&amp; make install</li>
<li>ln -s 源 目标</li>
</ul>
<p>systemctl </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- start / stop / restart / status / enable / disable</span><br></pre></td></tr></table></figure>
<p>service</p>
<p>firewalld / iptables - 防火墙</p>
<p>使用vim</p>
<p>命令模式 –i/a–&gt; 插入模式（编辑模式） –Esc–&gt; 命令模式<br>命令模式 –:?/–&gt; 末行模式 –Enter–&gt; 命令模式</p>
<p>Ctrl+e / Ctrl+y - 滚动一行<br>Ctrl+f / Ctrl+b - 滚动一页<br>gg - 到首行<br>G - 到末行<br>100G - 到100行<br>hjkl - 左下上右移动光标<br>$ - 光标到行尾<br>0 - 光标到行首<br>dd / dw / d0 / d$ - 删除<br>yy / p - 复制 / 黏贴<br>u / Ctrl+r - 撤销 / 恢复<br>ZZ / :wq - 保存退出 - ! - 强制操作</p>
<p>/搜索内容（正则） - 查找 - n / N - 向下/上搜索<br>?搜索内容（正则） - 查找<br>:1,$s/搜索的内容（正则）/替换后的内容/ice - 查找替换</p>
<p>版本比较 - vim -d 文件1 文件2<br>多文件查看 - vim 文件1 文件2 文件3<br>:ls - 查看文件<br>:b - 切换文件<br>:sp / :vs - 拆分窗口<br>Ctrl+w Ctrl+w - 切换窗口</p>
<p>配置vim —&gt; ~/.vimrc<br>set nu<br>set ts=4<br>set expandtab<br>set autoindent<br>set nohls<br>syntax on<br>set ruler </p>
</li>
</ul>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2019/01/02/Django安装/">
    <time datetime="2019-01-02T00:47:05.000Z" class="entry-date">
        2019-01-02
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-rides命令与pycharm的应用" class="post-rides命令与pycharm的应用 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/29/rides命令与pycharm的应用/">day-05 Rides命令与Pycharm的应用</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/29/rides命令与pycharm的应用/" data-id="cjsk5t4og0015x4veo53e580h" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="redis命令大全：redisdoc-com"><a href="#redis命令大全：redisdoc-com" class="headerlink" title="redis命令大全：redisdoc.com"></a>redis命令大全：redisdoc.com</h3><h4 id="一-、redis的list类型-经典的数据存储结构："><a href="#一-、redis的list类型-经典的数据存储结构：" class="headerlink" title="一 、redis的list类型 - 经典的数据存储结构："></a>一 、redis的list类型 - 经典的数据存储结构：</h4><h5 id="栈（stack）-FILO-先进后出-lpush-lpop-rpush-rpop"><a href="#栈（stack）-FILO-先进后出-lpush-lpop-rpush-rpop" class="headerlink" title="栈（stack）-FILO - 先进后出 -  lpush + lpop / rpush + rpop"></a>栈（stack）-FILO - 先进后出 -  lpush + lpop / rpush + rpop</h5><p>​    列如：def f(num):    - 递归函数，自己调用自己（列：5的阶乘）</p>
<p>​                if num in (0,1):</p>
<p>​                return 1</p>
<p>​               return num * f(num-1)</p>
<h5 id="队列（queue）-fFIFO-先进先出-lpush-rpop-rpush-lpop"><a href="#队列（queue）-fFIFO-先进先出-lpush-rpop-rpush-lpop" class="headerlink" title="队列（queue）- fFIFO - 先进先出 - lpush +rpop / rpush + lpop"></a>队列（queue）- fFIFO - 先进先出 - lpush +rpop / rpush + lpop</h5><h5 id="一、字符串：String"><a href="#一、字符串：String" class="headerlink" title="一、字符串：String"></a>一、字符串：String</h5><p>​    setnx   键 值   - 如果key不存在，才能放键值对</p>
<p>​    mest   键1 值1 键2 值2 …   - 一次存放多个键值对</p>
<p>​    mget   键1 键2   - 一次也可通过多个键 取出值</p>
<p>​    getset  键1 值3    - 将键1的值修改值3</p>
<p>​    append - 字符串后面追加</p>
<p>​    setbit  foo 128   -第128位为1其他位0</p>
<p>​    gitbit foo 127    - 取127位的bit值</p>
<p>​    type 键   - 键对应别的值类型（字符串/集合/哈希……）</p>
<p>​    object encodiung 键    - 底层的数据类型</p>
<h5 id="二、哈希：Hash（字典里的值还是字典）"><a href="#二、哈希：Hash（字典里的值还是字典）" class="headerlink" title="二、哈希：Hash（字典里的值还是字典）"></a>二、哈希：Hash（字典里的值还是字典）</h5><p>​    hset stu1 stuid 1001   - 创建哈希列表</p>
<p>​    hget stu1 stuid             - 取值</p>
<p>​    hegetall                          - 取出所有的键值对</p>
<p>​    hvals                               - 取出所有键值对的值 </p>
<pre><code>hmset/hmget                - 存/取 多个键值对
</code></pre><p>​    hdel                                 - 删除字段</p>
<p>​    hkeys                               - </p>
<h5 id="三、列表：List"><a href="#三、列表：List" class="headerlink" title="三、列表：List"></a>三、列表：List</h5><p>​    lpush/rpush  list1 100 200 300 400 500      - 从左/右边 存 放元素</p>
<p>​    lrange list1 0 -1                    - 查看（（0 -1）索引范围）</p>
<p>​    lpop/rpop                               - 从左/右边 取 元素</p>
<p>​    lindex list1 下标                   - 指定下标取元素</p>
<p>​    blpop/brpop    list1 time      - 按时间 阻塞 取出元素，没有了会按规定时间返回nil</p>
<h5 id="四、集合：Set"><a href="#四、集合：Set" class="headerlink" title="四、集合：Set"></a>四、集合：Set</h5><p>​    sadd set1 100,200,200,300       - 创建集合元素</p>
<p>​    smembers set1                           - 获取元素    </p>
<p>​    sinter set1 set2                            - 交集    </p>
<p>​    sunion set1 set2                         - 并集</p>
<p>​    sdiff set1 set2                              - 差集    </p>
<p>​    srem set1 100                              - 移除元素</p>
<p>​    sismember set1 元素              - 查看元素是否在集合里</p>
<p>​    scard set1                                     - 查看集合有多少个元素</p>
<p>​    spop                                              - 取元素</p>
<p>​    srandmember                             - 随机取元素    </p>
<h5 id="五、有序结合：Zset"><a href="#五、有序结合：Zset" class="headerlink" title="五、有序结合：Zset"></a>五、有序结合：Zset</h5><p>​    zadd paihangbang 100 yuting 200 xiaownag 1000 luohao   - 添加元素</p>
<p>​    zrange paihangbang 0 -1   - 从小到大排序</p>
<p>​    zrevrange paihangbang 0 -1 - 从大到小拍讯</p>
<p>​    zincrby paihangbang 20000 yuting    - 增加值</p>
<p>​         </p>
<h3 id="二、主从复制，读写分离"><a href="#二、主从复制，读写分离" class="headerlink" title="二、主从复制，读写分离"></a>二、主从复制，读写分离</h3><p>​    主人：redis-server –requirepass 123123 &gt; redis.log 2&gt; redis-error.log &amp;<br>​    奴隶：redis-server –slaveof 120.77.222.217 6379 –masterauth 123123 &gt; redis.log 2&gt; redis-error.log &amp;</p>
<p>​        查看主从复制信息<br>​            127.0.0.1:6379&gt; info replication</p>
<p>​        退出不再做奴隶</p>
<p>​            127.0.0.1:6379&gt; slaveof no one</p>
<h3 id="三、Redis数据库pycharm操作"><a href="#三、Redis数据库pycharm操作" class="headerlink" title="三、Redis数据库pycharm操作"></a>三、Redis数据库pycharm操作</h3><p>1、Python安装Redis：</p>
<p>​    [global]<br>​    index-url=<a href="https://pypi.doubanio.com/simple/" target="_blank" rel="noopener">https://pypi.doubanio.com/simple/</a></p>
<p>在终端安装</p>
<p>​    pip install redis    (安装redis)</p>
<p>​    pip install pillow django    (安装django)</p>
<p>​    </p>
<h3 id="四、Mysql和Redis结合应用"><a href="#四、Mysql和Redis结合应用" class="headerlink" title="四、Mysql和Redis结合应用"></a>四、Mysql和Redis结合应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">序列化 - 把对象转换成字符或字节序列 - 串行化/腌咸菜</span><br><span class="line">反序列化 - 把字符或者字节序列还原成对象 - 反串行化</span><br><span class="line">Python中要实现对象的序列化和反序列有3种方案：</span><br><span class="line">- json - load / loads / dump / dumps - 字符序列</span><br><span class="line">- pickle - load / loads / dump / dumps - 字节序列</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">import pickle</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">import pymysql</span><br><span class="line">import redis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class District(object):</span><br><span class="line">    &quot;&quot;&quot;行政区域&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, distid, name):</span><br><span class="line">        self.distid = distid</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    begin = time.time()</span><br><span class="line">    cli = redis.StrictRedis(host=&apos;119.23.45.191&apos;,</span><br><span class="line">                            port=6379,</span><br><span class="line">                            password=&apos;123123&apos;)</span><br><span class="line">    # 优先从缓存中读取数据 如果缓存没有命中 才连接数据库进行查询</span><br><span class="line">    if cli.exists(&apos;provinces&apos;):</span><br><span class="line">        # 直接从缓存中通过键获取数据并反序列化成Python中的对象</span><br><span class="line">        provinces = pickle.loads(cli.get(&apos;provinces&apos;))</span><br><span class="line">    else:</span><br><span class="line">        provinces = []</span><br><span class="line">        con = pymysql.connect(host=&apos;119.23.45.191&apos;, port=3306,</span><br><span class="line">                              database=&apos;hrs&apos;, charset=&apos;utf8&apos;,</span><br><span class="line">                              user=&apos;root&apos;, password=&apos;123456&apos;)</span><br><span class="line">        try:</span><br><span class="line">            with con.cursor() as cursor:</span><br><span class="line">                # 查询省级行政区域</span><br><span class="line">                cursor.execute(</span><br><span class="line">                    &apos;select `distid`, `name` from `tb_district` where `pid` is null&apos;)</span><br><span class="line">                # 将查询结果放入列表容器</span><br><span class="line">                for dist_tuple in cursor.fetchall():</span><br><span class="line">                    dist = District(*dist_tuple)</span><br><span class="line">                    provinces.append(dist)</span><br><span class="line">                # 将列表序列化(pickle)然后放入Redis中缓存</span><br><span class="line">                cli.set(&apos;provinces&apos;, pickle.dumps(provinces))</span><br><span class="line">        finally:</span><br><span class="line">            con.close()</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(f&apos;执行时间: &#123;end - begin&#125;秒&apos;)</span><br><span class="line">    print(provinces)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>​    </p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/29/rides命令与pycharm的应用/">
    <time datetime="2018-12-29T01:47:50.000Z" class="entry-date">
        2018-12-29
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-redis数据库安装及应用" class="post-redis数据库安装及应用 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/27/redis数据库安装及应用/">day-04redis数据库安装及操作（和本地mysql安装）</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/27/redis数据库安装及应用/" data-id="cjsk5t4od0012x4ve3edsylwu" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="一、windows本地mysql安装"><a href="#一、windows本地mysql安装" class="headerlink" title="一、windows本地mysql安装"></a>一、windows本地mysql安装</h3><p><img src="/images/QQ图片20181227100619.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100642.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100648.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100908.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227101746.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227101757.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102053.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102236.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102300.jpg" alt=""></p>
<h3 id="二、Redis数据库应用命令"><a href="#二、Redis数据库应用命令" class="headerlink" title="二、Redis数据库应用命令"></a>二、Redis数据库应用命令</h3><p>下载：wget <a href="http://download.redis.io/releases/redis-5.0.3.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-5.0.3.tar.gz</a></p>
<p>gunzip redis-5.0.3.tar.gz  -(解压)</p>
<p>tar -xvf redis-5.0.3.tar  -(-xvf解归档 /-cvf)</p>
<p>cd redis-5.0.3</p>
<p>gcc –version  -检查c的环境</p>
<p>make &amp;&amp; make install - 安装</p>
<p>Redis运行:</p>
<pre><code>ctrl + c   - 终止进程

ctrl + z   - 跳出前台进程

jobs    - 查看后台任务

bg %1    - 后台运行

fg %1      - 前台运行

redis-server   - 启动redis

redis-server  &amp;  - 启动redis时 后台自动运行

    （redis-server --requirepass 1qaz2wsx --appendonly yes &gt; redis.log 2&gt; redis-error.log &amp;）启动服务器，创建密码，打开ADF，创建日志

netstat -nap | grep 6379   - 查看进程6379
</code></pre><p>特点：提供高速缓存服务 - 缓存热点数据（访问量大，数据量不大）</p>
<pre><code>缓解了数据的压力（高频访问数据不用直接访问数据库）
</code></pre><p>redis提供了两种持久化数据的方案：</p>
<pre><code>1、RDA - 默认开启

2、AOF  - 默认关闭  -- appenddonly yes
</code></pre><p>服务器连接：</p>
<pre><code>redis-cli   -连接服务器

auth 123456  -输入密码

ping  -心跳事件（检查是否连接上）
</code></pre><p>数据库操作：</p>
<pre><code>set username jackfrued  -存储数据（用：set 键 值）

get username                   -取出数据（用：get 键） --&gt;&quot;jackfrued&quot;



set yuting 1000 ex 30   - 30秒自动失效

expirt  -设置超时时间

ttl yuting    -检查还有多少时间

keys*   - 只取key的部分

exists 键  - 判断键是否存在

flushdb   - 清洗数据库

flushall - 清除所有数据库中的所有键值对

select 1 - 切换到第二个数据库（默认16个数据库）

dbsisze  - 查看当前数据库有多少键值对

save - 保存

bgsave - 后台保存



stutdown [save|no save] -关闭服务器(关闭服务器时，默认save保存状态

quit  -退出
</code></pre><p>redis命令大全：redisdoc.com</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/27/redis数据库安装及应用/">
    <time datetime="2018-12-27T06:32:09.000Z" class="entry-date">
        2018-12-27
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
  
    <nav id="pagination">
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
      </nav>
    </nav>
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s">
        <input type="submit" id="searchsubmit" value="搜索">
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/02/25/注意重点/">注意重点</a>
          </li>
        
          <li>
            <a href="/2019/02/21/linux系统MySql操作/">linux系统MySql操作</a>
          </li>
        
          <li>
            <a href="/2019/02/19/linux中msql操作/">linux中msql操作</a>
          </li>
        
          <li>
            <a href="/2019/02/19/操作命令/">操作命令</a>
          </li>
        
          <li>
            <a href="/2019/02/16/flask项目部署/">flask项目部署</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux学习/">Linux学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask框架/">flask框架</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/Linux学习/" style="font-size: 15px;">Linux学习</a> <a href="/tags/flask框架/" style="font-size: 15px;">flask框架</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/数据库/" style="font-size: 17.5px;">数据库</a> <a href="/tags/框架/" style="font-size: 20px;">框架</a> <a href="/tags/爬虫/" style="font-size: 12.5px;">爬虫</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 John Doe
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>