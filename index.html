<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  

  
  
  
  
  
  
  <title>Ren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Ren">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Ren">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ren">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script>
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Ren" rel="home">Ren</a>
      </h1>
      
        <h2 class="site-description hitokoto"></h2>
        <script type="text/javascript" src="https://v1.hitokoto.cn/?encode=js"></script>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-redis数据库安装及应用" class="post-redis数据库安装及应用 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/27/redis数据库安装及应用/">day-04redis数据库安装及操作（和本地mysql安装）</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/27/redis数据库安装及应用/" data-id="cjq6al0qv0008e4vexoyl8di6" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="一、windows本地mysql安装"><a href="#一、windows本地mysql安装" class="headerlink" title="一、windows本地mysql安装"></a>一、windows本地mysql安装</h3><p><img src="/images/QQ图片20181227100619.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100642.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100648.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227100908.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227101746.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227101757.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102053.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102236.jpg" alt=""></p>
<p><img src="/images/QQ图片20181227102300.jpg" alt=""></p>
<h3 id="二、Redis数据库应用命令"><a href="#二、Redis数据库应用命令" class="headerlink" title="二、Redis数据库应用命令"></a>二、Redis数据库应用命令</h3><p>下载：wget <a href="http://download.redis.io/releases/redis-5.0.3.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-5.0.3.tar.gz</a></p>
<p>gunzip redis-5.0.3.tar.gz  -(解压)</p>
<p>tar -xvf redis-5.0.3.tar  -(-xvf解归档 /-cvf)</p>
<p>cd redis-5.0.3</p>
<p>gcc –version  -检查c的环境</p>
<p>make &amp;&amp; make install - 安装</p>
<p>Redis运行:</p>
<pre><code>ctrl + c   - 终止进程

ctrl + z   - 跳出前台进程

jobs    - 查看后台任务

bg %1    - 后台运行

fg %1      - 前台运行

redis-server   - 启动redis

redis-server  &amp;  - 启动redis时 后台自动运行

    （redis-server --requirepass 1qaz2wsx --appendonly yes &gt; redis.log 2&gt; redis-error.log &amp;）启动服务器，创建密码，打开ADF，创建日志

netstat -nap | grep 6379   - 查看进程6379
</code></pre><p>特点：提供高速缓存服务 - 缓存热点数据（访问量大，数据量不大）</p>
<pre><code>缓解了数据的压力（高频访问数据不用直接访问数据库）
</code></pre><p>redis提供了两种持久化数据的方案：</p>
<pre><code>1、RDA - 默认开启

2、AOF  - 默认关闭  -- appenddonly yes
</code></pre><p>服务器连接：</p>
<pre><code>redis-cli   -连接服务器

auth 123456  -输入密码

ping  -心跳事件（检查是否连接上）
</code></pre><p>数据库操作：</p>
<pre><code>set username jackfrued  -存储数据（用：set 键 值）

get username                   -取出数据（用：get 键） --&gt;&quot;jackfrued&quot;



set yuting 1000 ex 30   - 30秒自动失效

expirt  -设置超时时间

ttl yuting    -检查还有多少时间

keys*   - 只取key的部分

exists 键  - 判断键是否存在

flushdb   - 清洗数据库

flushall - 清除所有数据库中的所有键值对

select 1 - 切换到第二个数据库（默认16个数据库）

dbsisze  - 查看当前数据库有多少键值对

save - 保存

bgsave - 后台保存



stutdown [save|no save] -关闭服务器(关闭服务器时，默认save保存状态

quit  -退出
</code></pre><p>redis命令大全：redisdoc.com</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/27/redis数据库安装及应用/">
    <time datetime="2018-12-27T06:32:09.000Z" class="entry-date">
        2018-12-27
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-本地mysql安装" class="post-本地mysql安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/27/本地mysql安装/">本地mysql安装</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/27/本地mysql安装/" data-id="cjq6al0ry000he4veishhst9n" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/27/本地mysql安装/">
    <time datetime="2018-12-27T06:31:45.000Z" class="entry-date">
        2018-12-27
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-day-03通过PyCharm操作MySQL" class="post-day-03通过PyCharm操作MySQL post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/26/day-03通过PyCharm操作MySQL/">day-03通过PyCharm操作MySQL</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/26/day-03通过PyCharm操作MySQL/" data-id="cjq6al0s0000ie4vel86795yt" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="一、添加-insert"><a href="#一、添加-insert" class="headerlink" title="一、添加 insert"></a>一、添加 insert</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    no = int(input(&quot;编号：&quot;))</span><br><span class="line">    name = input(&apos;所在地：&apos;)</span><br><span class="line">    loc = input(&apos;所在地：&apos;)</span><br><span class="line">    # 1、创建连接对象</span><br><span class="line">    con = pymysql.connect(host=&apos;119.23.45.191&apos;,port=3306, database=&apos;hrs&apos;,charset=&apos;utf8&apos;,user=&apos;root&apos;,password=&apos;123456&apos;)</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        # 2、通过连接对象获取游标</span><br><span class="line">        with con.cursor() as cursor:</span><br><span class="line">            # 3、通过游标执行sql并获取执行结果</span><br><span class="line">            # result = cursor.execute(&apos;insert into tb_dept values (70,&quot;销售3部&quot;, &quot;背景&quot; )&apos;)</span><br><span class="line">            result = cursor.execute(&apos;insert into tb_dept values (%s, %s, %s)&apos;,(no,name,loc))   # %s：安全占位符，统一使用%s</span><br><span class="line">        if result == 1:</span><br><span class="line">            # 4、如果操作成功就提交事务</span><br><span class="line">            con.commit()</span><br><span class="line">            print(&quot;添加成功&quot;)</span><br><span class="line">    except:</span><br><span class="line">        # 4、操作失败回滚事务</span><br><span class="line">        con.rollback()</span><br><span class="line">    finally:</span><br><span class="line">        # 5、关闭连接释放资源</span><br><span class="line">        con.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h4 id="二、删除delete"><a href="#二、删除delete" class="headerlink" title="二、删除delete"></a>二、删除delete</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    no = int(input(&quot;编号：&quot;))</span><br><span class="line">    # 1、创建连接对象</span><br><span class="line">    con = pymysql.connect(host=&apos;119.23.45.191&apos;,port=3306, database=&apos;hrs&apos;,</span><br><span class="line">                          charset=&apos;utf8&apos;,user=&apos;root&apos;,password=&apos;123456&apos;,</span><br><span class="line">                          autocommit=True) # autocommit=True 设置自动提交</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        # 2、通过连接对象获取游标</span><br><span class="line">        with con.cursor() as cursor:</span><br><span class="line">            # 3、通过游标执行sql并获取执行结果</span><br><span class="line">            # result = cursor.execute(&apos;insert into tb_dept values (70,&quot;销售3部&quot;, &quot;背景&quot; )&apos;)</span><br><span class="line">            result = cursor.execute(&apos;delete from tb_dept where dno=%s&apos;,(no,))   # %s：安全占位符，统一使用%s</span><br><span class="line">        if result == 1:</span><br><span class="line">            # 4、如果操作成功就提交事务</span><br><span class="line">            print(&quot;删除成功&quot;)</span><br><span class="line">    except:</span><br><span class="line">        # 4、操作失败回滚事务</span><br><span class="line">        con.rollback()</span><br><span class="line">    finally:</span><br><span class="line">        # 5、关闭连接释放资源</span><br><span class="line">        con.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="三、修改-uptate"><a href="#三、修改-uptate" class="headerlink" title="三、修改 uptate"></a>三、修改 uptate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">pyMySQL</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    &quot;&quot;&quot;主函数（程序入口）&quot;&quot;&quot;</span><br><span class="line">    dept_no = int(input(&apos;编号：&apos;))</span><br><span class="line">    name = input(&apos;名字：&apos;)</span><br><span class="line">    loc = input(&apos;所在地：&apos;)</span><br><span class="line">    # 1.创建数据库连接对象</span><br><span class="line">    con = pymysql.connect(host=&apos;119.23.45.191&apos;, port=3306, database=&apos;hrs&apos;,</span><br><span class="line">                          charset=&apos;utf8&apos;, user=&apos;root&apos;, password=&apos;123456&apos;,</span><br><span class="line">                          autocommit=False)</span><br><span class="line">    try:</span><br><span class="line">        # 2.通过连接对象获取游标</span><br><span class="line">        with con.cursor() as cursor:</span><br><span class="line">            # 3.通过游标执行SQL并获得执行结果 - %s-安全占位符</span><br><span class="line">            result = cursor.execute(</span><br><span class="line">                &apos;update tb_dept set dname=%s, dloc=%s where dno=%s&apos;,</span><br><span class="line">                (name, loc, dept_no)</span><br><span class="line">            )</span><br><span class="line">        if result == 1:</span><br><span class="line">            # 4.操作成功提交事务</span><br><span class="line">            con.commit()</span><br><span class="line">            print(&apos;更新成功&apos;)</span><br><span class="line"></span><br><span class="line">    except:</span><br><span class="line">        # 4.操作失败回滚事务</span><br><span class="line">        con.rollback()</span><br><span class="line">    finally:</span><br><span class="line">        # 5.关闭连接释放资源</span><br><span class="line">        con.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="四、查询select"><a href="#四、查询select" class="headerlink" title="四、查询select"></a>四、查询select</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line">from pymysql.cursors import DictCursor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    &quot;&quot;&quot;主函数（程序入口）&quot;&quot;&quot;</span><br><span class="line">    # dept_no = int(input(&apos;编号：&apos;))</span><br><span class="line">    # name = input(&apos;名字：&apos;)</span><br><span class="line">    # loc = input(&apos;所在地：&apos;)</span><br><span class="line">    # 1.创建数据库连接对象</span><br><span class="line">    con = pymysql.connect(host=&apos;119.23.45.191&apos;, port=3306, database=&apos;hrs&apos;,</span><br><span class="line">                          charset=&apos;utf8&apos;, user=&apos;root&apos;, password=&apos;123456&apos;,</span><br><span class="line">                          autocommit=False)</span><br><span class="line">    try:</span><br><span class="line">        # 2.通过连接对象获取游标</span><br><span class="line">        with con.cursor(cursor=DictCursor) as cursor:</span><br><span class="line">            # 3.通过游标执行SQL并获得执行结果 - %s-安全占位符</span><br><span class="line">            cursor.execute(&apos;select dno as no, dname as name, dloc as loc from tb_dept&apos;)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line">            print(results)</span><br><span class="line">            print(&apos;编号\t名称\t\t所在地&apos;)</span><br><span class="line">            for dept in results:</span><br><span class="line">                print(dept[&apos;no&apos;], end=&apos;\t&apos;)</span><br><span class="line">                print(dept[&apos;name&apos;], end=&apos;\t&apos;)</span><br><span class="line">                print(dept[&apos;loc&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    finally:</span><br><span class="line">        # 5.关闭连接释放资源</span><br><span class="line">        con.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">方法二：--------------------------------------------------</span><br><span class="line"></span><br><span class="line">import pymysql</span><br><span class="line">from pymysql.cursors import DictCursor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Dept():</span><br><span class="line">    def __init__(self, no, name, loc):</span><br><span class="line">        self.no = no</span><br><span class="line">        self.name = name</span><br><span class="line">        self.loc = loc</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return f&apos;&#123;self.no&#125;,&#123;self.name&#125;,&#123;self.loc&#125;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    # 1.创建数据库连接对象</span><br><span class="line">    con = pymysql.connect(host=&apos;119.23.45.191&apos;, port=3306, database=&apos;hrs&apos;,</span><br><span class="line">                          charset=&apos;utf8&apos;, user=&apos;root&apos;, password=&apos;123456&apos;,</span><br><span class="line">                          autocommit=False)</span><br><span class="line">    try:</span><br><span class="line">        # 2.通过连接对象获取游标</span><br><span class="line">        with con.cursor(cursor=DictCursor) as cursor:</span><br><span class="line">            # 3.通过游标执行SQL并获得执行结果 - %s-安全占位符</span><br><span class="line">            cursor.execute(&apos;select dno as no, dname as name, dloc as loc from tb_dept&apos;)</span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line">            for result in results:</span><br><span class="line">                dept = Dept(**result)</span><br><span class="line">                print(dept)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    finally:</span><br><span class="line">        # 5.关闭连接释放资源</span><br><span class="line">        con.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/26/day-03通过PyCharm操作MySQL/">
    <time datetime="2018-12-26T09:23:07.000Z" class="entry-date">
        2018-12-26
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-数据库新建用户和权限的授权与招回" class="post-数据库新建用户和权限的授权与招回 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/26/数据库新建用户和权限的授权与招回/">数据库新建用户和权限的授权与招回</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/26/数据库新建用户和权限的授权与招回/" data-id="cjq6al0us000le4vetdip5dam" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>use hrs;<br>– 事务：多个数据操作要么全都成功要么全都失败（不可分割） - 一致性问题(列如：银行存取钱)<br>start transaction;  – 或者 begin;  -（开启事务）<br>commit;  – 提交事务<br>rollback;  – 回滚  - 修改数据在没 提交 之前开可以找回</p>
<p>create user hellokitty@’%’ identified by ‘123123’;  – 创建helloKitty用户<br>grant select on HRS.<em> to hellokitty@’%’;  – 授权给helloKitty<br>grant insert on HRS.</em> to hellokitty@’%’;  – 授权增加的权限<br>grant all privileges on <em>.</em> to hellokitty@’%’;  – 授权所有的权限<br>grant all privileges on <em>.</em> to hellokitty@’%’ with grant option; – 不仅或得了权限，而且还可以分配给人</p>
<p>revoke all privileges on <em>.</em> from hellokitty@’%’; – 招回权限<br>drop user hellokitty@’%’  – 删除hellokitty用户</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/26/数据库新建用户和权限的授权与招回/">
    <time datetime="2018-12-26T09:19:20.000Z" class="entry-date">
        2018-12-26
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-day-02练习" class="post-day-02练习 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/26/day-02练习/">day-02练习</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/26/day-02练习/" data-id="cjq6al0up000je4vef8a0y07z" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>– 创建人力资源管理系统数据库<br>drop database if exists hrs;<br>create database hrs default charset utf8;</p>
<p>– 切换数据库上下文环境<br>use hrs;</p>
<p>– 删除表<br>drop table if exists tb_emp;<br>drop table if exists tb_dept;</p>
<p>– 创建部门表<br>create table tb_dept<br>(<br>dno int comment ‘部门编号’,<br>dname varchar(10) not null comment ‘部门名称’,<br>dloc varchar(20) not null comment ‘部门所在地’,<br>primary key (dno)<br>);</p>
<p>– 添加部门记录<br>insert into tb_dept values<br>    (10, ‘会计部’, ‘北京’),<br>    (20, ‘研发部’, ‘成都’),<br>    (30, ‘销售部’, ‘重庆’),<br>    (40, ‘运维部’, ‘深圳’);</p>
<p>– 创建员工表<br>create table tb_emp<br>(<br>eno int comment ‘员工编号’,<br>ename varchar(20) not null comment ‘员工姓名’,<br>job varchar(20) not null comment ‘员工职位’,<br>mgr int comment ‘主管编号’,<br>sal int not null comment ‘员工工资’,<br>comm int comment ‘每月补贴’,<br>dno int comment ‘所在部门编号’,<br>primary key (eno),<br>foreign key (dno) references tb_dept (dno)<br>);</p>
<p>– 添加员工记录<br>insert into tb_emp values<br>    (7800, ‘张三丰’, ‘总裁’, null, 9000, 1200, 20),<br>    (2056, ‘乔峰’, ‘分析师’, 7800, 5000, 1500, 20),<br>    (3088, ‘李莫愁’, ‘设计师’, 2056, 3500, 800, 20),<br>    (3211, ‘张无忌’, ‘程序员’, 2056, 3200, null, 20),<br>    (3233, ‘丘处机’, ‘程序员’, 2056, 3400, null, 20),<br>    (3251, ‘张翠山’, ‘程序员’, 2056, 4000, null, 20),<br>    (5566, ‘宋远桥’, ‘会计师’, 7800, 4000, 1000, 10),<br>    (5234, ‘郭靖’, ‘出纳’, 5566, 2000, null, 10),<br>    (3344, ‘黄蓉’, ‘销售主管’, 7800, 3000, 800, 30),<br>    (1359, ‘胡一刀’, ‘销售员’, 3344, 1800, 200, 30),<br>    (4466, ‘苗人凤’, ‘销售员’, 3344, 2500, null, 30),<br>    (3244, ‘欧阳锋’, ‘程序员’, 3088, 3200, null, 20),<br>    (3577, ‘杨过’, ‘会计’, 5566, 2200, null, 10),<br>    (3588, ‘朱九真’, ‘会计’, 5566, 2500, null, 10);</p>
<p>– 查询薪资最高的员工姓名和工资(子查询)<br>select ename, sal from tb_emp where<br>sal=(select max(sal) as 工资 from tb_emp);</p>
<p>– 查询员工的姓名和年薪((月薪+补贴)<em>12)<br>select ename,(sal+ifnull(comm,0))</em>12 as annsal from tb_emp order by annsal desc;</p>
<p>– 查询有员工的部门的编号和人数</p>
<p>select dno, count(eno) as ren from tb_emp group by dno;</p>
<p>– 查询所有部门的名称和人数<br>– 当有二义性的时候需要使用完全全<br>select dname, ifnull(ren, 0) from tb_dept t1<br>left join (select dno, count(eno) as ren from tb_emp group by dno) t2 on t1.dno=t2.dno;<br>– 查询薪资最高的员工(Boss除外)的姓名和工资<br>select ename, sal from tb_emp where<br>sal=(select max(sal) as 工资 from tb_emp where mgr is not null);</p>
<p>– 查询薪水超过平均薪水的员工的姓名和工资<br>select ename, sal from tb_emp where<br>sal&gt;(select avg(sal) as 工资 from tb_emp);</p>
<p>– 查询薪水超过其所在部门平均薪水的员工的姓名、部门编号和工资<br>select ename, t1.dno, sal, sal-avgsal from tb_emp t1 inner join<br>(select dno, avg(sal) as avgsal<br>from tb_emp group by dno) t2 on t1.dno=t2.dno<br>where sal&gt;avgsal;</p>
<p>select ename, dno, sal, sal-avgsal from tb_emp t1 inner join<br>(select dno as dnonum, avg(sal) as avgsal<br>from tb_emp group by dno) t2 on dno=dnonum<br>where sal&gt;avgsal;  – 方法二</p>
<p>– 查询部门中薪水最高的人姓名、工资和所在部门名称<br>select ename, sal, dname from tb_dept t3 inner join<br>(<br>select ename,sal,t1.dno from tb_emp t1 inner join<br>(select dno, max(sal) as maxsal from tb_emp group by dno) t2<br>on t1.dno=t2.dno where sal=maxsal<br>) t4 on t3.dno=t4.dno;</p>
<p>– 查询主管的姓名和职位<br>select ename, job from tb_emp where eno in<br>(select distinct mgr from tb_emp where mgr is not null);<br>– 集合运算和去重操作性能都是非常糟糕的，应该尽量避免<br>– 可以使用exists和not exists来代替集合运算和去重<br>select ename, job from tb_emp t1 where exists<br>(select ‘x’ from tb_emp t2 where t1.eno=t2.mgr);</p>
<p>– 查询薪资排名4~6名的员工姓名和工资<br>select ename, sal from tb_emp order by sal desc limit 3,3;</p>
<p>– 先后顺序：select -&gt; from -&gt; where -&gt; group -&gt; having -&gt; order by -&gt; limit</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/26/day-02练习/">
    <time datetime="2018-12-26T09:12:50.000Z" class="entry-date">
        2018-12-26
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-Linux指令系统" class="post-Linux指令系统 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/26/Linux指令系统/">Linux指令系统</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/26/Linux指令系统/" data-id="cjq6al0ov0000e4ve7000yp0b" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="Linux指令系统："><a href="#Linux指令系统：" class="headerlink" title="Linux指令系统："></a>Linux指令系统：</h3><p>命令名称 [命名参数][命令对象]</p>
<h4 id="一、日常操作"><a href="#一、日常操作" class="headerlink" title="一、日常操作"></a>一、日常操作</h4><h5 id="1-cd指令-进入指定文件夹"><a href="#1-cd指令-进入指定文件夹" class="headerlink" title="1.cd指令    - 进入指定文件夹"></a>1.cd指令    - 进入指定文件夹</h5><p>cd  目录  - 进入指定目录(也可以是文件夹对应的路径)<br>   ~相对路径 — 绝对路径</p>
<p>cd  ..    - 返回上层目录<br>cd  ~ - 回到根目录</p>
<ol start="2">
<li><h5 id="ls指令-查看当前目录中的内容"><a href="#ls指令-查看当前目录中的内容" class="headerlink" title="ls指令 - 查看当前目录中的内容"></a>ls指令 - 查看当前目录中的内容</h5><p>ls<br>ls  -l/-lh<br>ls -a    - 隐藏文件也一起显示<br>ls -R - 递归显示所有内容<br>ls -S/-t - 按大小/时间排序</p>
</li>
</ol>
<h5 id="3-pwd指令-显示当前完整目录"><a href="#3-pwd指令-显示当前完整目录" class="headerlink" title="3.pwd指令  - 显示当前完整目录"></a>3.pwd指令  - 显示当前完整目录</h5><p>pwd</p>
<h5 id="4-文件操作指令"><a href="#4-文件操作指令" class="headerlink" title="4.文件操作指令"></a>4.文件操作指令</h5><p>touch  文件名 - 新建文件<br>cat 文件名    - 查看文件内容</p>
<p>rm 文件名 - 删除文件<br>rm - r 目录 - 删除文件夹</p>
<p>cp  文件名1  文件名2 - 将文件1中的内容拷贝到文件2中<br>cp -r  文件名/目录名   目录2 - 将文件/目录拷贝到目录2中</p>
<p>mv 文件名1  文件名2 - 将文件1中的内容移动到文件2中 ,并且删除文件1（文件重命名）<br>mv 文件名1  文件目录 - 将文件1移动到指定目录中  </p>
<p>(注意：cp/mv/rm 后面可以跟： -i询问  -f强制  -n不覆盖)</p>
<p>mkdir  目录名 - 新建文件夹<br>mkdir -p a/b/c - 按层级创建a,b,c三个文件夹<br>mkdir -p a/{b,c}/{d,e,f} -同一层级常见多个</p>
<p>rmdir  目录名 - 删除指定空目录</p>
<h5 id="7-history-显示历史指令记录"><a href="#7-history-显示历史指令记录" class="headerlink" title="7.history - 显示历史指令记录"></a>7.history - 显示历史指令记录</h5><p>bashrc 配置显示时间：export  HISTTIMEFORMAT=”[%y‐%m‐%d_%T] “<br>修改bashrc 后使其生效:  source ~/.bashrc  或 .  .bashrc   </p>
<h5 id="6-链接"><a href="#6-链接" class="headerlink" title="6.链接"></a>6.链接</h5><p>ln -s 源路径  目标路径 - 给源路径对应的文件在目标路径下创建一个软链接(可以看成是快捷键)(源路径是绝对路径)<br>ln 源路径  目标路径 - 给源路径对应的文件在目标路径下创建一个硬链接</p>
<h5 id="8-快捷键"><a href="#8-快捷键" class="headerlink" title="8.快捷键"></a>8.快捷键</h5><p>ctr + f  - 前进一个字符<br>ctr + b - 后退一个字符<br>ctr + a - 回到行首<br>ctr + e  - 回到行尾<br>ctr + w - 向左删除一个单词<br>ctr + u - 向左删除全部<br>ctr + k - 向右删除全部<br>ctr + y - 粘贴上次删除的内容<br>ctr + l - 清屏  </p>
<h4 id="二、进程相关指令"><a href="#二、进程相关指令" class="headerlink" title="二、进程相关指令"></a>二、进程相关指令</h4><h5 id="1-ps指令"><a href="#1-ps指令" class="headerlink" title="1.ps指令"></a>1.ps指令</h5><p>ps - 进程状态<br>ps -aux  或者  ps ex - 查看进程<br>ps -aux|grep 进程名 - 查看指定进程<br>psgrep  进程名</p>
<h5 id="2-top指令"><a href="#2-top指令" class="headerlink" title="2.top指令"></a>2.top指令</h5><p>top  - 动态监控进程<br>top  -p PID1,PID2,…. - 动态监控指定进程</p>
<h5 id="3-free指令"><a href="#3-free指令" class="headerlink" title="3.free指令"></a>3.free指令</h5><p>free -单位 - 以指定单位查看内存</p>
<h5 id="4-kill指令"><a href="#4-kill指令" class="headerlink" title="4.kill指令"></a>4.kill指令</h5><p>kill 进程号 - 杀死指定的进程<br>kill -1/-9/-15 - -1(HUP)不间断重启，-9(KILL)强制杀死进程,-15(TERM)正常终止进程<br>pkill  进程名 - 按名字处理进程<br>killall 进程名 - 处理名字匹配的进程</p>
<p>uptime - 查看系统状态</p>
<h4 id="三、权限管理"><a href="#三、权限管理" class="headerlink" title="三、权限管理"></a>三、权限管理</h4><h5 id="1-user和group-一个系统可以有多个用户和多个分组；-一个分组中可以有多个用户，一个用户在不同的分组中-多对多"><a href="#1-user和group-一个系统可以有多个用户和多个分组；-一个分组中可以有多个用户，一个用户在不同的分组中-多对多" class="headerlink" title="1.user和group : 一个系统可以有多个用户和多个分组； 一个分组中可以有多个用户，一个用户在不同的分组中(多对多)"></a>1.user和group : 一个系统可以有多个用户和多个分组； 一个分组中可以有多个用户，一个用户在不同的分组中(多对多)</h5><p>users  - 查看当前用户<br>groups  - 查看当前分组</p>
<p>groupadd  分组名 - 添加分组</p>
<p>useradd ‐G 分组列表 ‐m ‐s /bin/bash 用户名 - 创建一个用户添加到指定的分组中(在home创建相应的文件夹)</p>
<p>usermod -G 分组列表 用户名 - 修改分组</p>
<p>passwd 用户名 - 修改密码</p>
<p>su - 用户名 - 切换用户身份</p>
<p>sudo - 以管理员执行其他程序</p>
<h5 id="注意：-a-在ubuntu需要将用户添加到sudo分组中，才能使用sudo以管理员的身份执行程序"><a href="#注意：-a-在ubuntu需要将用户添加到sudo分组中，才能使用sudo以管理员的身份执行程序" class="headerlink" title="注意： a.在ubuntu需要将用户添加到sudo分组中，才能使用sudo以管理员的身份执行程序"></a>注意： a.在ubuntu需要将用户添加到sudo分组中，才能使用sudo以管理员的身份执行程序</h5><h5 id="b-在centOS中需要先执行visudo指令进入sudoers文件中在指定的位置添加内容"><a href="#b-在centOS中需要先执行visudo指令进入sudoers文件中在指定的位置添加内容" class="headerlink" title="b.在centOS中需要先执行visudo指令进入sudoers文件中在指定的位置添加内容"></a>b.在centOS中需要先执行visudo指令进入sudoers文件中在指定的位置添加内容</h5><p>Allow root to run any commands anywhere</p>
<p>root    ALL=(ALL)       ALL<br>xiaoming ALL=(ALL)      ALL (自己添加的，xiaoming是用户名)</p>
<h5 id="2-chmod"><a href="#2-chmod" class="headerlink" title="2.chmod"></a>2.chmod</h5><p>chmod    权限值   文件 - 修改指定文件的权限</p>
<p>chmod    [a,u,g,o][+,-][r,w,x]  文件 - 为指定文件，给所有用户添加相应的权限<br>   (a:所有，u:自己，g:同组，o:其他；<br>+：添加， -: 取消；<br>r:读，w:写，x:执行)<br>chown  用户名  文件 - 改变文件所有者</p>
<p>(权限制是三组二进制值)<br>self      group    other<br>rwx      rwx        rwx<br>111       101 001            - 自己读写可执行，同一分组的只读可执行，其他的只可执行<br>110      100        000</p>
<h4 id="三、日志管理"><a href="#三、日志管理" class="headerlink" title="三、日志管理"></a>三、日志管理</h4><h5 id="1-cat指令"><a href="#1-cat指令" class="headerlink" title="1.cat指令"></a>1.cat指令</h5><p>cat    文件 - 查看文件内容</p>
<h5 id="2-查看部分"><a href="#2-查看部分" class="headerlink" title="2.查看部分"></a>2.查看部分</h5><p>head -n  N  文件 - 查看前N行内容<br>tail  -n  N    文件  - 查看后N行内容</p>
<h5 id="3-less-N-文件"><a href="#3-less-N-文件" class="headerlink" title="3.less [-N]  文件"></a>3.less [-N]  文件</h5><ul>
<li>按 j 向下</li>
<li>按 k 向上</li>
<li>按 f 向下翻屏</li>
<li>按 b 向上翻屏</li>
<li>按 g 到全文开头</li>
<li>按 G 到全文结尾</li>
<li>按 Q 退出  </li>
</ul>
<p>more [-N]  文件     - 和less差不多，这个是尽可能多，less是尽可能少的加载</p>
<h5 id="4-处理"><a href="#4-处理" class="headerlink" title="4.处理"></a>4.处理</h5><p>sort   - 排序  (cat 文件 |sort)<br>uniq - 去重  (cat 文件 |uniq) - 只会去重相邻的重复是数据，一般结合sort一起使用:  |sort|uniq<br>awk ‘{print $N}’ - 打印第N列的内容(netstat -natp|awk ‘{print $4}’)</p>
<p>history |awk ‘{print $4}’ |sort |uniq ‐c | sort ‐rnk 1 | head ‐n 3    -获取历史指令中，使用最频繁的三个指令</p>
<h5 id="5-统计"><a href="#5-统计" class="headerlink" title="5.统计"></a>5.统计</h5><p>wc -c(字符)/-w(单词)/-l(行)  文件</p>
<h5 id="6-查找"><a href="#6-查找" class="headerlink" title="6.查找"></a>6.查找</h5><p>grep  查看对象 目录/文件  参数</p>
<p>参数：<br>-i 忽略大小写<br>-n   显示行标号<br>-E   通过正则表达式匹配<br>-v   忽略字段<br>-rn  递归查找目录，并打印行号<br>—include=‘<em>.py’ 仅包含 py文件<br>—exclude=‘</em>.js’ 不包含 js 文件</p>
<p>例如：<br>grep you bb.txt<br>grep you bb.txt -i<br>grep you bb.txt -i -n<br>grep -E ‘[0-9]+’ bb.txt </p>
<p>find    DIR -name  ‘<em>.xxx’ 找到目录下所有名字匹配的文件<br>找出文件夹<br>例：find /tmp/xyz/ ‐perm 0642 ‐size +10k ‐size ‐100k ‐name ‘</em>.log’</p>
<p>which  指令 - 精确查找当前可执行的指令<br>whereis  指令 - 查找所有匹配的命令</p>
<h4 id="四、网络管理"><a href="#四、网络管理" class="headerlink" title="四、网络管理"></a>四、网络管理</h4><p>ifconfig     查看网卡状态</p>
<p>netstat   -natp - 查看网络连接状态<br>netstat   -natp|grep  端口号 - 查看指定端口的网络连接状态 </p>
<p>ping  地址<br>ping  -i   时间 地址<br>ping  -c  次数    地址</p>
<p>telnet  ip地址 端口  - 查看远程主机网络连接状况</p>
<p>dig 地址 - 查看DNS<br>wget  地址 - 下载</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/26/Linux指令系统/">
    <time datetime="2018-12-26T00:54:12.000Z" class="entry-date">
        2018-12-26
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux学习/">Linux学习</a></li></ul>

    </footer>
</article>






  
    <article id="post-Linux文档管理" class="post-Linux文档管理 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/26/Linux文档管理/">git常用指令</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/26/Linux文档管理/" data-id="cjq6al0qo0004e4vezlcabrdy" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="git常用指令"><a href="#git常用指令" class="headerlink" title="git常用指令"></a>git常用指令</h3><h4 id="1-基本指令"><a href="#1-基本指令" class="headerlink" title="1.基本指令"></a>1.基本指令</h4><p>git init       ——  新建git仓库      </p>
<p>git add 文件/文件夹       ——  将文件添加到缓存区中  </p>
<p>git add -A       — 添加所有内容到缓存区中</p>
<p>git stutas      ———    查看git状态  </p>
<p>git commit -m  ‘提交信息’       ——  将缓存区中的内容全部提交到git本地仓库中  </p>
<p>git log        ——-    查看提交日志  </p>
<p>git reset  - - hard   HEAD       ——   让工作目录中的内容和仓库中的内容保持一致  </p>
<p>git reset  –hard HEAD^        ——  回到上一个版本  </p>
<p>git  reset  - - hard 版本号       ——  回到指定的版本  </p>
<p>git checkout  - -  文件名        ——  从暂存区中恢复工作目录中的内容(让工作区中的指定文件，回到上次提交的时候的状态)  </p>
<p>git clone <url> - 将服务器上的项目(仓库)克隆 (使用https地址需要输入密码，使用ssh地址需要添加公钥)  </url></p>
<p>git remote add origin 地址           —– 关联远程仓库(只需要关联一次)</p>
<p>git push [-u] origin master       —– 提交(-u在第一次提交分之的时候才用)  </p>
<h4 id="2-分之管理"><a href="#2-分之管理" class="headerlink" title="2.分之管理"></a>2.分之管理</h4><p>创建仓库会默认给我们创建一个master分之,这个分之一般作为提交和发布分之;开发一般会自己创建一个develop分之，用来开发和测试;多人协作的时候还可能根据不同的人或者(不同的功能)创建不同的分之，用来独立开发  </p>
<p>常见分之： master(主要是合并develop), develop(主要合并下面的其他分支), 功能/人员分之(开发)  </p>
<p>git branch [-a]                - 查看分之   </p>
<p>git branch 分之名             - 创建分之   </p>
<p>git checkout   分支名             -   切换分之      </p>
<p>git checkout -b 分之名                 - 切换并创建新的分之   </p>
<p>git diff    分之1  分之2             - 查看两个分之之间的差异  </p>
<p>git merge 分之名                 - 让当前分之和指定分之进行合并     </p>
<h5 id="注意-切换分之、push、pull，这些操作前要保证工作区是clean"><a href="#注意-切换分之、push、pull，这些操作前要保证工作区是clean" class="headerlink" title="注意: 切换分之、push、pull，这些操作前要保证工作区是clean"></a>注意: 切换分之、push、pull，这些操作前要保证工作区是clean</h5><h5 id="怎么避免冲突：-不要发生多个分之对同一个文件在同一个版本下进行修改-和同伴确认和商量"><a href="#怎么避免冲突：-不要发生多个分之对同一个文件在同一个版本下进行修改-和同伴确认和商量" class="headerlink" title="怎么避免冲突：  不要发生多个分之对同一个文件在同一个版本下进行修改(和同伴确认和商量)"></a>怎么避免冲突：  不要发生多个分之对同一个文件在同一个版本下进行修改(和同伴确认和商量)</h5>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/26/Linux文档管理/">
    <time datetime="2018-12-26T00:42:22.000Z" class="entry-date">
        2018-12-26
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux学习/">Linux学习</a></li></ul>

    </footer>
</article>






  
    <article id="post-MySQL建表day-02" class="post-MySQL建表day-02 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/25/MySQL建表day-02/">MySQL表关联(day-02)</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/25/MySQL建表day-02/" data-id="cjq6al0uw000ne4veoca6h6rh" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="MySQL表关联-day-02"><a href="#MySQL表关联-day-02" class="headerlink" title="MySQL表关联(day-02)"></a>MySQL表关联(day-02)</h2><p>ps -ef | grep docker   查询docker运行状态</p>
<p>netstat -nap | grep 3306  查询3306端口状态</p>
<h3 id="–-关系型数据库可以保证数据的完整性："><a href="#–-关系型数据库可以保证数据的完整性：" class="headerlink" title="– 关系型数据库可以保证数据的完整性：***"></a>– 关系型数据库可以保证数据的完整性：***</h3><h5 id="–-1、数据完整性：每一条数据都是独一无二的（没有冗余）-主键-唯一约束（唯一索引）"><a href="#–-1、数据完整性：每一条数据都是独一无二的（没有冗余）-主键-唯一约束（唯一索引）" class="headerlink" title="– 1、数据完整性：每一条数据都是独一无二的（没有冗余）-主键/唯一约束（唯一索引）"></a>– 1、数据完整性：每一条数据都是独一无二的（没有冗余）-主键/唯一约束（唯一索引）</h5><h5 id="–-2、参照完整性（引用完整性）：外键"><a href="#–-2、参照完整性（引用完整性）：外键" class="headerlink" title="– 2、参照完整性（引用完整性）：外键"></a>– 2、参照完整性（引用完整性）：外键</h5><h5 id="–-3、域完整性：数据类型、非空约束、默认值约束、检查约束"><a href="#–-3、域完整性：数据类型、非空约束、默认值约束、检查约束" class="headerlink" title="– 3、域完整性：数据类型、非空约束、默认值约束、检查约束"></a>– 3、域完整性：数据类型、非空约束、默认值约束、检查约束</h5><h3 id="–创建srs数据库"><a href="#–创建srs数据库" class="headerlink" title="–创建srs数据库"></a>–创建srs数据库</h3><p>drop database if exists SRS;<br>create database SRS default charset utf8 collate utf8_bin;     – collate utf8 _bin（utf8二进制编码排序）</p>
<h5 id="–-切换到SRS数据库"><a href="#–-切换到SRS数据库" class="headerlink" title="– 切换到SRS数据库"></a>– 切换到SRS数据库</h5><p>use SRS;</p>
<h4 id="–-创建学院表："><a href="#–-创建学院表：" class="headerlink" title="– 创建学院表："></a>– 创建学院表：</h4><p>create table tb_college</p>
<p>(<br>collid int not null auto_increment comment ‘学院编号’, –自动编号：auto_increment（必须是主键，而且是int类型）<br>collname varchar(50) not null comment ‘学院名称’,<br>collmaster varchar(20) not null comment ‘院长姓名’,<br>collweb varchar(511) default ‘’ comment ‘学院网站’,<br>primary key (collid)<br>);</p>
<h5 id="–-添加唯一约束"><a href="#–-添加唯一约束" class="headerlink" title="– 添加唯一约束"></a>– 添加唯一约束</h5><p>alter table tb_college add constraint uni_college_collname unique (collname);</p>
<h4 id="–-创建学生表："><a href="#–-创建学生表：" class="headerlink" title="– 创建学生表："></a>– 创建学生表：</h4><p>create table tb_student</p>
<p>(</p>
<p>stuid int not null comment ‘学号’,<br>sname varchar(20) not null comment ‘学生姓名’,<br>gender bit default 1 comment ‘性别’,<br>birth date not null comment ‘出生日期’,<br>addr varchar(255) default ‘’ comment ‘籍贯’,<br>collid int not null comment ‘所属学院编号’,<br>primary key (stuid)<br>);</p>
<h5 id="–-添加外键约束"><a href="#–-添加外键约束" class="headerlink" title="– 添加外键约束"></a>– 添加外键约束</h5><p>alter table tb_student add constraint fk_student_collid foreign key (collid) references tb_college (collid);</p>
<h4 id="–-创建教师表："><a href="#–-创建教师表：" class="headerlink" title="– 创建教师表："></a>– 创建教师表：</h4><p>create table tb_teacher<br>(<br>teaid int not null comment ‘教师工号’,<br>tname varchar(20) not null comment ‘教师姓名’,<br>title varchar(10) default ‘’ comment ‘职称’,<br>collid int not null comment ‘所属学院编号’<br>);</p>
<h5 id="–-添加主键约束"><a href="#–-添加主键约束" class="headerlink" title="– 添加主键约束"></a>– 添加主键约束</h5><p>alter table tb_teacher add constraint pk_teacher primary key (teaid);</p>
<h5 id="–-添加外键约束-1"><a href="#–-添加外键约束-1" class="headerlink" title="– 添加外键约束"></a>– 添加外键约束</h5><p>alter table tb_teacher add constraint fk_teacher_collid foreign key (collid) references tb_college (collid);</p>
<h4 id="–-创建课程表："><a href="#–-创建课程表：" class="headerlink" title="– 创建课程表："></a>– 创建课程表：</h4><p>create table tb_course<br>(<br>couid int not null comment ‘课程编号’,<br>cname varchar(50) not null comment ‘课程名称’,<br>credit tinyint not null comment ‘学分’,<br>teaid int not null comment ‘教师工号’,<br>primary key (couid)<br>);</p>
<h4 id="–-添加外键约束-2"><a href="#–-添加外键约束-2" class="headerlink" title="– 添加外键约束"></a>– 添加外键约束</h4><p>alter table tb_course add constraint fk_course_tid foreign key (teaid) references tb_teacher (teaid);</p>
<h4 id="–-创建学生选课表："><a href="#–-创建学生选课表：" class="headerlink" title="– 创建学生选课表："></a>– 创建学生选课表：</h4><p>create table tb_score<br>(<br>scid int not null auto_increment comment ‘选课编号’,<br>sid int not null comment ‘学号’,<br>cid int not null comment ‘课程编号’,<br>seldate date comment ‘选课时间日期’,<br>mark decimal(4,1) comment ‘考试成绩’,<br>primary key (scid)<br>);</p>
<h5 id="–-添加外键约束-3"><a href="#–-添加外键约束-3" class="headerlink" title="– 添加外键约束"></a>– 添加外键约束</h5><p>alter table tb_score add constraint fk_score_sid foreign key (sid) references tb_student (stuid);<br>alter table tb_score add constraint fk_score_cid foreign key (cid) references tb_course (couid);</p>
<h5 id="–-添加唯一约束-1"><a href="#–-添加唯一约束-1" class="headerlink" title="– 添加唯一约束"></a>– 添加唯一约束</h5><p>alter table tb_score add constraint uni_score_sid_cid unique (sid, cid);</p>
<p><img src="/images/QQ截图20181225130210.png" alt="表关联图"></p>
<h5 id="–-插入学院数据："><a href="#–-插入学院数据：" class="headerlink" title="– 插入学院数据："></a>– 插入学院数据：</h5><p>insert into tb_college (collname, collmaster, collweb) values<br>(‘计算机学院’, ‘左冷禅’, ‘<a href="http://www.abc.com&#39;)" target="_blank" rel="noopener">http://www.abc.com&#39;)</a>,<br>(‘外国语学院’, ‘岳不群’, ‘<a href="http://www.xyz.com&#39;)" target="_blank" rel="noopener">http://www.xyz.com&#39;)</a>,<br>(‘经济管理学院’, ‘风清扬’, ‘<a href="http://www.foo.com&#39;)" target="_blank" rel="noopener">http://www.foo.com&#39;)</a>;</p>
<h5 id="–-插入学生数据："><a href="#–-插入学生数据：" class="headerlink" title="– 插入学生数据："></a>– 插入学生数据：</h5><p>insert into tb_student (stuid, sname, gender, birth, addr, collid) values<br>(1001, ‘杨逍’, 1, ‘1990-3-4’, ‘四川成都’, 1),<br>(1002, ‘任我行’, 1, ‘1992-2-2’, ‘湖南长沙’, 1),<br>(1033, ‘王语嫣’, 0, ‘1989-12-3’, ‘四川成都’, 1),<br>(1572, ‘岳不群’, 1, ‘1993-7-19’, ‘陕西咸阳’, 1),<br>(1378, ‘纪嫣然’, 0, ‘1995-8-12’, ‘四川绵阳’, 1),<br>(1954, ‘林平之’, 1, ‘1994-9-20’, ‘福建莆田’, 1),<br>(2035, ‘东方不败’, 1, ‘1988-6-30’, null, 2),<br>(3011, ‘林震南’, 1, ‘1985-12-12’, ‘福建莆田’, 3),<br>(3755, ‘项少龙’, 1, ‘1993-1-25’, null, 3),<br>(3923, ‘杨不悔’, 0, ‘1985-4-17’, ‘四川成都’, 3);</p>
<h5 id="–-插入老师数据："><a href="#–-插入老师数据：" class="headerlink" title="– 插入老师数据："></a>– 插入老师数据：</h5><p>insert into tb_teacher (teaid, tname, title, collid) values<br>(1122, ‘张三丰’, ‘教授’, 1),</p>
<p>(1133, ‘宋远桥’, ‘副教授’, 1),</p>
<p>(1144, ‘杨逍’, ‘副教授’, 1),<br>(2255, ‘范遥’, ‘副教授’, 2),</p>
<p>(3366, ‘韦一笑’, ‘讲师’, 3);</p>
<h5 id="–-插入课程数据："><a href="#–-插入课程数据：" class="headerlink" title="– 插入课程数据："></a>– 插入课程数据：</h5><p>insert into tb_course (couid, cname, credit, teaid) values<br>(1111, ‘Python程序设计’, 3, 1122),<br>(2222, ‘Web前端开发’, 2, 1122),<br>(3333, ‘操作系统’, 4, 1122),<br>(4444, ‘计算机网络’, 2, 1133),<br>(5555, ‘编译原理’, 4, 1144),<br>(6666, ‘算法和数据结构’, 3, 1144),<br>(7777, ‘经贸法语’, 3, 2255),<br>(8888, ‘成本会计’, 2, 3366),<br>(9999, ‘审计学’, 3, 3366);</p>
<h5 id="–-插入选课数据："><a href="#–-插入选课数据：" class="headerlink" title="– 插入选课数据："></a>– 插入选课数据：</h5><p>insert into tb_score (sid, cid, seldate, mark) values </p>
<p>insert into tb_score (sid, cid, seldate, mark) values<br>(1001, 1111, ‘2017-09-01’, 95),<br>(1001, 2222, ‘2017-09-01’, 87.5),<br>(1001, 3333, ‘2017-09-01’, 100),<br>(1001, 4444, ‘2018-09-03’, null),<br>(1001, 6666, ‘2017-09-02’, 100),<br>(1002, 1111, ‘2017-09-03’, 65),<br>(1002, 5555, ‘2017-09-01’, 42),<br>(1033, 1111, ‘2017-09-03’, 92.5),<br>(1033, 4444, ‘2017-09-01’, 78),<br>(1033, 5555, ‘2017-09-01’, 82.5),<br>(1572, 1111, ‘2017-09-02’, 78),<br>(1378, 1111, ‘2017-09-05’, 82),<br>(1378, 7777, ‘2017-09-02’, 65.5),<br>(2035, 7777, ‘2018-09-03’, 88),<br>(2035, 9999, date(now()), null),<br>(3755, 1111, date(now()), null),<br>(3755, 8888, date(now()), null),<br>(3755, 9999, ‘2017-09-01’, 92);</p>
<p><img src="/images/QQ截图20181225130433.png" alt="tb_college"></p>
<p><img src="/images/QQ截图20181225130448.png" alt="tb_course"></p>
<p><img src="/images/QQ截图20181225130502.png" alt="tb_score"></p>
<p><img src="/images/QQ截图20181225130517.png" alt="tb_student"></p>
<p><img src="/images/QQ截图20181225130533.png" alt="tb_teacher"></p>
<h3 id="–-数据库查询"><a href="#–-数据库查询" class="headerlink" title="– 数据库查询"></a>– 数据库查询</h3><h5 id="–-查询所有学生信息"><a href="#–-查询所有学生信息" class="headerlink" title="– 查询所有学生信息"></a>– 查询所有学生信息</h5><p>select * from tb_student;</p>
<h5 id="–-查询所有课程名称及学分-投影和别名"><a href="#–-查询所有课程名称及学分-投影和别名" class="headerlink" title="– 查询所有课程名称及学分(投影和别名)"></a>– 查询所有课程名称及学分(投影和别名)</h5><p>select cname as 课程名称,credit as 学分 from tb_course; – （as可以省略）</p>
<p>– 查询所有女学生的姓名和出生日期(筛选)</p>
<h5 id="select-sname-as-姓名-birth-as-出生日期-from-tb-student-where-gender-0"><a href="#select-sname-as-姓名-birth-as-出生日期-from-tb-student-where-gender-0" class="headerlink" title="select sname as 姓名,birth as 出生日期 from tb_student where gender=0;"></a>select sname as 姓名,birth as 出生日期 from tb_student where gender=0;</h5><h5 id="–-查询所有80后学生的姓名、性别和出生日期-筛选"><a href="#–-查询所有80后学生的姓名、性别和出生日期-筛选" class="headerlink" title="– 查询所有80后学生的姓名、性别和出生日期(筛选)"></a>– 查询所有80后学生的姓名、性别和出生日期(筛选)</h5><p>select sname 姓名, case gender when 1 then ‘男’ else ‘女’ end 性别, birth 出生日期 from tb_student where birth between ‘1980-1-1’ and ‘1989-12-30’; </p>
<h5 id="–-使用MySQL中的分支函数（写法二）"><a href="#–-使用MySQL中的分支函数（写法二）" class="headerlink" title="– 使用MySQL中的分支函数（写法二）"></a>– 使用MySQL中的分支函数（写法二）</h5><p>– select sname 姓名, if(gender, ‘男’, ‘女’) 性别, birth 出生日期 from tb_student where birth between ‘1980-1-1’ and ‘1989-12-30’; (实际开发不常用)</p>
<h5 id="–-查询名字有四个中文字符的学生学号和姓名（运算函数）（1个中文字符是3个字节）"><a href="#–-查询名字有四个中文字符的学生学号和姓名（运算函数）（1个中文字符是3个字节）" class="headerlink" title="– 查询名字有四个中文字符的学生学号和姓名（运算函数）（1个中文字符是3个字节）"></a>– 查询名字有四个中文字符的学生学号和姓名（运算函数）（1个中文字符是3个字节）</h5><p>select stuid as 学号, sname as 姓名 from tb_student where length(sname)/3=4;</p>
<h5 id="–-查询姓”杨“的学生姓名和性别-模糊查询，仅限于字符串"><a href="#–-查询姓”杨“的学生姓名和性别-模糊查询，仅限于字符串" class="headerlink" title="– 查询姓”杨“的学生姓名和性别(模糊查询，仅限于字符串)"></a>– 查询姓”杨“的学生姓名和性别(模糊查询，仅限于字符串)</h5><p>select sname 姓名, if(gender, ‘男’, ‘女’) 性别, birth 出生日期 from tb_student where sname like ‘杨%’;</p>
<h5 id="–-查询姓”杨“名字两个字的学生姓名和性别-模糊查询，仅限于字符串"><a href="#–-查询姓”杨“名字两个字的学生姓名和性别-模糊查询，仅限于字符串" class="headerlink" title="– 查询姓”杨“名字两个字的学生姓名和性别(模糊查询，仅限于字符串)"></a>– 查询姓”杨“名字两个字的学生姓名和性别(模糊查询，仅限于字符串)</h5><p>select sname 姓名, if(gender, ‘男’, ‘女’) 性别, birth 出生日期 from tb_student where sname like ‘杨_’;</p>
<h5 id="–-查询姓”杨“名字三个字的学生姓名和性别-模糊查询，仅限于字符串"><a href="#–-查询姓”杨“名字三个字的学生姓名和性别-模糊查询，仅限于字符串" class="headerlink" title="– 查询姓”杨“名字三个字的学生姓名和性别(模糊查询，仅限于字符串)"></a>– 查询姓”杨“名字三个字的学生姓名和性别(模糊查询，仅限于字符串)</h5><p>select sname 姓名, if(gender, ‘男’, ‘女’) 性别, birth 出生日期 from tb_student where sname like ‘杨__’;</p>
<h5 id="–-查询名字中有”不“字或“嫣”字的学生的姓名-模糊查询，仅限于字符串"><a href="#–-查询名字中有”不“字或“嫣”字的学生的姓名-模糊查询，仅限于字符串" class="headerlink" title="– 查询名字中有”不“字或“嫣”字的学生的姓名(模糊查询，仅限于字符串)"></a>– 查询名字中有”不“字或“嫣”字的学生的姓名(模糊查询，仅限于字符串)</h5><p>select sname 姓名, if(gender, ‘男’, ‘女’) 性别, birth 出生日期 from tb_student where sname like ‘%不%’ or sname like’%嫣%’;</p>
<h5 id="–-查询没有录入家庭住址的学生姓名-空值"><a href="#–-查询没有录入家庭住址的学生姓名-空值" class="headerlink" title="– 查询没有录入家庭住址的学生姓名(空值)"></a>– 查询没有录入家庭住址的学生姓名(空值)</h5><p>select sname 姓名 from tb_student where addr is null or addr=’’;</p>
<h5 id="–-查询录入了家庭住址的学生姓名-空值"><a href="#–-查询录入了家庭住址的学生姓名-空值" class="headerlink" title="– 查询录入了家庭住址的学生姓名(空值)"></a>– 查询录入了家庭住址的学生姓名(空值)</h5><p>select sname 姓名 from tb_student where addr is not null and addr&lt;&gt;’’; – ( or变and  &lt;&gt;不等号)</p>
<h5 id="–-查询学生选课的所有日期-去重"><a href="#–-查询学生选课的所有日期-去重" class="headerlink" title="– 查询学生选课的所有日期(去重)"></a>– 查询学生选课的所有日期(去重)</h5><p>select distinct seldate from tb_score;</p>
<h5 id="–-查询学生的家庭住址-去重"><a href="#–-查询学生的家庭住址-去重" class="headerlink" title="– 查询学生的家庭住址(去重)"></a>– 查询学生的家庭住址(去重)</h5><p>select distinct addr from tb_student<br>where addr is not null and addr&lt;&gt;’’;</p>
<h5 id="–-查询男学生的姓名和生日按年龄从大到小排列-排序"><a href="#–-查询男学生的姓名和生日按年龄从大到小排列-排序" class="headerlink" title="– 查询男学生的姓名和生日按年龄从大到小排列(排序)"></a>– 查询男学生的姓名和生日按年龄从大到小排列(排序)</h5><p>select sname as 姓名, birth as 出生日期 from tb_student where gender=1 order by birth;  – (order by 排序)<br>select sname as 姓名, birth as 出生日期 from tb_student where gender=1 order by birth desc;  – (desc降序/asc升序- 默认不写)<br>select sname as 姓名, year(now())-year(birth) as 出生日期 from tb_student where gender=1 order by birth desc;<br>– (先筛选 再排序)<br>select stuid, sname, gender from tb_student order by gender asc, stuid desc;</p>
<p>– 聚合函数（max / min /sum / avg平均/count多少个）- 空值不会纳入计算<br>select count(*) from tb_student;</p>
<h5 id="–-查询年龄最大的学生的出生日期-聚合函数"><a href="#–-查询年龄最大的学生的出生日期-聚合函数" class="headerlink" title="– 查询年龄最大的学生的出生日期(聚合函数)"></a>– 查询年龄最大的学生的出生日期(聚合函数)</h5><p>select min(birth) from tb_student;</p>
<h5 id="–-查询年龄最小的学生的出生日期-聚合函数"><a href="#–-查询年龄最小的学生的出生日期-聚合函数" class="headerlink" title="– 查询年龄最小的学生的出生日期(聚合函数)"></a>– 查询年龄最小的学生的出生日期(聚合函数)</h5><p>select max(birth) from tb_student;</p>
<h5 id="–-查询男女学生的人数-分组和聚合函数"><a href="#–-查询男女学生的人数-分组和聚合函数" class="headerlink" title="– 查询男女学生的人数(分组和聚合函数)"></a>– 查询男女学生的人数(分组和聚合函数)</h5><p>select case gender when 1 then ‘男’ else ‘女’ end as 性别,count(gender) as 人数 from tb_student group by gender; – group by分组</p>
<h5 id="–-查询课程编号为1111的课程的平均成绩-筛选和聚合函数"><a href="#–-查询课程编号为1111的课程的平均成绩-筛选和聚合函数" class="headerlink" title="– 查询课程编号为1111的课程的平均成绩(筛选和聚合函数)"></a>– 查询课程编号为1111的课程的平均成绩(筛选和聚合函数)</h5><p>select avg(mark) from tb_score where cid=1111; </p>
<h5 id="–-查询学号为1001的学生所有课程的平均分-筛选和聚合函数"><a href="#–-查询学号为1001的学生所有课程的平均分-筛选和聚合函数" class="headerlink" title="– 查询学号为1001的学生所有课程的平均分(筛选和聚合函数)"></a>– 查询学号为1001的学生所有课程的平均分(筛选和聚合函数)</h5><p>select avg(mark) from tb_score where sid=1001; </p>
<h5 id="–-查询每个学生的学号和平均成绩-分组和聚合函数"><a href="#–-查询每个学生的学号和平均成绩-分组和聚合函数" class="headerlink" title="– 查询每个学生的学号和平均成绩(分组和聚合函数)"></a>– 查询每个学生的学号和平均成绩(分组和聚合函数)</h5><p>select sid as 学号, avg(mark) as 平均分 from tb_score group by sid;</p>
<h5 id="–-查询平均成绩大于等于90分的学生的学号和平均成绩"><a href="#–-查询平均成绩大于等于90分的学生的学号和平均成绩" class="headerlink" title="– 查询平均成绩大于等于90分的学生的学号和平均成绩"></a>– 查询平均成绩大于等于90分的学生的学号和平均成绩</h5><p>select sid as 学号, avg(mark) as 平均分 from tb_score group by sid having avg(mark)&gt;=90;  – 注意：分组之前的筛选用where,分组之后的筛选用having</p>
<p>– 查询年龄最大的学生的姓名(子查询（嵌套查询）) - 把一个查询的结果当成当成另一个查询的一部分使用</p>
<p>select sname as 姓名, birth as 出生日期 from tb_student where birth=(select min(birth) from tb_student);</p>
<h5 id="–-查询年龄最大的学生姓名和年龄-子查询-运算"><a href="#–-查询年龄最大的学生姓名和年龄-子查询-运算" class="headerlink" title="– 查询年龄最大的学生姓名和年龄(子查询+运算)"></a>– 查询年龄最大的学生姓名和年龄(子查询+运算)</h5><p>– 把一个查询的结果当成另一个查询的一部分来使用<br>select sname as 姓名, birth as 生日日期 from tb_student<br>where birth=(select min(birth) from tb_student);</p>
<h5 id="–-查询选了两门以上的课程"><a href="#–-查询选了两门以上的课程" class="headerlink" title="– 查询选了两门以上的课程"></a>– 查询选了两门以上的课程</h5><p>select sid from tb_score group by sid having count(sid)&gt;2;</p>
<h5 id="–-查询选了两门以上的课程的学生姓名-子查询-分组条件-集合运算"><a href="#–-查询选了两门以上的课程的学生姓名-子查询-分组条件-集合运算" class="headerlink" title="– 查询选了两门以上的课程的学生姓名(子查询/分组条件/集合运算)"></a>– 查询选了两门以上的课程的学生姓名(子查询/分组条件/集合运算)</h5><p>select sname as 姓名 from tb_student where stuid in (select sid from tb_score group by sid having count(sid)&gt;2);</p>
<h5 id="–-查询学生姓名、课程名称以及成绩-连接查询"><a href="#–-查询学生姓名、课程名称以及成绩-连接查询" class="headerlink" title="– 查询学生姓名、课程名称以及成绩(连接查询)"></a>– 查询学生姓名、课程名称以及成绩(连接查询)</h5><p>select sname, cname, mark from tb_student, tb_course, tb_score where stuid=sid and couid=cid;</p>
<h5 id="–-查询选课学生的姓名和平均成绩-子查询和连接查询"><a href="#–-查询选课学生的姓名和平均成绩-子查询和连接查询" class="headerlink" title="– 查询选课学生的姓名和平均成绩(子查询和连接查询)"></a>– 查询选课学生的姓名和平均成绩(子查询和连接查询)</h5><p>select sname as 姓名, avgmark as 平均分 from tb_student t1,<br>(select sid, avg(mark) as avgmark from tb_score group by sid) t2<br>where stuid=sid;  – 方法一</p>
<p>select sname as 姓名, avgmark as 平均分 from tb_student t1 inner join<br>(select sid, avg(mark) as avgmark from tb_score group by sid) t2<br>on stuid=sid; – 方法二</p>
<h5 id="–-查询每个学生的姓名和选课数量-左外连接和子查询"><a href="#–-查询每个学生的姓名和选课数量-左外连接和子查询" class="headerlink" title="– 查询每个学生的姓名和选课数量(左外连接和子查询)"></a>– 查询每个学生的姓名和选课数量(左外连接和子查询)</h5><p>– 左外连接：将左表不满足连表条件的记录查出来 不满足连表条件的地方补null<br>– 右外连接：将右表不满足连表条件的记录查出来 不满足连表条件的地方补null<br>– 在连接多表查询时写在前面的表称为左表，写在后面的表称为右表<br>– left outer join / right outer join<br>– MySQL不支持全外连接 full outer join<br>select sname as 姓名, ifnull(total, 0) as 选课数量<br>from tb_student t1<br>left join (select sid, count(sid) as total<br>from tb_score group by sid) t2<br>on stuid=sid;</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/25/MySQL建表day-02/">
    <time datetime="2018-12-25T01:44:08.000Z" class="entry-date">
        2018-12-25
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-MySQL安装" class="post-MySQL安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/24/MySQL安装/">MySQL安装(day-01)</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/24/MySQL安装/" data-id="cjq6al0qd0001e4vejyycso1u" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h3 id="数据库-实现项目中的数据持久化"><a href="#数据库-实现项目中的数据持久化" class="headerlink" title="数据库  - 实现项目中的数据持久化"></a>数据库  - 实现项目中的数据持久化</h3><h4 id="数据库的类别："><a href="#数据库的类别：" class="headerlink" title="数据库的类别："></a>数据库的类别：</h4><ul>
<li>关系型数据库  - MySQL<br>1、理论基础：集合论和关系代数<br>2、用二维表来组织数据（行（记录）和 列（字段））<br>3、SQL - 结构化查询语言</li>
</ul>
<h4 id="关系型数据库产品："><a href="#关系型数据库产品：" class="headerlink" title="关系型数据库产品："></a>关系型数据库产品：</h4><p>1、Oracle - 甲骨文<br>2、MySQL  - 甲骨文 - MariaDB<br>3、DB2、SQLServer、PostgreSQL、SQLite</p>
<ul>
<li><h5 id="NoSQL数据库-Redis"><a href="#NoSQL数据库-Redis" class="headerlink" title="NoSQL数据库   - Redis"></a>NoSQL数据库   - Redis</h5><p>1、MongoDB - 文档数据库 - 适合量大但是价值低的数据库<br>2、Redis   - KV数据库  - 性能特别好适合做告诉缓存服务<br>3、ElasticSearch - 搜索引擎</p>
</li>
<li><p>Linux安装软件<br>1、包管理工具 - yum / rpm</p>
<p>​</p>
</li>
</ul>
<h5 id="Docker-提供虚拟化服务，创建虚拟化容器并安装软件"><a href="#Docker-提供虚拟化服务，创建虚拟化容器并安装软件" class="headerlink" title="Docker - 提供虚拟化服务，创建虚拟化容器并安装软件"></a>Docker - 提供虚拟化服务，创建虚拟化容器并安装软件</h5><p>yum -y install docker-io(安装Docker)</p>
<p>yum info docker-io(查询docker)</p>
<p>yum remove docker-io(删除docker)</p>
<p>systemctl start docker(启动docker)<br>systemctl stop docker(停止docker)<br>systemctl restart docker(重启docker)<br>systemctl enable docker(开机启动)<br>systemctl disable docker(开机不启动)<br>systemctl status docker(查询状态)</p>
<h4 id="使用docker命令："><a href="#使用docker命令：" class="headerlink" title="使用docker命令："></a>使用docker命令：</h4><h5 id="1、查看已经下载的镜像文件（安装包）："><a href="#1、查看已经下载的镜像文件（安装包）：" class="headerlink" title="1、查看已经下载的镜像文件（安装包）："></a>1、查看已经下载的镜像文件（安装包）：</h5><p>docker images</p>
<h5 id="2、下载MySQL的镜像文件："><a href="#2、下载MySQL的镜像文件：" class="headerlink" title="2、下载MySQL的镜像文件："></a>2、下载MySQL的镜像文件：</h5><p>docker pull mysql:5.7</p>
<p>MySQL数据库超级管理员账号 - root<br>Oracle 数据库超级管理员账号 - sys<br>SQLServer、数据库超级管理员账号 - sa</p>
<h5 id="3、创建并运行容器"><a href="#3、创建并运行容器" class="headerlink" title="3、创建并运行容器"></a>3、创建并运行容器</h5><p>docker run -d -p 3306:3306 –name mysql57 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7</p>
<h5 id="4、查看运行中的命令"><a href="#4、查看运行中的命令" class="headerlink" title="4、查看运行中的命令"></a>4、查看运行中的命令</h5><p>docker ps</p>
<h5 id="5、查看所有的的容器"><a href="#5、查看所有的的容器" class="headerlink" title="5、查看所有的的容器"></a>5、查看所有的的容器</h5><p>docker container ls -a</p>
<h5 id="6、停止容器"><a href="#6、停止容器" class="headerlink" title="6、停止容器"></a>6、停止容器</h5><p>docker stop mysql57</p>
<h5 id="7、启动容器"><a href="#7、启动容器" class="headerlink" title="7、启动容器"></a>7、启动容器</h5><p>docker start mysql57</p>
<h5 id="8、删除容器"><a href="#8、删除容器" class="headerlink" title="8、删除容器"></a>8、删除容器</h5><p>docker rm -f mysql57</p>
<p>安装MySQL客户端工具：<br>Navicat   - 猫<br>SQLyog    - 海豚<br>Toad for MySQL  - 蛤蟆</p>
<h3 id="数据库-创建数据库及表"><a href="#数据库-创建数据库及表" class="headerlink" title="数据库  - 创建数据库及表"></a>数据库  - 创建数据库及表</h3><h5 id="–-SQL（结构化查询语言-分为三组："><a href="#–-SQL（结构化查询语言-分为三组：" class="headerlink" title="–     SQL（结构化查询语言)分为三组："></a>–     SQL（结构化查询语言)分为三组：</h5><p>– 1、DDL（数据定义语言）：create(创建数据库) / dorp（删除数据库） / alter（修改数据库）<br>– 2、DML（数据操作语言）：insert（插入数据） / delete（删除数据） / epdate（修改数据） / select（查询数据）<br>– 3、DCL (数据控制语言)：grant （）/ revoke（） /commit （）/ rollback（）</p>
<p>– drop database if exists srs; – 如果存在名为srs的数据库，就删除srs数据库（不能乱写）</p>
<h4 id="–-1、创建名为srs的数据库（并设置utf8）"><a href="#–-1、创建名为srs的数据库（并设置utf8）" class="headerlink" title="– 1、创建名为srs的数据库（并设置utf8）"></a>– 1、创建名为srs的数据库（并设置utf8）</h4><p>create database srs default charset utf8;</p>
<h4 id="–-2、切换数据库"><a href="#–-2、切换数据库" class="headerlink" title="– 2、切换数据库"></a>– 2、切换数据库</h4><p>use srs;  </p>
<h4 id="–-3、创建学生表tb-student"><a href="#–-3、创建学生表tb-student" class="headerlink" title="– 3、创建学生表tb_student"></a>– 3、创建学生表tb_student</h4><p>– 在学生表中学号可以唯一标记一条学生记录<br>– 我们通常称这样的列为主键列<br>create table tb_student<br>(<br>stuid int not null comment ‘学号’, – 学生的学号，int类型，not null非空约束<br>stuname varchar(10) not null comment ‘姓名’ , – 学生的名字，varchar(10)限定最大字符为10个<br>stusex bit default 1 comment ‘性别’, – 学生的性别，bit型只有两种类型（是0 或者1），default 1默认为1<br>stubirth date comment ‘出生日期’, – 学生的出生日期：datetime日期时间，time时间<br>stuaddr varchar(255) comment ‘家庭住址’, – 学生的家庭住址，varchar(255)可变字符，最大为255<br>primary key(stuid) – 学生的的学号为主键<br>);</p>
<h5 id="–-修改学生表，添加练习方式列"><a href="#–-修改学生表，添加练习方式列" class="headerlink" title="– 修改学生表，添加练习方式列"></a>– 修改学生表，添加练习方式列</h5><p>alter table tb_student add column stutel char(11); – char(11)定长字符串</p>
<h5 id="–-修改学生表-删除stutel列"><a href="#–-修改学生表-删除stutel列" class="headerlink" title="– 修改学生表 删除stutel列"></a>– 修改学生表 删除stutel列</h5><p>alter table tb_student drop column stutel;</p>
<h5 id="–-向学生表插入数据"><a href="#–-向学生表插入数据" class="headerlink" title="– 向学生表插入数据"></a>– 向学生表插入数据</h5><p>insert into tb_student values<br>(1001, ‘骆昊’, 1, ‘1980-11-28’, ‘四川成都’);<br>insert into tb_student (stuid, stuname) values<br>(1002, ‘王大锤’);<br>insert into tb_student values<br>(1003, ‘白元芳’, 1, ‘1988-5-5’, null),<br>(1004, ‘白洁’, 0, null, null),<br>(1005, ‘狄仁杰’, default, ‘1992-3-8’, ‘四川成都’);</p>
<h5 id="–-删除数据"><a href="#–-删除数据" class="headerlink" title="– 删除数据"></a>– 删除数据</h5><p>delete from tb_student where stuid=1002;</p>
<h5 id="–-删除学号在1003到1005之间的学生"><a href="#–-删除学号在1003到1005之间的学生" class="headerlink" title="– 删除学号在1003到1005之间的学生"></a>– 删除学号在1003到1005之间的学生</h5><p>delete from tb_student where stuid&gt;=1002 and stuid&lt;=1005; – (或者)<br>– delete from tb_student where stuid in (1003, 1004, 1005); （或者）<br>– delete from tb_student where stuid between 1003 and 1005; </p>
<h5 id="–-截断表（删除表中的所有数据）"><a href="#–-截断表（删除表中的所有数据）" class="headerlink" title="– 截断表（删除表中的所有数据）"></a>– 截断表（删除表中的所有数据）</h5><p>– truncate table tb_student;</p>
<h5 id="–-更新学号为1002、1004两个学生的生日"><a href="#–-更新学号为1002、1004两个学生的生日" class="headerlink" title="– 更新学号为1002、1004两个学生的生日"></a>– 更新学号为1002、1004两个学生的生日</h5><p>update tb_student set stubirth=’1990-1-1’ where stuid=1002 or 1004;</p>
<h5 id="–-更新学号为1002的姓名、性别、家庭住址"><a href="#–-更新学号为1002的姓名、性别、家庭住址" class="headerlink" title="– 更新学号为1002的姓名、性别、家庭住址"></a>– 更新学号为1002的姓名、性别、家庭住址</h5><p>update tb_student set stuname=’王小美’, stusex=0, stuaddr=’四川自贡’ where stuid=1002;</p>
<h5 id="–-更新"><a href="#–-更新" class="headerlink" title="– 更新"></a>– 更新</h5><p>update tb_student set stuaddr=’四川绵阳’ where stuaddr is null;</p>
<h5 id="–-筛选"><a href="#–-筛选" class="headerlink" title="– 筛选"></a>– 筛选</h5><p>select * from tb_student;</p>
<h5 id="–投影"><a href="#–投影" class="headerlink" title="–投影"></a>–投影</h5><p>select stuname, stubirth from tb_student where stusex=0;<br>select stuname, stubirth from tb_student;</p>
<h5 id="–-python1804班的教学视屏"><a href="#–-python1804班的教学视屏" class="headerlink" title="– python1804班的教学视屏"></a>– python1804班的教学视屏</h5><p>– 链接:<a href="https://pan.baidu.com/s/1nBQT5uLfDG_e_W6b7adbkw" target="_blank" rel="noopener">https://pan.baidu.com/s/1nBQT5uLfDG_e_W6b7adbkw</a>  密码:5iun</p>
<h4 id="–-bug网站-https-stackoverflow-com"><a href="#–-bug网站-https-stackoverflow-com" class="headerlink" title="–  bug网站 (https://stackoverflow.com/)"></a>–  bug网站 (<a href="https://stackoverflow.com/" target="_blank" rel="noopener">https://stackoverflow.com/</a>)</h4><h5 id="–-crash-course-新手"><a href="#–-crash-course-新手" class="headerlink" title="–  crash course 新手"></a>–  crash course 新手</h5><h5 id="–-best-practice-最佳实践"><a href="#–-best-practice-最佳实践" class="headerlink" title="–  best practice 最佳实践"></a>–  best practice 最佳实践</h5><p>– filetype:doc 搜索引擎使用技巧</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/24/MySQL安装/">
    <time datetime="2018-12-24T07:01:40.000Z" class="entry-date">
        2018-12-24
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>

    </footer>
</article>






  
    <article id="post-Nginx安装" class="post-Nginx安装 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2018/12/22/Nginx安装/">Nginx服务器安装</a>
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/12/22/Nginx安装/" data-id="cjq6al0qk0003e4vejotfaghw" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>Nginx服务器</p>
<p>1.阿里云添加80端口</p>
<p>阿里云上默认只有一个22端口用来做远程登录，如果希望在阿里云上安装支持http请求的nginx服务器，需要给阿里云添加80端口</p>
<p>  <img src="/images/aliyun0.png" alt="打开安全组设置"></p>
<p><img src="/images/aliyun2.png" alt=""></p>
<p><img src="/images/aliyun3.png" alt=""></p>
<p><img src="/images/aliyun4.png" alt=""></p>
<ol start="2">
<li>安装nginx</li>
</ol>
<p>a) 添加nginx存储库  </p>
<pre><code>yum install epel-release
</code></pre><p>b) 安装nginx</p>
<pre><code>yum install nginx
</code></pre><p>c) 运行nginx  </p>
<p>Nginx不会自行启动。要运行Nginx  </p>
<pre><code>systemctl start nginx
</code></pre><p>nginx的运行命令:  </p>
<pre><code>systemctl status nginx 查看nginx的状态  
systemctl start/stop/enable/disable nginx 启动/关闭/设置开机启动/禁止开机启动  
</code></pre><p>d) 系统启动时启动Nginx  </p>
<pre><code>systemctl enable nginx
</code></pre><p>e）如果您正在运行防火墙，请运行以下命令以允许HTTP和HTTPS通信：   </p>
<pre><code>sudo firewall-cmd --permanent --zone=public --add-service=http 

sudo firewall-cmd --permanent --zone=public --add-service=https

sudo firewall-cmd --reload
</code></pre><p>3.nginx目录共享配置</p>
<p>a) 在contOS目录中确定一个需要共享的文件夹，例如： /home/yuting  </p>
<p>b) 打开 etc/nginx/nginx.conf 文件，设置server</p>
<pre><code>#共享设置 - 在浏览器中输入服务器ip地址，会展示共享目录的文件列表
root /home/yuting;
location / {
       autoindex on;
       autoindex_exact_size on;
       autoindex_localtime on;
}  
</code></pre><p>除了可以共享文件，还可以自定义页面</p>
<pre><code>#自定义服务器页面
location / {
        root /home/yuting;
        index index.html index.htm;
}
</code></pre><p>注意： 如果出现权限问题，可以修改目录的权限  </p>
<p>ssh密钥认证</p>
<p>1.在主机和从机上执行：ssh-keygen</p>
<p>2.在从机上执行:  scp  id_rsa.pub  root@主机地址:~/.ssh/master.pub</p>
<p>(上面这条指令是将从机上的 id_rsa.pub文件拷贝传递给到主机的.ssh文件夹下，并且命名为’master.pub’)</p>
<p>3.在主机中的.ssh文件夹中创建authorized_keys文件： touch authorized_keys </p>
<p>4.修改文件authorized_keys的权限: chmod 600  authorized_keys  </p>
<p>5.将master.pub放进authorized_keys文件中:  cat master.pub &gt;&gt;  authorized_keys</p>
<p>6.在操作主机的时候，需要主机能够自己免密访问自己就将自己的公钥放在自己的authorized_keys文件中</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/12/22/Nginx安装/">
    <time datetime="2018-12-22T07:40:11.000Z" class="entry-date">
        2018-12-22
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux学习/">Linux学习</a></li></ul>

    </footer>
</article>






  
  
    <nav id="pagination">
      <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
      </nav>
    </nav>
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s">
        <input type="submit" id="searchsubmit" value="搜索">
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2018/12/27/redis数据库安装及应用/">day-04redis数据库安装及操作（和本地mysql安装）</a>
          </li>
        
          <li>
            <a href="/2018/12/27/本地mysql安装/">本地mysql安装</a>
          </li>
        
          <li>
            <a href="/2018/12/26/day-03通过PyCharm操作MySQL/">day-03通过PyCharm操作MySQL</a>
          </li>
        
          <li>
            <a href="/2018/12/26/数据库新建用户和权限的授权与招回/">数据库新建用户和权限的授权与招回</a>
          </li>
        
          <li>
            <a href="/2018/12/26/day-02练习/">day-02练习</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux学习/">Linux学习</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/Linux学习/" style="font-size: 10px;">Linux学习</a> <a href="/tags/数据库/" style="font-size: 20px;">数据库</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2018 John Doe
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>